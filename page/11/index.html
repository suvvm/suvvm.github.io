<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/ortrait.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/ortrait.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/ortrait.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.suvvm.work","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
<meta property="og:type" content="website">
<meta property="og:title" content="SUVVM">
<meta property="og:url" content="https://www.suvvm.work/page/11/index.html">
<meta property="og:site_name" content="SUVVM">
<meta property="og:description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="SUVVM">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://www.suvvm.work/page/11/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>SUVVM</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e5190116d64be66cac29daef18c94ac0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">SUVVM</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">呜嗷SUVVM</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="calendar fa-fw"></i>日程表</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2018/12/20/PTA-Advanced-Level-1016-Phone-Bills/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/20/PTA-Advanced-Level-1016-Phone-Bills/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1016 Phone Bills</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-20 19:33:16" itemprop="dateCreated datePublished" datetime="2018-12-20T19:33:16+08:00">2018-12-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　A long-distance telephone company charges its customers by the following rules:</p>
<p>　　Making a long-distance call costs a certain amount per minute, depending on the time of day when the call is made. When a customer starts connecting a long-distance call, the time will be recorded, and so will be the time when the customer hangs up the phone. Every calendar month, a bill is sent to the customer for each minute called (at a rate determined by the time of day). Your job is to prepare the bills for each month, given a set of phone call records.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>　　Each input file contains one test case. Each case has two parts: the rate structure, and the phone call records.</p>
<p>　　The rate structure consists of a line with 24 non-negative integers denoting the toll (cents/minute) from 00:00 - 01:00, the toll from 01:00 - 02:00, and so on for each hour in the day.</p>
<p>　　The next line contains a positive number N (≤), followed by N lines of records. Each phone call record consists of the name of the customer (string of up to 20 characters without space), the time and date (<code>mm:dd:hh:mm</code>), and the word <code>on-line</code>or <code>off-line</code>.</p>
<p>　　For each test case, all dates will be within a single month. Each <code>on-line</code> record is paired with the chronologically next record for the same customer provided it is an <code>off-line</code> record. Any <code>on-line</code> records that are not paired with an <code>off-line</code> record are ignored, as are <code>off-line</code> records not paired with an <code>on-line</code> record. It is guaranteed that at least one call is well paired in the input. You may assume that no two records for the same customer have the same time. Times are recorded using a 24-hour clock.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>　　For each test case, you must print a phone bill for each customer.</p>
<p>　　Bills must be printed in alphabetical order of customers’ names. For each customer, first print in a line the name of the customer and the month of the bill in the format shown by the sample. Then for each time period of a call, print in one line the beginning and ending time and date (<code>dd:hh:mm</code>), the lasting time (in minute) and the charge of the call. The calls must be listed in chronological order. Finally, print the total charge for the month in the format shown by the sample.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">10 10 10 10 10 10 20 20 20 15 15 15 15 15 15 15 20 30 20 15 15 10 10 10</span><br><span class="line">10</span><br><span class="line">CYLL 01:01:06:01 on-line</span><br><span class="line">CYLL 01:28:16:05 off-line</span><br><span class="line">CYJJ 01:01:07:00 off-line</span><br><span class="line">CYLL 01:01:08:03 off-line</span><br><span class="line">CYJJ 01:01:05:59 on-line</span><br><span class="line">aaa 01:01:01:03 on-line</span><br><span class="line">aaa 01:02:00:01 on-line</span><br><span class="line">CYLL 01:28:15:41 on-line</span><br><span class="line">aaa 01:05:02:24 on-line</span><br><span class="line">aaa 01:04:23:59 off-line</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CYJJ 01</span><br><span class="line">01:05:59 01:07:00 61 $12.10</span><br><span class="line">Total amount: $12.10</span><br><span class="line">CYLL 01</span><br><span class="line">01:06:01 01:08:03 122 $24.40</span><br><span class="line">28:15:41 28:16:05 24 $3.85</span><br><span class="line">Total amount: $28.25</span><br><span class="line">aaa 01</span><br><span class="line">02:00:01 04:23:59 4318 $638.80</span><br><span class="line">Total amount: $638.80</span><br></pre></td></tr></table></figure>
<p>解题思路：<br>　　本题是一个计算电话费用的题目，每组测试首先给出24个整数，代表一天中00：00 ~ 24：00每个小时每分钟通话的收费（单位是美分），下一行给出一个整数n表示通话记录的数量，之后n行跟随表示每条通话记录的信息，包括用户名 时间（月:日:时:分） 开始通话或结束通话标识（on-line / off-line）。要求按时间输出所有用户的通话信息，格式为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">用户名  通话月份</span><br><span class="line">开始通话时间  结束通话时间  本次通话金额（单位为美元）</span><br><span class="line">……</span><br><span class="line">……</span><br><span class="line">Total amount: 全部通话金额总和单位为美元）</span><br></pre></td></tr></table></figure>
<p>　　这里首先用一个数组toll[25]记录24小时通话各自的收费，用一个结构体node记录每条通话记录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int toll[25];   &#x2F;&#x2F;记录每个小时每分钟通话的收费</span><br><span class="line">struct node&#123;    </span><br><span class="line">    string name;    &#x2F;&#x2F;客户名</span><br><span class="line">    int month, dd, hh,mm;   &#x2F;&#x2F;时间</span><br><span class="line">    bool line;  &#x2F;&#x2F;结束通话标识 true表示on-line false表示off—line</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>　　我们想要在输入是将每个客户的通话记录都分开记录，这里可以利用map将每个客户名映射到一个vector容器，容器中装载通话记录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">map&lt;string, vector&lt;node&gt; &gt; customer;    </span><br><span class="line">&#x2F;&#x2F;customer[&quot;张三&quot;]现在就代表着姓名为张三的用户的所有通话记录</span><br></pre></td></tr></table></figure>
<p>　　这样我们就可以开始录入通话记录了</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        node temp;  <span class="comment">//temp记录当前输入的通话记录信息</span></span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; temp.name;   <span class="comment">//输入姓名</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d:%d:%d:%d"</span>, &amp;temp.month, &amp;temp.dd, &amp;temp.hh, &amp;temp.mm);</span><br><span class="line">        <span class="comment">//输入时</span></span><br><span class="line">        <span class="built_in">string</span> tline;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; tline;   <span class="comment">//输入通话标识</span></span><br><span class="line">        temp.line = mp[tline];  <span class="comment">//这里的mp将"on-line"映射为true将"off-line"映射为false</span></span><br><span class="line">        customer[temp.name].push_back(temp);</span><br><span class="line">        <span class="comment">//将当前信息记录入其客户所对应的容器中</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p> 之后我们就需要遍历所有客户与其通话记录，将客户的通话记录按时间升序排序，根据排序后的通话记录，我们就可以获得该客户的所有完整通话（时间相邻最近的on_line与off-line，中间不能夹着其他on_line与off-line）。我们需要获得每一个完整通话并将其记录在对应用户名下，我们用结构体call记录每一个完整通话的信息，包括客户名，开始通话时间，结束通话时间，通话时长，通话消费。 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">call</span>&#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;    <span class="comment">//客户名</span></span><br><span class="line">    <span class="keyword">int</span> onMonth, onDd, onHh, onMm;  <span class="comment">//开始通话时间</span></span><br><span class="line">    <span class="keyword">int</span> offMonth, offDd, offHh, offMm;  <span class="comment">//结束通话时间</span></span><br><span class="line">    <span class="keyword">int</span> sumTime;    <span class="comment">//通话时长</span></span><br><span class="line">    <span class="keyword">int</span> cost;   <span class="comment">//通话消耗</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>　为了记录每个客户的完整通话，我们可以采用和每个客户通话记录一样的记录方式，利用map将每个客户名映射到一个vector容器，只不过这次容器中装载的是完整通话。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">vector</span>&lt;call&gt; &gt; costInf;</span><br><span class="line"><span class="comment">//costInf["张三"]现在就代表着姓名为张三的客户的所有完整通话</span></span><br></pre></td></tr></table></figure>
<p>　　遍历信息　　</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">auto</span> i : customer)&#123; <span class="comment">//遍历所有客户</span></span><br><span class="line">        sort((i.second).begin(), (i.second).end(), cmp);</span><br><span class="line">        <span class="comment">//将每个用户的通话记录按时间升序排序</span></span><br><span class="line">        <span class="keyword">bool</span> isOnLine = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//isOnLine用来标记客户当前是否正在通话</span></span><br><span class="line">        call temp;  <span class="comment">//temp记录一次完整通话</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> j : (i.second))&#123;   <span class="comment">//遍历该客户所有通话记录</span></span><br><span class="line">            <span class="keyword">if</span>(j.line)&#123; <span class="comment">//遇到开始通话的通话记录</span></span><br><span class="line">                isOnLine = <span class="literal">true</span>;    <span class="comment">//标记当前状态为正在通话</span></span><br><span class="line">                temp.onMonth = j.month, temp.onDd = j.dd, temp.onHh = j.hh, temp.onMm = j.mm;</span><br><span class="line">                <span class="comment">//记录开始通话时间</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(!j.line &amp;&amp; isOnLine)&#123;  <span class="comment">//如果现在正在通话且当前通话记录为结束通话</span></span><br><span class="line">                isOnLine = <span class="literal">false</span>;   <span class="comment">//标记当前状态为结束通话</span></span><br><span class="line">                temp.offMonth = j.month, temp.offDd = j.dd, temp.offHh = j.hh, temp.offMm = j.mm;</span><br><span class="line">                <span class="comment">//记录通话结束时间</span></span><br><span class="line">                temp.sumTime = <span class="number">0</span>;</span><br><span class="line">                temp.cost = <span class="number">0</span>;</span><br><span class="line">                clt(temp.onDd, temp.onHh, temp.onMm, temp.offDd, temp.offHh, temp.offMm, temp.sumTime, temp.cost);</span><br><span class="line">                <span class="comment">//计算本次通话的时长于消耗</span></span><br><span class="line">                costInf[j.name].push_back(temp);</span><br><span class="line">                <span class="comment">//将当前完整通话信息记录入其客户所在容器中</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>　　由于我们之前已经将通话记录排序，所以获取的完整通话记录一定是时间升序。</p>
<p>　　对与计算每次完整通话时间与消耗，我们只需要由开始通话时间开始，每次加一分钟，到开始时间等于结束时间为止，在过程中记录通话时间与花费金额即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clt</span><span class="params">(<span class="keyword">int</span> bgdd, <span class="keyword">int</span> bghh, <span class="keyword">int</span> bgmm, <span class="keyword">int</span> eddd, <span class="keyword">int</span> edhh, <span class="keyword">int</span> edmm, <span class="keyword">int</span> &amp;sumTime, <span class="keyword">int</span> &amp;cost)</span></span>&#123;</span><br><span class="line">    <span class="comment">//传入开始时间与结束时间，把我们要计算的两个值传引用。</span></span><br><span class="line">    <span class="keyword">while</span>(bgdd &lt; eddd || bghh &lt; edhh || bgmm &lt; edmm)&#123;   <span class="comment">//开始时间小于结束时间</span></span><br><span class="line">        sumTime++;  <span class="comment">//通话时间加一分钟</span></span><br><span class="line">        cost += toll[bghh]; <span class="comment">//将该分钟的收费计入消耗</span></span><br><span class="line">        bgmm++; <span class="comment">//开始时间加一分钟</span></span><br><span class="line">        <span class="keyword">if</span>(bgmm == <span class="number">60</span>)&#123; <span class="comment">//分钟进位</span></span><br><span class="line">            bgmm = <span class="number">0</span>;</span><br><span class="line">            bghh++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(bghh == <span class="number">24</span>)&#123; <span class="comment">//小时进位</span></span><br><span class="line">            bghh = <span class="number">0</span>;</span><br><span class="line">            bgdd++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p> AC代码 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e3</span>+<span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> toll[<span class="number">25</span>];   <span class="comment">//记录每个小时每分钟通话的收费</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;    <span class="comment">//客户名</span></span><br><span class="line">    <span class="keyword">int</span> month, dd, hh,mm;   <span class="comment">//时间</span></span><br><span class="line">    <span class="keyword">bool</span> line;  <span class="comment">//结束通话标识 true表示on-line false表示off—line</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">call</span>&#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;    <span class="comment">//客户名</span></span><br><span class="line">    <span class="keyword">int</span> onMonth, onDd, onHh, onMm;  <span class="comment">//开始通话时间</span></span><br><span class="line">    <span class="keyword">int</span> offMonth, offDd, offHh, offMm;  <span class="comment">//结束通话时间</span></span><br><span class="line">    <span class="keyword">int</span> sumTime;    <span class="comment">//通话时长</span></span><br><span class="line">    <span class="keyword">int</span> cost;   <span class="comment">//通话消耗</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="keyword">bool</span>&gt; mp;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">vector</span>&lt;node&gt; &gt; customer;</span><br><span class="line"><span class="comment">//customer["张三"]现在就代表着姓名为张三的用户的所有通话记录</span></span><br><span class="line"><span class="built_in">map</span>&lt;<span class="built_in">string</span>, <span class="built_in">vector</span>&lt;call&gt; &gt; costInf;</span><br><span class="line"><span class="comment">//costInf["张三"]现在就代表着姓名为张三的客户的所有完整通话</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(node a, node b)</span></span>&#123;   <span class="comment">//按时间升序排序</span></span><br><span class="line">    <span class="keyword">if</span>(a.month != b.month)</span><br><span class="line">        <span class="keyword">return</span> a.month &lt; b.month;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a.dd != b.dd)&#123;</span><br><span class="line">        <span class="keyword">return</span> a.dd &lt; b.dd;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a.hh != b.hh)&#123;</span><br><span class="line">        <span class="keyword">return</span> a.hh &lt; b.hh;</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span>(a.mm != b.mm)</span><br><span class="line">        <span class="keyword">return</span> a.mm &lt; b.mm;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">clt</span><span class="params">(<span class="keyword">int</span> bgdd, <span class="keyword">int</span> bghh, <span class="keyword">int</span> bgmm, <span class="keyword">int</span> eddd, <span class="keyword">int</span> edhh, <span class="keyword">int</span> edmm, <span class="keyword">int</span> &amp;sumTime, <span class="keyword">int</span> &amp;cost)</span></span>&#123;</span><br><span class="line">    <span class="comment">//传入开始时间与结束时间，把我们要计算的两个值传引用。</span></span><br><span class="line">    <span class="keyword">while</span>(bgdd &lt; eddd || bghh &lt; edhh || bgmm &lt; edmm)&#123;   <span class="comment">//开始时间小于结束时间</span></span><br><span class="line">        sumTime++;  <span class="comment">//通话时间加一分钟</span></span><br><span class="line">        cost += toll[bghh]; <span class="comment">//将该分钟的收费计入消耗</span></span><br><span class="line">        bgmm++; <span class="comment">//开始时间加一分钟</span></span><br><span class="line">        <span class="keyword">if</span>(bgmm == <span class="number">60</span>)&#123; <span class="comment">//分钟进位</span></span><br><span class="line">            bgmm = <span class="number">0</span>;</span><br><span class="line">            bghh++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(bghh == <span class="number">24</span>)&#123; <span class="comment">//小时进位</span></span><br><span class="line">            bghh = <span class="number">0</span>;</span><br><span class="line">            bgdd++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    mp[<span class="string">"on-line"</span>] = <span class="literal">true</span>;</span><br><span class="line">    mp[<span class="string">"off-line"</span>] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">24</span>; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;toll[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        node temp;  <span class="comment">//temp记录当前输入的通话记录信息</span></span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; temp.name;   <span class="comment">//输入姓名</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d:%d:%d:%d"</span>, &amp;temp.month, &amp;temp.dd, &amp;temp.hh, &amp;temp.mm);</span><br><span class="line">        <span class="comment">//输入时</span></span><br><span class="line">        <span class="built_in">string</span> tline;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; tline;   <span class="comment">//输入通话标识</span></span><br><span class="line">        temp.line = mp[tline];  <span class="comment">//这里的mp将"on-line"映射为true将"off-line"映射为false</span></span><br><span class="line">        customer[temp.name].push_back(temp);</span><br><span class="line">        <span class="comment">//将当前信息记录入其客户所对应的容器中</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i : customer)&#123; <span class="comment">//遍历所有客户</span></span><br><span class="line">        sort((i.second).begin(), (i.second).end(), cmp);</span><br><span class="line">        <span class="comment">//将每个用户的通话记录按时间升序排序</span></span><br><span class="line">        <span class="keyword">bool</span> isOnLine = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">//isOnLine用来标记客户当前是否正在通话</span></span><br><span class="line">        call temp;  <span class="comment">//temp记录一次完整通话</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> j : (i.second))&#123;   <span class="comment">//遍历该客户所有通话记录</span></span><br><span class="line">            <span class="keyword">if</span>(j.line)&#123; <span class="comment">//遇到开始通话的通话记录</span></span><br><span class="line">                isOnLine = <span class="literal">true</span>;    <span class="comment">//标记当前状态为正在通话</span></span><br><span class="line">                temp.onMonth = j.month, temp.onDd = j.dd, temp.onHh = j.hh, temp.onMm = j.mm;</span><br><span class="line">                <span class="comment">//记录开始通话时间</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(!j.line &amp;&amp; isOnLine)&#123;  <span class="comment">//如果现在正在通话且当前通话记录为结束通话</span></span><br><span class="line">                isOnLine = <span class="literal">false</span>;   <span class="comment">//标记当前状态为结束通话</span></span><br><span class="line">                temp.offMonth = j.month, temp.offDd = j.dd, temp.offHh = j.hh, temp.offMm = j.mm;</span><br><span class="line">                <span class="comment">//记录通话结束时间</span></span><br><span class="line">                temp.sumTime = <span class="number">0</span>;</span><br><span class="line">                temp.cost = <span class="number">0</span>;</span><br><span class="line">                clt(temp.onDd, temp.onHh, temp.onMm, temp.offDd, temp.offHh, temp.offMm, temp.sumTime, temp.cost);</span><br><span class="line">                <span class="comment">//计算本次通话的时长于消耗</span></span><br><span class="line">                costInf[j.name].push_back(temp);</span><br><span class="line">                <span class="comment">//将当前完整通话信息记录入其客户所在容器中</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i : costInf)&#123;  <span class="comment">//遍历所有客户，输出信息</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; (i.first) &lt;&lt; <span class="string">" "</span>;   <span class="comment">//输出客户名</span></span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="literal">false</span>;  <span class="comment">//标记月份是否已经输出</span></span><br><span class="line">        <span class="keyword">double</span> tam = <span class="number">0.0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> j : (i.second))&#123;</span><br><span class="line">            <span class="keyword">if</span>(!flag)&#123;  <span class="comment">//没有输出月份</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%02d\n"</span>, j.onMonth);</span><br><span class="line">                flag = <span class="literal">true</span>;    <span class="comment">//格式化输出月份并将flag标记为true</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%02d:%02d:%02d %02d:%02d:%02d %d $%.2f\n"</span>, j.onDd, j.onHh, j.onMm, j.offDd, j.offHh, j.offMm, j.sumTime, j.cost / <span class="number">100.0</span>);</span><br><span class="line">            <span class="comment">//格式化输出开始时间 结束时间 通话时长 通话消耗（美分转为美元）</span></span><br><span class="line">            tam += j.cost/ <span class="number">100.0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Total amount: $%.2f\n"</span>, tam);</span><br><span class="line">        <span class="comment">//输出总消耗</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2018/12/18/PTA-Advanced-Level-1015-Reversible-Primes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/18/PTA-Advanced-Level-1015-Reversible-Primes/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1015 Reversible Primes</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-18 16:47:54" itemprop="dateCreated datePublished" datetime="2018-12-18T16:47:54+08:00">2018-12-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　A reversible prime in any number system is a prime whose “reverse” in that number system is also a prime. For example in the decimal system 73 is a reversible prime because its reverse 37 is also a prime.</p>
<p>　　Now given any two positive integers N (&lt;) and D (1), you are supposed to tell if N is a reversible prime with radix D.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>　　The input file consists of several test cases. Each case occupies a line which contains two integers N and D. The input is finished by a negative N.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>　　For each test case, print in one line <code>Yes</code> if N is a reversible prime with radix D, or <code>No</code> if not.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">73 10</span><br><span class="line">23 2</span><br><span class="line">23 10</span><br><span class="line">-2</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Yes</span><br><span class="line">Yes</span><br><span class="line">No</span><br></pre></td></tr></table></figure>
<p>解题思路：<br>　　本题给出一个十进制数字n，之后给出其进制d，要求判断其是不是可逆素数，若是可逆素数输出Yes否则输出No。</p>
<p>　　本题的可逆素数要求给出数字本身是素数且，将其转化为给出的进制，反转后重新转化为十进制还是素数。</p>
<p>　　如：23的2进制为10111反转后为11101 = 29，29与23都是素数，所以23是可逆素数。</p>
<p>　　由于本题有多组输入，所以可以用素数筛（埃氏筛法）先将素数打表。</p>
<p>　　埃氏筛法:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> prime[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn] = &#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">findPrime</span><span class="params">()</span></span>&#123;   <span class="comment">//埃氏筛法</span></span><br><span class="line">    <span class="comment">//每找到一个一个素数将其倍数都标记为不是素数</span></span><br><span class="line">    <span class="comment">//时间复杂度O(n loglogn)</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; maxn; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(vis[i] == <span class="literal">false</span>)&#123;    <span class="comment">//i是素数</span></span><br><span class="line">            prime[cnt++] = i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span> * i; j &lt; maxn; j += i)&#123;</span><br><span class="line">                vis[j] = <span class="literal">true</span>;  <span class="comment">//标记所以i的倍数</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后根据我们得到的素数判断输入的数是否为素数，若不是素数直接输出No，若是素数则将其转化为对应进制的数字后反转，将反转后得到的数字重新转化为10进制，在判断其是不是素数，是的话输出Yes否则输出No。</p>
<p>　　这样我们就需要两个函数，一个用来将其他进制数转化为10进制。另一个用来将10进制转化为其他进制并反转。</p>
<p>转化为d进制：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">decimalToOther</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> radix)</span></span>&#123;  <span class="comment">//将十进制数转化为其他进制数</span></span><br><span class="line">    <span class="built_in">string</span> ans;</span><br><span class="line">    <span class="comment">//ans从最低位开始记录，结束后得到的直接就是转化后数字的反转</span></span><br><span class="line">    <span class="keyword">while</span>(num)&#123;</span><br><span class="line">        ans += (num % radix) + <span class="string">'0'</span>;</span><br><span class="line">        num /= radix;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 转化为10进制 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">LL <span class="title">toDecimal</span><span class="params">(<span class="built_in">string</span> num, <span class="keyword">int</span> radix)</span></span>&#123;    <span class="comment">//将某进制数转化为10进制</span></span><br><span class="line">    LL ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num.size(); i++)&#123;</span><br><span class="line">        ans = ans * radix + (num[i] - <span class="string">'0'</span>);</span><br><span class="line">        <span class="keyword">if</span>(ans &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> AC代码 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> prime[maxn];</span><br><span class="line"><span class="keyword">bool</span> vis[maxn] = &#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">findPrime</span><span class="params">()</span></span>&#123;   <span class="comment">//埃氏筛法</span></span><br><span class="line">    <span class="comment">//每找到一个一个素数将其倍数都标记为不是素数</span></span><br><span class="line">    <span class="comment">//时间复杂度O(n loglogn)</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt; maxn; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(vis[i] == <span class="literal">false</span>)&#123;    <span class="comment">//i是素数</span></span><br><span class="line">            prime[cnt++] = i;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">2</span> * i; j &lt; maxn; j += i)&#123;</span><br><span class="line">                vis[j] = <span class="literal">true</span>;  <span class="comment">//标记所以i的倍数</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">toDecimal</span><span class="params">(<span class="built_in">string</span> num, <span class="keyword">int</span> radix)</span></span>&#123;    <span class="comment">//将某进制数转化为10进制</span></span><br><span class="line">    LL ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; num.size(); i++)&#123;</span><br><span class="line">        ans = ans * radix + (num[i] - <span class="string">'0'</span>);</span><br><span class="line">        <span class="keyword">if</span>(ans &lt; <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="built_in">string</span> <span class="title">decimalToOther</span><span class="params">(<span class="keyword">int</span> num, <span class="keyword">int</span> radix)</span></span>&#123;  <span class="comment">//将十进制数转化为其他进制数</span></span><br><span class="line">    <span class="built_in">string</span> ans;</span><br><span class="line">    <span class="comment">//ans从最低位开始记录，结束后得到的直接就是转化后数字的反转</span></span><br><span class="line">    <span class="keyword">while</span>(num)&#123;</span><br><span class="line">        ans += (num % radix) + <span class="string">'0'</span>;</span><br><span class="line">        num /= radix;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> n, d;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    findPrime();    <span class="comment">//素数打表</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) != EOF &amp;&amp; n &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">//输入n，n &lt; 0时直接结束运算</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;d);</span><br><span class="line">        <span class="comment">//输入进制d</span></span><br><span class="line">        <span class="keyword">if</span>(vis[n] == <span class="literal">true</span> || n &lt;= <span class="number">1</span>)&#123;   <span class="comment">//若n不是素数直接输出No进行下一次运算</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"No\n"</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">string</span> toRadix = decimalToOther(n, d);</span><br><span class="line">        <span class="comment">//将n转化为d进制并反转</span></span><br><span class="line">        <span class="keyword">int</span> ans = toDecimal(toRadix, d);</span><br><span class="line">        <span class="comment">//将反转的数重新转化为10进制</span></span><br><span class="line">        <span class="keyword">if</span>(vis[ans] == <span class="literal">true</span> || ans &lt;= <span class="number">1</span>)&#123;<span class="comment">//若反转的数不是素数输出No</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"No\n"</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);    <span class="comment">//否则输出Yes</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2018/12/17/PTA-Advanced-Level-1014-Waiting-in-Line/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/17/PTA-Advanced-Level-1014-Waiting-in-Line/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1014 Waiting in Line</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-17 21:47:51" itemprop="dateCreated datePublished" datetime="2018-12-17T21:47:51+08:00">2018-12-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　Suppose a bank has N windows open for service. There is a yellow line in front of the windows which devides the waiting area into two parts. The rules for the customers to wait in line are:</p>
<ul>
<li>The space inside the yellow line in front of each window is enough to contain a line with Mcustomers. Hence when all the N lines are full, all the customers after (and including) the (st one will have to wait in a line behind the yellow line.</li>
<li>Each customer will choose the shortest line to wait in when crossing the yellow line. If there are two or more lines with the same length, the customer will always choose the window with the smallest number.</li>
<li>Customeri will take Ti minutes to have his/her transaction processed.</li>
<li>The first N customers are assumed to be served at 8:00am.</li>
</ul>
<p>　　Now given the processing time of each customer, you are supposed to tell the exact time at which a customer has his/her business done.</p>
<p>　　For example, suppose that a bank has 2 windows and each window may have 2 custmers waiting inside the yellow line. There are 5 customers waiting with transactions taking 1, 2, 6, 4 and 3 minutes, respectively. At 08:00 in the morning, customer1 is served at window1 while customer2 is served at window2. Customer3 will wait in front of window1 and customer4 will wait in front of window2. Customer5 will wait behind the yellow line.</p>
<p>　　At 08:01, customer1 is done and customer5 enters the line in front of window1 since that line seems shorter now. Customer2 will leave at 08:02, customer4 at 08:06, customer3 at 08:07, and finally customer5 at 08:10.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>　　Each input file contains one test case. Each case starts with a line containing 4 positive integers: N (≤, number of windows), M (≤, the maximum capacity of each line inside the yellow line), K (≤, number of customers), and Q (≤, number of customer queries).</p>
<p>　　The next line contains K positive integers, which are the processing time of the K customers.</p>
<p>　　The last line contains Q positive integers, which represent the customers who are asking about the time they can have their transactions done. The customers are numbered from 1 to K.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>　　For each of the Q customers, print in one line the time at which his/her transaction is finished, in the format <code>HH:MM</code> where <code>HH</code> is in [08, 17] and <code>MM</code> is in [00, 59]. Note that since the bank is closed everyday after 17:00, for those customers who cannot be served before 17:00, you must output <code>Sorry</code> instead.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 2 7 5</span><br><span class="line">1 2 6 4 3 534 2</span><br><span class="line">3 4 5 6 7</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">08:07</span><br><span class="line">08:06</span><br><span class="line">08:10</span><br><span class="line">17:00</span><br><span class="line">Sorry</span><br></pre></td></tr></table></figure>
<p>解题思路：<br>　　本题意思是银行有n个窗口，每个窗口前最多可以排m个人，现在有k个人，所有窗口从8点开始服务，到17点停止<strong>接受</strong>服务，不过如果17点前接受了服务，无论多晚也会服务完该客户。要求按查询输出客户完成服务的时间（愚蠢的顾客们只要选定一个排队的窗口就会一直排到关门，即使其他窗口空了也不换）。</p>
<p>　　本题每组测试数据首先给出4个整数，分别为窗口数量n、最大排队人数m、客户人数k、查询数量q，之后一行包括k个整数，代表服务每个客户所需要的时间（分钟），下一行包括q个整数，代表查询的客户。</p>
<p>　　首先分析一下样例<br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217204731686-2120059976.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217204906854-2084365850.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217205006622-109122127.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217205048366-1862476535.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217205127835-1367261046.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217205356305-1536761116.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217205504799-729189424.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217205639679-1335197869.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217205917604-2026796990.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217210136247-1425635367.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217210252125-877684797.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217210404646-320711987.png" alt="img"><br><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217210547699-456260582.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181217211203699-1805800642.png" alt="img"></p>
<p>我们可以吧每一个窗口看作一个先进先出的队列，队列的容量为m，一共有n个这样的队列。queue<int> win[maxw]　，win[ i ]便代表第i窗口的队列。由于客户总是会选择最短的队列，所以在所有队列被填满时不会有出队操作。每个队列在开始处理今天第一名客户时记录现在以及消耗的时间为0，在所有队列都被填满后就要执行出队操作了，我们需要找到哪个窗口的客户先处理完，对其所在的窗口进行出队，同时获得当前处理的客户的结束时间与下一名客户的开始时间，之后将下一名客户入队。</int></p>
<p>　　在所有客户都入队后需要对所有窗口进行出队操作，这样便可以获得所有客户的开始时间与结束时间。</p>
<p>找到排队最短的窗口</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getMinSize</span><span class="params">(<span class="keyword">int</span> &amp;w)</span></span>&#123; <span class="comment">//获得当前排队长度最短的窗口</span></span><br><span class="line">    <span class="keyword">int</span> minSize = INT_MAX;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(win[i].size() &lt; minSize)&#123;</span><br><span class="line">            minSize = win[i].size();</span><br><span class="line">            w = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minSize;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 找到最先处理完的客户所在的窗口并执行出队 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span></span>&#123; <span class="comment">//找到最先处理完的客户所在的窗口并执行出队</span></span><br><span class="line">    <span class="keyword">int</span> disWin; <span class="comment">//记录最先处理完的客户所在的窗口</span></span><br><span class="line">    <span class="keyword">int</span> disEdTime = INT_MAX;    <span class="comment">//记录记录最先处理完的客户的结束时间</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(disEdTime &gt; nowTime[i] + needTime[win[i].front()])&#123;</span><br><span class="line">            <span class="comment">//服务结束时间为当前窗口消耗时间假设处理该客户需要消耗的时间</span></span><br><span class="line">            disWin = i; <span class="comment">//记录窗口与结束时间</span></span><br><span class="line">            disEdTime = nowTime[i] + needTime[win[i].front()];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    edTime[win[disWin].front()] = disEdTime;    <span class="comment">//记录客户结束时间</span></span><br><span class="line">    win[disWin].pop();  <span class="comment">//出队</span></span><br><span class="line">    nowTime[disWin] = disEdTime;    <span class="comment">//记录该窗口现在已经消耗的时间</span></span><br><span class="line">    <span class="keyword">if</span>(!win[disWin].empty())</span><br><span class="line">        bgTime[win[disWin].front()] = disEdTime;</span><br><span class="line">        <span class="comment">//下一名客户的开始时间就是上一名客户的结束时间</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 某窗口全部出队 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">disposeAll</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123; <span class="comment">//处理某窗口全部出队</span></span><br><span class="line">    <span class="keyword">while</span>(!win[w].empty())&#123;</span><br><span class="line">        edTime[win[w].front()] = nowTime[w] + needTime[win[w].front()];</span><br><span class="line">        <span class="comment">//获得用户结束时间</span></span><br><span class="line">        nowTime[w] = edTime[win[w].front()];</span><br><span class="line">        <span class="comment">//记录当前窗口消耗时间</span></span><br><span class="line">        win[w].pop();</span><br><span class="line">        <span class="keyword">if</span>(!win[w].empty())<span class="comment">//记录下一个用户的开始时间</span></span><br><span class="line">            bgTime[win[w].front()] = nowTime[w];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后读入查询，判断所查询的客户的开始时间是否在17：00前，如果在17：00前输出其结束时间，否则输出Sorry。</p>
<p>AC代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxw = <span class="number">25</span>;    <span class="comment">//最大窗口数</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxk = <span class="number">1e3</span>+<span class="number">10</span>;    <span class="comment">//最大客户数</span></span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; win[maxw];   <span class="comment">//窗口队列</span></span><br><span class="line"><span class="keyword">int</span> nowTime[maxw];  <span class="comment">//记录每个窗口当前服务客户已经消耗的时间</span></span><br><span class="line"><span class="keyword">int</span> needTime[maxk]; <span class="comment">//记录服务每个客户需要消耗的时间</span></span><br><span class="line"><span class="keyword">int</span> bgTime[maxk];   <span class="comment">//记录每个客户开始被服务的时间</span></span><br><span class="line"><span class="keyword">int</span> edTime[maxk];   <span class="comment">//记录每个客户服务结束的时间</span></span><br><span class="line"><span class="keyword">int</span> n, m, k, q; <span class="comment">//n窗口数，m队列长度，k客户数，q查询数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getMinSize</span><span class="params">(<span class="keyword">int</span> &amp;w)</span></span>&#123; <span class="comment">//获得当前排队长度最短的窗口</span></span><br><span class="line">    <span class="keyword">int</span> minSize = INT_MAX;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(win[i].size() &lt; minSize)&#123;</span><br><span class="line">            minSize = win[i].size();</span><br><span class="line">            w = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> minSize;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dispose</span><span class="params">()</span></span>&#123; <span class="comment">//找到最先处理完的客户所在的窗口并执行出队</span></span><br><span class="line">    <span class="keyword">int</span> disWin; <span class="comment">//记录最先处理完的客户所在的窗口</span></span><br><span class="line">    <span class="keyword">int</span> disEdTime = INT_MAX;    <span class="comment">//记录记录最先处理完的客户的结束时间</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(disEdTime &gt; nowTime[i] + needTime[win[i].front()])&#123;</span><br><span class="line">            <span class="comment">//服务结束时间为当前窗口消耗时间假设处理该客户需要消耗的时间</span></span><br><span class="line">            disWin = i; <span class="comment">//记录窗口与结束时间</span></span><br><span class="line">            disEdTime = nowTime[i] + needTime[win[i].front()];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    edTime[win[disWin].front()] = disEdTime;    <span class="comment">//记录客户结束时间</span></span><br><span class="line">    win[disWin].pop();  <span class="comment">//出队</span></span><br><span class="line">    nowTime[disWin] = disEdTime;    <span class="comment">//记录该窗口现在已经消耗的时间</span></span><br><span class="line">    <span class="keyword">if</span>(!win[disWin].empty())</span><br><span class="line">        bgTime[win[disWin].front()] = disEdTime;</span><br><span class="line">        <span class="comment">//下一名客户的开始时间就是上一名客户的结束时间</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">disposeAll</span><span class="params">(<span class="keyword">int</span> w)</span></span>&#123; <span class="comment">//处理某窗口全部出队</span></span><br><span class="line">    <span class="keyword">while</span>(!win[w].empty())&#123;</span><br><span class="line">        edTime[win[w].front()] = nowTime[w] + needTime[win[w].front()];</span><br><span class="line">        <span class="comment">//获得用户结束时间</span></span><br><span class="line">        nowTime[w] = edTime[win[w].front()];</span><br><span class="line">        <span class="comment">//记录当前窗口消耗时间</span></span><br><span class="line">        win[w].pop();</span><br><span class="line">        <span class="keyword">if</span>(!win[w].empty())<span class="comment">//记录下一个用户的开始时间</span></span><br><span class="line">            bgTime[win[w].front()] = nowTime[w];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>, &amp;n, &amp;m, &amp;k, &amp;q) != EOF)&#123;</span><br><span class="line">        <span class="comment">//输入n窗口数，m队列长度，k客户数，q查询数</span></span><br><span class="line">        <span class="built_in">memset</span>(nowTime, <span class="number">0</span>, <span class="keyword">sizeof</span>(nowTime));</span><br><span class="line">        <span class="built_in">memset</span>(needTime, <span class="number">0</span>, <span class="keyword">sizeof</span>(needTime));</span><br><span class="line">        <span class="built_in">memset</span>(edTime, <span class="number">0</span>, <span class="keyword">sizeof</span>(edTime));</span><br><span class="line">        <span class="built_in">memset</span>(bgTime, <span class="number">0</span>, <span class="keyword">sizeof</span>(bgTime));</span><br><span class="line">        <span class="comment">//将所有时间初始化为0</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; i++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;needTime[i]);</span><br><span class="line">            <span class="comment">//输入服务每个客户所需要的时间</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> minSize, minWin;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; i++)&#123;    <span class="comment">//遍历所有客户</span></span><br><span class="line">            minSize = getMinSize(minWin);   <span class="comment">//找到当前排队最短的窗口</span></span><br><span class="line">            <span class="keyword">if</span>(minSize &gt;= m)&#123;   <span class="comment">//如果所有窗口的队都满了</span></span><br><span class="line">                dispose();  <span class="comment">//执行最先处理完客户所在的窗口出队</span></span><br><span class="line">                minSize = getMinSize(minWin);   <span class="comment">//重新获得最短的队</span></span><br><span class="line">            &#125;</span><br><span class="line">            win[minWin].push(i);    <span class="comment">//入队</span></span><br><span class="line">            <span class="keyword">if</span>(win[minWin].empty())&#123;    <span class="comment">//每个窗口的第一个客户信息</span></span><br><span class="line">                nowTime[minSize] = <span class="number">0</span>;   <span class="comment">//当前窗口消耗时间为0</span></span><br><span class="line">                bgTime[i] = <span class="number">0</span>;  <span class="comment">//第一名客户的开始时间为0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123; <span class="comment">//遍历所有窗口全部出队</span></span><br><span class="line">            <span class="keyword">if</span>(!win[i].empty())&#123;</span><br><span class="line">                disposeAll(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(q--)&#123; <span class="comment">//获得查询</span></span><br><span class="line">            <span class="keyword">int</span> query;</span><br><span class="line">            <span class="keyword">int</span> endtime, begintime;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;query);</span><br><span class="line">            endtime = edTime[query];</span><br><span class="line">            begintime = bgTime[query];</span><br><span class="line">            <span class="comment">//获得查询用户的开始与结束时间</span></span><br><span class="line">            <span class="keyword">int</span> beginhours = <span class="number">8</span> + (begintime / <span class="number">60</span>);</span><br><span class="line">            <span class="keyword">int</span> beginminutes = begintime % <span class="number">60</span>;</span><br><span class="line">            <span class="keyword">int</span> endhours = <span class="number">8</span> + (endtime / <span class="number">60</span>);</span><br><span class="line">            <span class="keyword">int</span> endminutes = endtime % <span class="number">60</span>;</span><br><span class="line">            <span class="keyword">if</span>(beginhours &gt;= <span class="number">17</span>)&#123;   <span class="comment">//开始时间大于17输出Sorry</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"Sorry\n"</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%02d:%02d\n"</span>, endhours, endminutes);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2018/12/16/PTA-Advanced-Level-1013-Battle-Over-Cities/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/16/PTA-Advanced-Level-1013-Battle-Over-Cities/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1013 Battle Over Cities</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-16 20:34:57" itemprop="dateCreated datePublished" datetime="2018-12-16T20:34:57+08:00">2018-12-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　It is vitally important to have all the cities connected by highways in a war. If a city is occupied by the enemy, all the highways from/toward that city are closed. We must know immediately if we need to repair any other highways to keep the rest of the cities connected. Given the map of cities which have all the remaining highways marked, you are supposed to tell the number of highways need to be repaired, quickly.</p>
<p>For example, if we have 3 cities and 2 highways connecting city1-city2 and city1-city3. Then if city1 is occupied by the enemy, we must have 1 highway repaired, that is the highway city2-city3.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case starts with a line containing 3 numbers N (&lt;), Mand K, which are the total number of cities, the number of remaining highways, and the number of cities to be checked, respectively. Then M lines follow, each describes a highway by 2 integers, which are the numbers of the cities the highway connects. The cities are numbered from 1 to N. Finally there is a line containing K numbers, which represent the cities we concern.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each of the K cities, output in a line the number of highways need to be repaired if that city is lost.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 2 3</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">1 2 3</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">0</span><br><span class="line">0</span><br></pre></td></tr></table></figure>
<p>解题思路：</p>
<p>　　城市之间本来有一些道路，现在有某个城市被攻陷了，与该城市连通的道路就都不能走了，如果剩下还在我们手里的城市不连通，就要修筑新道路使他们连通，任意两个城市都可以修筑新道路。<br>　　本题每组数据首先给出城市数量n，道路数量m，查询数量k，每次查询只有一个城市被攻陷，之后给出m行数据为每条道路连接的两个城市，随后一行有k个数，表示当前次查询中被攻陷的城市，要求输出最少需要新修筑多少条道路才可以使我们手里剩下的城市都连通。</p>
<p>　　这里使用并查集解答本题。（本题需要路径压缩，否则会T）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getFather</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(x != father[x])</span><br><span class="line">        father[x] = getFather(father[x]);</span><br><span class="line">    <span class="keyword">return</span> father[x];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　首先使用邻接表记录所有道路信息，每次查询遍历所有道路，通过并查集合并所有不与被攻陷城市连接的道路两端的城市。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;    <span class="comment">//遍历所有道路</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">auto</span> it : G[i])&#123;</span><br><span class="line">                    <span class="keyword">if</span>(i != closed &amp;&amp; it != closed)&#123;    <span class="comment">//道路不能与被攻陷的城市相连</span></span><br><span class="line">                        <span class="keyword">int</span> fu = getFather(i);</span><br><span class="line">                        <span class="keyword">int</span> fv = getFather(it);</span><br><span class="line">                        <span class="keyword">if</span>(fu != fv)    <span class="comment">//如果两个城市不在同一个连通块中，合并这两个连通块</span></span><br><span class="line">                            father[fu] = fv;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>
<p> 之后对于还在我们手里的城市，获得合并后的连通块数量ans，ans - 1即可获得最少需要新修筑的道路数量。 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;    <span class="comment">//获得连通块数量</span></span><br><span class="line">    <span class="keyword">if</span>(getFather(i) == i &amp;&amp; i != closed)&#123;   <span class="comment">//只要某个城市所在连通块父节点为自己且这个城市不是被攻陷的城市</span></span><br><span class="line">        ans++;  <span class="comment">//连通块加一</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AC代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e3</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> father[maxn];   <span class="comment">//father[i]记录i所在连通块的父节点</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; G[maxn];    <span class="comment">//临界表记录边信息</span></span><br><span class="line"><span class="keyword">int</span> n, m, k;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getFather</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;   <span class="comment">//并查集路径压缩找爹函数</span></span><br><span class="line">    <span class="keyword">if</span>(x != father[x])</span><br><span class="line">        father[x] = getFather(father[x]);</span><br><span class="line">    <span class="keyword">return</span> father[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>, &amp;n, &amp;m, &amp;k) != EOF)&#123;  <span class="comment">//输入城市数量 道路数量 查询数量</span></span><br><span class="line">        <span class="keyword">while</span>(m--)&#123; <span class="comment">//输入道路信息</span></span><br><span class="line">            <span class="keyword">int</span> u, v;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;u, &amp;v);</span><br><span class="line">            <span class="comment">//G[i]记录与i城市连通的道路</span></span><br><span class="line">            G[u].push_back(v);</span><br><span class="line">            G[v].push_back(u);</span><br><span class="line">            <span class="comment">//道路是双向的，所以道路两端的城市都要记录这条道路</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> closed; <span class="comment">//closed记录当前被攻陷的城市</span></span><br><span class="line">        <span class="keyword">while</span>(k--)&#123; <span class="comment">//k条查询</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= n; i++)  <span class="comment">//初始化每个城市自己单独在一个连通块</span></span><br><span class="line">                father[i] = i;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;closed);   <span class="comment">//输入被攻陷的城市</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;    <span class="comment">//遍历所有道路</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">auto</span> it : G[i])&#123;</span><br><span class="line">                    <span class="keyword">if</span>(i != closed &amp;&amp; it != closed)&#123;    <span class="comment">//道路不能与被攻陷的城市相连</span></span><br><span class="line">                        <span class="keyword">int</span> fu = getFather(i);</span><br><span class="line">                        <span class="keyword">int</span> fv = getFather(it);</span><br><span class="line">                        <span class="keyword">if</span>(fu != fv)    <span class="comment">//如果两个城市不在同一个连通块中，合并这两个连通块</span></span><br><span class="line">                            father[fu] = fv;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;    <span class="comment">//获得连通块数量</span></span><br><span class="line">                <span class="keyword">if</span>(getFather(i) == i &amp;&amp; i != closed)&#123;   <span class="comment">//只要某个城市所在连通块父节点为自己且这个城市不是被攻陷的城市</span></span><br><span class="line">                    ans++;  <span class="comment">//连通块加一</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans - <span class="number">1</span>);    <span class="comment">//输出答案</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2018/12/15/PTA-Advanced-Level-1012-The-Best-Rank/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/15/PTA-Advanced-Level-1012-The-Best-Rank/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1012 The Best Rank</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-15 20:30:56" itemprop="dateCreated datePublished" datetime="2018-12-15T20:30:56+08:00">2018-12-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　To evaluate the performance of our first year CS majored students, we consider their grades of three courses only: <code>C</code> - C Programming Language, <code>M</code> - Mathematics (Calculus or Linear Algrbra), and <code>E</code> - English. At the mean time, we encourage students by emphasizing on their best ranks — that is, among the four ranks with respect to the three courses and the average grade, we print the best rank for each student.</p>
<p>　　For example, The grades of <code>C</code>, <code>M</code>, <code>E</code> and <code>A</code> - Average of 4 students are given as the following:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">StudentID  C  M  E  A</span><br><span class="line">310101     98 85 88 90</span><br><span class="line">310102     70 95 88 84</span><br><span class="line">310103     82 87 94 88</span><br><span class="line">310104     91 91 91 91</span><br></pre></td></tr></table></figure>
<p>　　Then the best ranks for all the students are No.1 since the 1st one has done the best in C Programming Language, while the 2nd one in Mathematics, the 3rd one in English, and the last one in average.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>　　Each input file contains one test case. Each case starts with a line containing 2 numbers N and M (≤), which are the total number of students, and the number of students who would check their ranks, respectively. Then N lines follow, each contains a student ID which is a string of 6 digits, followed by the three integer grades (in the range of [0, 100]) of that student in the order of <code>C</code>, <code>M</code> and <code>E</code>. Then there are M lines, each containing a student ID.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>　　For each of the M students, print in one line the best rank for him/her, and the symbol of the corresponding rank, separated by a space.</p>
<p>　　The priorities of the ranking methods are ordered as <code>A</code> &gt; <code>C</code> &gt; <code>M</code> &gt; <code>E</code>. Hence if there are two or more ways for a student to obtain the same best rank, output the one with the highest priority.</p>
<p>　　If a student is not on the grading list, simply output <code>N/A</code>.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">5 6</span><br><span class="line">310101 98 85 88</span><br><span class="line">310102 70 95 88</span><br><span class="line">310103 82 87 94</span><br><span class="line">310104 91 91 91</span><br><span class="line">310105 85 90 90</span><br><span class="line">310101</span><br><span class="line">310102</span><br><span class="line">310103</span><br><span class="line">310104</span><br><span class="line">310105</span><br><span class="line">999999</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1 C</span><br><span class="line">1 M</span><br><span class="line">1 E</span><br><span class="line">1 A</span><br><span class="line">3 A</span><br><span class="line">N&#x2F;A</span><br></pre></td></tr></table></figure>
<p>解题思路：<br>　　本题给出学生数量n，与查询数量m，之后n行为学生信息，包括id，C语言得分， 数学得分，英语得分，按照平均分、C语言、数学、英语分别排序（项目名分别为A, C, M, E），之后m行查询为学生id，要求输出查询学生的这四个排名中的最高排名，若出现某几项排名相同且都该学生最高排名，输出优先级平均分 &gt; C语言 &gt; 数学 &gt; 英语。</p>
<p>　　定义一个结构体student记录每个学生的信息</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> id; <span class="comment">//记录学号</span></span><br><span class="line">    <span class="keyword">int</span> score[<span class="number">4</span>];   <span class="comment">//score[0]为平均分 score[1]C语言 score[2]数学 score[3]英语 </span></span><br><span class="line">    <span class="comment">//为了方便输出直接按优先级顺序记录学生分数</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>　　用一个vector容器储存所有学生信息，一个int型的二维数组rank_stu[ i ][ j ]记录排名信息，i为学生排名， j为排名依照项，同样 0 为平均分 1 C语言 2 数学 3 英语 。之后对所有项目进行排名，将得到的排名记录入rank_stu中就可以开始查找了。</p>
<p>　　查找时要先判断输入的查询学号存不存在，可以将rank_stu初始化为0，如果查询当前学号某一排名为 0 证明该学号不存在，若存在，比较其所有项目排名并输出最高项排名与项目名。</p>
<p>　　AC代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> inf = INT_MAX;</span><br><span class="line"><span class="comment">//无穷大</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000000</span>;</span><br><span class="line"><span class="comment">//学号最大值</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">char</span> course[<span class="number">4</span>] = &#123;<span class="string">'A'</span>, <span class="string">'C'</span>, <span class="string">'M'</span>, <span class="string">'E'</span>&#125;;</span><br><span class="line"><span class="comment">//记录项目名</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> id; <span class="comment">//记录学号</span></span><br><span class="line">    <span class="keyword">int</span> score[<span class="number">4</span>];   <span class="comment">//score[0]为平均分 score[1]C语言 score[2]数学 score[3]英语</span></span><br><span class="line">    <span class="comment">//为了方便输出直接按优先级顺序记录学生分数</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;student&gt; stu;    <span class="comment">//记录学生信息</span></span><br><span class="line"><span class="keyword">int</span> rank_stu[maxn][<span class="number">4</span>];  <span class="comment">//记录排名</span></span><br><span class="line"><span class="keyword">int</span> courseNow;  <span class="comment">//当前正在排名的课程</span></span><br><span class="line"><span class="keyword">int</span> n, m;   <span class="comment">//学生数量，查询数量</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(student a, student b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a.score[courseNow] &gt; b.score[courseNow];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//排序依照当前courseNow的对应成绩</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">getRank</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(rank_stu, <span class="number">0</span>, <span class="keyword">sizeof</span>(rank_stu));</span><br><span class="line">    <span class="comment">//初始化rank_stu为0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)&#123; <span class="comment">//获得并记录四个项目的排名</span></span><br><span class="line">        courseNow = i;  <span class="comment">//设定当前排名课程</span></span><br><span class="line">        sort(stu.begin(), stu.end(), cmp);  <span class="comment">//对stu进行排序</span></span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;student&gt;::iterator preit = stu.begin();  <span class="comment">//preit记录获取排名过程中上一个位置迭代器</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">vector</span>&lt;student&gt;::iterator it = stu.begin(); it != stu.end(); it++)&#123;</span><br><span class="line">            cnt++;  <span class="comment">//记录当前学生位置</span></span><br><span class="line">            <span class="keyword">if</span>(it == stu.begin())&#123;  <span class="comment">//若it排名第一直接记录排名为cnt（cnt当前值为1）</span></span><br><span class="line">                rank_stu[it-&gt;id][courseNow] = cnt;</span><br><span class="line">                preit = it; <span class="comment">//记录下一个学生的前一个迭代器为it</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(preit-&gt;score[courseNow] == it-&gt;score[courseNow])&#123;</span><br><span class="line">                    <span class="comment">//前一个学生与本学生成绩相同则排名相同</span></span><br><span class="line">                    rank_stu[it-&gt;id][courseNow] = rank_stu[preit-&gt;id][courseNow];</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    rank_stu[it-&gt;id][courseNow] =  cnt;</span><br><span class="line">                    <span class="comment">//否则记录当前排名为cnt</span></span><br><span class="line">                &#125;</span><br><span class="line">                preit = it;<span class="comment">//记录下一个学生的前一个迭代器为it</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m) != EOF)&#123;    <span class="comment">//输入学生数量与排名数量</span></span><br><span class="line">        <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">            student temp;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>, &amp;temp.id, &amp;temp.score[<span class="number">1</span>], &amp;temp.score[<span class="number">2</span>], &amp;temp.score[<span class="number">3</span>]);</span><br><span class="line">            <span class="comment">//输入学生信息</span></span><br><span class="line">            temp.score[<span class="number">0</span>] = (temp.score[<span class="number">1</span>] + temp.score[<span class="number">2</span>] + temp.score[<span class="number">3</span>]) / <span class="number">3</span>;</span><br><span class="line">            <span class="comment">//计算平均分</span></span><br><span class="line">            stu.push_back(temp);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        getRank();</span><br><span class="line">        <span class="comment">//获取排名</span></span><br><span class="line">        <span class="keyword">while</span>(m--)&#123;</span><br><span class="line">            <span class="keyword">int</span> query;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;query);</span><br><span class="line">            <span class="comment">//输入查询id</span></span><br><span class="line">            <span class="keyword">if</span>(rank_stu[query][<span class="number">0</span>] == <span class="number">0</span>)&#123;    <span class="comment">//学生不存在</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"N/A\n"</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> hRank = inf;    <span class="comment">//初始化最高排名为无穷大</span></span><br><span class="line">            <span class="keyword">int</span> hRcourse = <span class="number">-1</span>;  <span class="comment">//hRcourse记录最高排名对应的项目</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++)&#123;</span><br><span class="line">                <span class="keyword">if</span>(rank_stu[query][i] &lt; hRank)&#123;</span><br><span class="line">                    hRank = rank_stu[query][i];</span><br><span class="line">                    hRcourse = i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d %c\n"</span>, hRank, course[hRcourse]);</span><br><span class="line">            <span class="comment">//输出排名与项目名</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2018/12/14/PTA-Advanced-Level-1010-Radix/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/14/PTA-Advanced-Level-1010-Radix/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1010 Radix</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-14 14:38:12" itemprop="dateCreated datePublished" datetime="2018-12-14T14:38:12+08:00">2018-12-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　Given a pair of positive integers, for example, 6 and 110, can this equation 6 = 110 be true? The answer is <code>yes</code>, if 6 is a decimal number and 110 is a binary number.</p>
<p>　　Now for any pair of positive integers N1 and N2, your task is to find the radix of one number while that of the other is given.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>　　Each input file contains one test case. Each case occupies a line which contains 4 positive integers:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">N1 N2 tag radix</span><br></pre></td></tr></table></figure>
<p>　　Here <code>N1</code> and <code>N2</code> each has no more than 10 digits. A digit is less than its radix and is chosen from the set { 0-9, <code>a</code>-<code>z</code> } where 0-9 represent the decimal numbers 0-9, and <code>a</code>-<code>z</code> represent the decimal numbers 10-35. The last number <code>radix</code> is the radix of <code>N1</code> if <code>tag</code> is 1, or of <code>N2</code> if <code>tag</code> is 2.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>　　For each test case, print in one line the radix of the other number so that the equation <code>N1</code> = <code>N2</code> is true. If the equation is impossible, print <code>Impossible</code>. If the solution is not unique, output the smallest possible radix.</p>
<h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input 1:"></a>Sample Input 1:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">6 110 1 10</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output 1:"></a>Sample Output 1:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Input-2"><a href="#Sample-Input-2" class="headerlink" title="Sample Input 2:"></a>Sample Input 2:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1 ab 1 2</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output-2"><a href="#Sample-Output-2" class="headerlink" title="Sample Output 2:"></a>Sample Output 2:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Impossible</span><br></pre></td></tr></table></figure>
<p>解题思路：<br>　　本题给出两个数字n1、n2，给出其中一个数字tag的进制radix，要求判断是否存在某一进制可以使另一个数字与给定数字相等。</p>
<p>　　为了方便运算，用字符串tn1、tn2记录输入的两个数字，字符串n1记录给定进制的数字，字符串n2记录未确定数字。用map<char, int> mp，记录每个字符所对应的数值，之后，可以先将给定进制的数字n1转化为10进制，n2的进制最小为其包含的最大数字+1记为leftn，且由于n2是整数，所以其进制最大不会超过n1的十进制与leftn中较大的一个+1，记为rightn。以leftn和rightn分别为左右边界二分所有进制，记mid为中点进制，将n2按mid进制转化为10进制与n1的十进制进行比较，如果n2较大证明mid取值过大，将rightn记为mid - 1；若小了，证明mid取值过小，leftn记为mid+1，若正好相等则找到答案。若无法找到某进制使得n1与n2相等，返回-1，如果返回的答案不为-1，输出答案，否则输出Impossible。</char,></p>
<p>　　AC代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">char</span>, LL&gt; mp;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">char</span> i = <span class="string">'0'</span>; i &lt;= <span class="string">'9'</span>; i++)&#123;</span><br><span class="line">        mp[i] = i - <span class="string">'0'</span>;    <span class="comment">//初始化0 - 9</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">char</span> i = <span class="string">'a'</span>; i &lt;= <span class="string">'z'</span>; i++)&#123;</span><br><span class="line">        mp[i] = i - <span class="string">'a'</span> + <span class="number">10</span>;   <span class="comment">//初始化a - z</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">toDecimal</span><span class="params">(<span class="built_in">string</span> a, LL radix, LL maxn)</span></span>&#123;  <span class="comment">//转化为10进制的函数，所转化后的数不会超过给出的maxn</span></span><br><span class="line">    <span class="keyword">int</span> len = a.size();</span><br><span class="line">    LL ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)&#123;</span><br><span class="line">        ans = ans * radix + mp[a[i]];</span><br><span class="line">        <span class="keyword">if</span>(ans &lt; <span class="number">0</span> || ans &gt; maxn)&#123;  <span class="comment">//如果数据溢出了或超过上限</span></span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;<span class="comment">//返回-1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;<span class="comment">//返回转化后的值</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">cmp</span><span class="params">(<span class="built_in">string</span> a, LL radix, LL n1)</span></span>&#123; <span class="comment">//比较函数，用于比较n2的radix进制转化为10进制后与n1的十进制的大小</span></span><br><span class="line">    LL n2_10 = toDecimal(a, radix, n1);</span><br><span class="line">    <span class="comment">//获得n2转化为10进制的值</span></span><br><span class="line">    <span class="keyword">if</span>(n2_10 == n1) <span class="comment">//如果n2的10进制与n1的十进制相同证明该进制是我们要获得的进制，返回0</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(n2_10 &lt; <span class="number">0</span>)  <span class="comment">//如果toDecimal函数返回的n2小于0，证明n2在该进制下转化为十进制后大于n1的十进制</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;   <span class="comment">//进制过大返回1</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(n1 &gt; n2_10) <span class="comment">//如果n2在当前进制下转化为10进制小于n1的十进制</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;  <span class="comment">//进制过小返回-1</span></span><br><span class="line">    <span class="keyword">else</span>    <span class="comment">//否则返回1</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">LL <span class="title">getRadix</span><span class="params">(<span class="built_in">string</span> a, LL leftn, LL rightn, LL n1)</span></span>&#123;</span><br><span class="line">    <span class="comment">//二分函数传入n2字符串，最小进制，最大进制，n1的十进制值</span></span><br><span class="line">    <span class="keyword">while</span>(leftn &lt;= rightn)&#123;</span><br><span class="line">        LL mid = (leftn + rightn) / <span class="number">2</span>;</span><br><span class="line">        <span class="comment">//获得中点</span></span><br><span class="line">        LL flag = cmp(a, mid, n1);</span><br><span class="line">        <span class="comment">//判断终点进制n1与n2状态</span></span><br><span class="line">        <span class="keyword">if</span>(flag == <span class="number">0</span>)   <span class="comment">//若比较函数返回了0，证明在mid进制下n1与n2相等</span></span><br><span class="line">            <span class="keyword">return</span> mid; <span class="comment">//返回mid</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(flag == <span class="number">-1</span>)&#123;    <span class="comment">//进制过小</span></span><br><span class="line">            leftn = mid + <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(flag == <span class="number">1</span>)&#123;    <span class="comment">//进制过大</span></span><br><span class="line">            rightn = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getMaxNum</span><span class="params">(<span class="built_in">string</span> a)</span></span>&#123;    <span class="comment">//获得n2中最大的数字</span></span><br><span class="line">    LL ans = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">string</span>::iterator it = a.begin(); it != a.end(); it++)&#123;</span><br><span class="line">        ans = max(ans, mp[*it]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    init(); <span class="comment">//初始化mp</span></span><br><span class="line">    <span class="built_in">string</span> tn1, tn2, n1, n2;</span><br><span class="line">    <span class="keyword">int</span> tag, radix;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; tn1 &gt;&gt; tn2 &gt;&gt; tag &gt;&gt; radix;</span><br><span class="line">    <span class="comment">//输入 tn1 tn2 tag radix;</span></span><br><span class="line">    <span class="keyword">if</span>(tag == <span class="number">1</span>)&#123;</span><br><span class="line">        n1 = tn1;</span><br><span class="line">        n2 = tn2;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        n1 = tn2;</span><br><span class="line">        n2 = tn1;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//n1记录已经确定进制的数字，n2记录未确定的数字</span></span><br><span class="line">    LL n1_10 = toDecimal(n1, radix, INT_MAX);</span><br><span class="line">    <span class="comment">//将n1转化为10进制其上限为无穷大</span></span><br><span class="line">    LL leftn = getMaxNum(n2) + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//获得n2的最小进制</span></span><br><span class="line">    LL rightn = max(leftn, n1_10) + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//获得n2的最大进制</span></span><br><span class="line">    LL ans = getRadix(n2, leftn, rightn, n1_10);</span><br><span class="line">    <span class="comment">//二分所有进制</span></span><br><span class="line">    <span class="keyword">if</span>(tn1 == tn2)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, radix);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(ans == <span class="number">-1</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Impossible\n"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2018/12/12/PTA-Advanced-Level-1009-Product-of-Polynomials/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/12/PTA-Advanced-Level-1009-Product-of-Polynomials/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1009 Product of Polynomials</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-12 19:22:10" itemprop="dateCreated datePublished" datetime="2018-12-12T19:22:10+08:00">2018-12-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>This time, you are supposed to find A×B where A and B are two polynomials.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case occupies 2 lines, and each line contains the information of a polynomial:</p>
<p>K N1 aN1 N2 aN2 … NK aNK</p>
<p>where K is the number of nonzero terms in the polynomial, Ni and aNi (i=1,2,⋯,K) are the exponents and coefficients, respectively. It is given that 1≤K≤10, 0≤NK&lt;⋯&lt;N2&lt;N1≤1000.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case you should output the product of A and B in one line, with the same format as the input. Notice that there must be NO extra space at the end of each line. Please be accurate up to 1 decimal place.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">2 1 2.4 0 3.2</span><br><span class="line">2 2 1.5 1 0.5</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 3 3.6 2 6.0 1 1.6</span><br></pre></td></tr></table></figure>
<p>解题思路：<br>　　本题考查多项式乘法，给出两行数组，分别为第一个多项式与第二个多项式的信息，每行第一个数n为当前多项式项数，之后给出n组数据每组包括一个整数为对应项的指数，一个浮点数为对应项的系数，要求输出两多项式相乘后的项数，以及以指数从大到小输出每项的指数与系数。</p>
<p>　　这里用了三个double型的数组ans、pol1、pol2以指数为下标记录多项式的系数，pol1、pol2记录给出多项式的系数，ans记录答案多项式的系数。遍历两个多项式的指数，将第一个多项式的每一项都与第二个多项式相乘将结果记录在ans数组中。</p>
<p>　　由小到大遍历ans数组获得系数非0项的数量，利用栈后进先出的特性，用两个栈记录答案数组所有系数非0项的指数与系数，之后输出获得的数量，与栈中的数据即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e4</span>;</span><br><span class="line"><span class="keyword">double</span> pol1[maxn];  <span class="comment">//记录第一个多项式</span></span><br><span class="line"><span class="keyword">double</span> pol2[maxn];  <span class="comment">//记录第二个多项式</span></span><br><span class="line"><span class="keyword">double</span> ans[maxn];   <span class="comment">//记录答案</span></span><br><span class="line"><span class="keyword">int</span> n1, n2; <span class="comment">//给出的两个多项式的项数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n1) != EOF)&#123; <span class="comment">//输入第一个多项式项数</span></span><br><span class="line">        fill(pol1, pol1 + maxn, <span class="number">0.0</span>);</span><br><span class="line">        fill(pol2, pol2 + maxn, <span class="number">0.0</span>);</span><br><span class="line">        fill(ans, ans + maxn, <span class="number">0.0</span>);</span><br><span class="line">        <span class="comment">//将三个数组都初始化为0</span></span><br><span class="line">        <span class="keyword">int</span> temp;   </span><br><span class="line">        <span class="keyword">double</span> num;</span><br><span class="line">        <span class="keyword">int</span> max1 = <span class="number">0</span>, max2 = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//记录第一个多项式与第二个多项式的最大指数</span></span><br><span class="line">        <span class="keyword">while</span>(n1--)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%lf"</span>, &amp;temp, &amp;num);    <span class="comment">//输入第一个多项式每一项的指数与系数</span></span><br><span class="line">            pol1[temp] = num;   <span class="comment">//以指数为下标记录系数</span></span><br><span class="line">            max1 = max(temp, max1); <span class="comment">//记录最大指数</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n2);   <span class="comment">//输入第二个多项式项数</span></span><br><span class="line">        <span class="keyword">while</span>(n2--)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%lf"</span>, &amp;temp, &amp;num);    <span class="comment">//输入第二个多项式每一项的指数与系数</span></span><br><span class="line">            pol2[temp] = num;   <span class="comment">//以指数为下标记录系数</span></span><br><span class="line">            max2 = max(max2, temp); <span class="comment">//记录最大指数</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= max1; i++)&#123; <span class="comment">//遍历第一个多项式的所有指数</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= max2; j++)&#123; <span class="comment">//遍历第二个多项式的所有指数</span></span><br><span class="line">                <span class="keyword">if</span>(pol1[i] != <span class="number">0</span> &amp;&amp; pol2[j] != <span class="number">0</span>)&#123;   <span class="comment">//当前相乘的项系数都不为0执行乘法运算</span></span><br><span class="line">                    ans[i + j] += pol1[i] * pol2[j];    <span class="comment">//指数相加系数相乘，结束后加入ans对应项</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> cnt = <span class="number">0</span>;    <span class="comment">//cnt记录答案项数</span></span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; p;   <span class="comment">//p记录指数</span></span><br><span class="line">        <span class="built_in">stack</span>&lt;<span class="keyword">double</span>&gt; d;    <span class="comment">//d记录系数</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= max1 + max2; i++)&#123;  <span class="comment">//答案中指数最大为给出的两多项式最大指数相乘</span></span><br><span class="line">            <span class="keyword">if</span>(ans[i] != <span class="number">0.0</span>)&#123;    <span class="comment">//对应项系数不为0</span></span><br><span class="line">                cnt++;  <span class="comment">//项数加一</span></span><br><span class="line">                p.push(i);  <span class="comment">//指数入栈</span></span><br><span class="line">                d.push(ans[i]); <span class="comment">//系数入栈</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d"</span>, cnt);  <span class="comment">//输出答案项数</span></span><br><span class="line">        <span class="keyword">while</span>(!p.empty())&#123;  <span class="comment">//指数由大到小输出每一项指数与系数</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">" %d %.1f"</span>, p.top(), d.top());</span><br><span class="line">            p.pop();</span><br><span class="line">            d.pop();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2018/12/08/HDOJ-1176-%E5%85%8D%E8%B4%B9%E9%A6%85%E9%A5%BC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/08/HDOJ-1176-%E5%85%8D%E8%B4%B9%E9%A6%85%E9%A5%BC/" class="post-title-link" itemprop="url">HDOJ 1176 免费馅饼</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-08 21:24:43" itemprop="dateCreated datePublished" datetime="2018-12-08T21:24:43+08:00">2018-12-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><meta name="referrer" content="no-referrer"><br>　　都说天上不会掉馅饼，但有一天gameboy正走在回家的小径上，忽然天上掉下大把大把的馅饼。说来gameboy的人品实在是太好了，这馅饼别处都不掉，就掉落在他身旁的10米范围内。馅饼如果掉在了地上当然就不能吃了，所以gameboy马上卸下身上的背包去接。但由于小径两侧都不能站人，所以他只能在小径上接。由于gameboy平时老呆在房间里玩游戏，虽然在游戏中是个身手敏捷的高手，但在现实中运动神经特别迟钝，每秒种只有在移动不超过一米的范围内接住坠落的馅饼。现在给这条小径如图标上坐标：<br><img src="https://vj.e949.cn/3d6e7172eea0b64638702b3468ac5ad2?v=1544089883" alt="img"><br>　　为了使问题简化，假设在接下来的一段时间里，馅饼都掉落在0-10这11个位置。开始时gameboy站在5这个位置，因此在第一秒，他只能接到4,5,6这三个位置中其中一个位置上的馅饼。问gameboy最多可能接到多少个馅饼？（假设他的背包可以容纳无穷多个馅饼） </p>
<p>Input</p>
<p>　　输入数据有多组。每组数据的第一行为以正整数n(0&lt;n&lt;100000)，表示有n个馅饼掉在这条小径上。在结下来的n行中，每行有两个整数x,T(0&lt;T&lt;100000),表示在第T秒有一个馅饼掉在x点上。同一秒钟在同一点上可能掉下多个馅饼。n=0时输入结束。<br>Output</p>
<p>　　每一组输入数据对应一行输出。输出一个整数m，表示gameboy最多可能接到m个馅饼。<br>提示：本题的输入数据量比较大，建议用scanf读入，用cin可能会超时。 </p>
<p>Sample Input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">5 1</span><br><span class="line">4 1</span><br><span class="line">6 1</span><br><span class="line">7 2</span><br><span class="line">7 2</span><br><span class="line">8 3</span><br><span class="line">0</span><br></pre></td></tr></table></figure>
<p>Sample Output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure>
<p>解题思路：<br>　　本题每组数据包括馅饼数量n之后n行给出每个馅饼的掉落时间与位置，有0-10共11个位置，起始在5位置，每次只能移动到周围两个位置，要求输出最大接到的馅饼数量。</p>
<p>　　本题类似数塔问题。</p>
<p>　　分析样例数据</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201812/1447131-20181208210111589-796906900.png" alt="img"></p>
<p>　　每个位置都可以抵达包括本身在内的3个位置我们用二维数组dp[ i ][ j ]表示如果第 i 秒在第 j 号位置，从开始到第 i 秒最多接到多少馅饼，与数塔问题一样都是找出一条路径，使路径上的权值和最大。</p>
<p>　　本着和数塔类似的拆解最低层的原则，该题形成的数塔的最底层为最后时间，样例中最后一个馅饼在第3秒落下，那么对于第三秒的某个位置j，如果第三秒gameboy刚好站在这个位置，那么其能接到的最大馅饼数量就是第三秒该位置掉落的馅饼数量加上其第二秒所在位置的最大获得馅饼数，而若在第三秒能抵达j位置，gameboy在第二秒一定是在j-1，j，j+1三个位置中的某一个，我们，只需要比较这三个位置的dp值并选择最大的一个即可获得第三秒j位置的dp值。</p>
<p>　　而求第二秒的三个位置的最馅饼数量又可以继续拆分为求第一秒所对应位置的最大馅饼数量，这样这个问题就可以被成功拆分了。</p>
<p>　　根据分析我们便可以写出动态转移方程dp[i][j] = max(max(dp[i - 1][j - 1], dp[i - 1][j]), dp[i - 1][j + 1]) + f[i][j]</p>
<p>　　AC代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span>+<span class="number">100</span>;</span><br><span class="line"><span class="keyword">int</span> dp[maxn][<span class="number">12</span>];   <span class="comment">//dp[i][j]表示如果第i秒在第j号位置，从开始到第i秒最多接到多少馅饼</span></span><br><span class="line"><span class="keyword">int</span> f[maxn][<span class="number">12</span>];    <span class="comment">//f[i][j]的值第i秒j号位置上落下的馅饼数量</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;  <span class="comment">//n为馅饼数量</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) != EOF &amp;&amp; n)&#123;</span><br><span class="line">        <span class="keyword">int</span> maxtime = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">memset</span>(dp, <span class="number">0</span>,<span class="keyword">sizeof</span>(dp));</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>,<span class="keyword">sizeof</span>(f));</span><br><span class="line">        <span class="comment">//每次运算dp与f初始化为0</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> time, x;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;x, &amp;time);   <span class="comment">//输入每个馅饼的掉落时间与位置</span></span><br><span class="line">            maxtime = max(maxtime, time);   <span class="comment">//记录最晚掉落的馅饼时间</span></span><br><span class="line">            f[time][x]++;   <span class="comment">//第time秒第x位置掉落的馅饼数量加一</span></span><br><span class="line">        &#125;</span><br><span class="line">        dp[<span class="number">1</span>][<span class="number">4</span>] = f[<span class="number">1</span>][<span class="number">4</span>]; <span class="comment">//由于第1秒接到4，5，6三个位置的其中一个位置的馅饼</span></span><br><span class="line">        dp[<span class="number">1</span>][<span class="number">5</span>] = f[<span class="number">1</span>][<span class="number">5</span>]; <span class="comment">//所以若第一秒在哪个位置，第一秒最多接到的馅饼数量就是那个位置第一秒掉落的馅饼数量</span></span><br><span class="line">        dp[<span class="number">1</span>][<span class="number">6</span>] = f[<span class="number">1</span>][<span class="number">6</span>];</span><br><span class="line">        <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= maxtime; i++)&#123;  <span class="comment">//遍历从第二秒到最后掉落馅饼的那一秒</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">11</span>; j++)&#123;</span><br><span class="line">                <span class="comment">//动态转移方程</span></span><br><span class="line">                dp[i][j] = max(max(dp[i - <span class="number">1</span>][j - <span class="number">1</span>], dp[i - <span class="number">1</span>][j]), dp[i - <span class="number">1</span>][j + <span class="number">1</span>]) + f[i][j];</span><br><span class="line">                <span class="comment">//记录最大值</span></span><br><span class="line">                ans = max(ans, dp[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2018/12/08/HDU-1074-Doing-Homework/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/08/HDU-1074-Doing-Homework/" class="post-title-link" itemprop="url">HDU 1074 Doing Homework</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-08 16:07:30" itemprop="dateCreated datePublished" datetime="2018-12-08T16:07:30+08:00">2018-12-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　Ignatius has just come back school from the 30th ACM/ICPC. Now he has a lot of homework to do. Every teacher gives him a deadline of handing in the homework. If Ignatius hands in the homework after the deadline, the teacher will reduce his score of the final test, 1 day for 1 point. And as you know, doing homework always takes a long time. So Ignatius wants you to help him to arrange the order of doing homework to minimize the reduced score.</p>
<p>Input</p>
<p>　　The input contains several test cases. The first line of the input is a single integer T which is the number of test cases. T test cases follow.<br>Each test case start with a positive integer N(1&lt;=N&lt;=15) which indicate the number of homework. Then N lines follow. Each line contains a string S(the subject’s name, each string will at most has 100 characters) and two integers D(the deadline of the subject), C(how many days will it take Ignatius to finish this subject’s homework). </p>
<p>　　Note: All the subject names are given in the alphabet increasing order. So you may process the problem much easier.<br>Output</p>
<p>　　For each test case, you should output the smallest total reduced score, then give out the order of the subjects, one subject in a line. If there are more than one orders, you should output the alphabet smallest one.<br>Sample Input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3</span><br><span class="line">Computer 3 3</span><br><span class="line">English 20 1</span><br><span class="line">Math 3 2</span><br><span class="line">3</span><br><span class="line">Computer 3 3</span><br><span class="line">English 6 3</span><br><span class="line">Math 6 3</span><br></pre></td></tr></table></figure>
<p>Sample Output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">Computer</span><br><span class="line">Math</span><br><span class="line">English</span><br><span class="line">3</span><br><span class="line">Computer</span><br><span class="line">English</span><br><span class="line">Math</span><br></pre></td></tr></table></figure>
<p>Hint</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In the second test case, both Computer-&gt;English-&gt;Math and Computer-&gt;Math-&gt;English leads to reduce 3 points, but the </span><br><span class="line">word &quot;English&quot; appears earlier than the word &quot;Math&quot;, so we choose the first order. That is so-called alphabet order.</span><br></pre></td></tr></table></figure>
<p>解题思路：<br>　　本题给出多组数据，每组数据给出一个整数t为测试数量，给出一个整数n代表项目数量，之后n行跟随每行给出一个项目信息，包括项目名name 最晚上交时间deadline 完成该项目需要的时间costDays。每个项目只要晚于deadline所规定的时间上交，每晚一天扣一分。对于每组测试要求输出最少的扣分数之后按提交顺序输出项目名。</p>
<p>　　本题限定了项目的数量n &lt;= 15。假设有A、B、C、D四个项目，每个项目有已上交和未上交两种状态，我们可以用一个四位二进制表示这四个项目的所有状态，例如0001表示A上交其他所有项目未上交，0011表示AB项目上交CD项目未上交，1111表示所有项目都上交，以此类推，若想n取到最大15，需要15位2进制数表示所有情况，表示15个项目全部提交的二进制数最大，为111111111111111，其所代表的10进制整数为32767，其大小远小于int上限，那么我们只需要令maxn = 1 &lt;&lt; 15 即32768 就可以表示本题中所有可能出现的状态，</p>
<p>　　既然所有状态都已经可以表示出来，现在就可以考虑一下如何获得状态，例如AB项目上交CD项目未上交的状态0011，可以由A上交其他都没上交的状态0001提交B（0010）获得，也可以由状态B上交其他都没上交的状态0010提交A（0001）获得，那么我们如果想要算出获得当前状态的最小扣分值，只需要遍历所有只需一次提交便可以得到当前状态的状态（以后称为前状态）找到前状态的扣分加上本次提交项目所需的扣分的最小值即可，这就是本题的解题思想——状态压缩dp。</p>
<p>　　状态压缩dp也是dp，这里用一个结构体subject型的数组Subject[16]储存所有项目信息subject中包括项目名，最晚提交日期与消耗时间；用一个结构体nodeInformation型的数组dp[maxn]保存每个状态的信息，nodeInformation包括现在状态已经使用的天数，现在状态的前状态，前状态到现在状态所需提交的项目，现在状态的最少扣分。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">subject</span>&#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;    <span class="comment">//项目名</span></span><br><span class="line">    <span class="keyword">int</span> deadline;   <span class="comment">//最后期限</span></span><br><span class="line">    <span class="keyword">int</span> costDays;   <span class="comment">//耗费时间</span></span><br><span class="line">&#125;Subject[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">nodeInformation</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> costNow;    <span class="comment">//现在状态做项目已经使用的天数</span></span><br><span class="line">    <span class="keyword">int</span> now;    <span class="comment">//前状态到现在状态所需提交的项目</span></span><br><span class="line">    <span class="keyword">int</span> pre;    <span class="comment">//现在状态的前状态</span></span><br><span class="line">    <span class="keyword">int</span> subScore;   <span class="comment">//现在状态的最少扣分</span></span><br><span class="line">&#125;dp[maxn];</span><br></pre></td></tr></table></figure>
<p> 　　之后遍历所有状态，开始时假设现在状态疯狂扣分扣无限分，之后遍历所有项目作为前项目到现在状态所提交的项目，每次遍历看看能不能减少现在状态的扣分，能的话就跟新dp数组信息。遍历结束后用一个栈后进先出的特性从所有项目都提交的状态向前寻找前状态并入栈。之后出栈输出项目名即可获得提交的顺序。 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> lastSubNow = endn;  <span class="comment">//全部提交状态</span></span><br><span class="line"><span class="keyword">while</span>(lastSubNow)&#123;  <span class="comment">//到全部未提交为止</span></span><br><span class="line">    subName.push(dp[lastSubNow].now);   <span class="comment">//入站前状态</span></span><br><span class="line">    lastSubNow = dp[lastSubNow].pre;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span>(!subName.empty())&#123;    <span class="comment">//输出提交顺序</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; Subject[subName.top()].name &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    subName.pop();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> AC代码 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1</span> &lt;&lt; <span class="number">15</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x7fffffff</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">subject</span>&#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;    <span class="comment">//项目名</span></span><br><span class="line">    <span class="keyword">int</span> deadline;   <span class="comment">//最后期限</span></span><br><span class="line">    <span class="keyword">int</span> costDays;   <span class="comment">//耗费时间</span></span><br><span class="line">&#125;Subject[maxn];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">nodeInformation</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> costNow;    <span class="comment">//现在状态做项目已经使用的天数</span></span><br><span class="line">    <span class="keyword">int</span> now;    <span class="comment">//前状态到现在状态所需提交的项目</span></span><br><span class="line">    <span class="keyword">int</span> pre;    <span class="comment">//现在状态的前状态</span></span><br><span class="line">    <span class="keyword">int</span> subScore;   <span class="comment">//现在状态的最少扣分</span></span><br><span class="line">&#125;dp[maxn];</span><br><span class="line"><span class="built_in">stack</span>&lt;<span class="keyword">int</span>&gt; subName; <span class="comment">//记录路径</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> t;  <span class="comment">//测试数量</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;t) != EOF)&#123;</span><br><span class="line">        <span class="keyword">while</span>(t--)&#123;</span><br><span class="line">            <span class="built_in">memset</span>(dp, <span class="number">0</span>, <span class="keyword">sizeof</span>(dp));</span><br><span class="line">            <span class="keyword">int</span> n;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);    <span class="comment">//输入项目数量</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123; <span class="comment">//输入每个项目</span></span><br><span class="line">                <span class="built_in">cin</span> &gt;&gt; Subject[i].name &gt;&gt; Subject[i].deadline &gt;&gt; Subject[i].costDays;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">int</span> endn = (<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>;  <span class="comment">//所有项目都提交</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= endn; i++)&#123;   <span class="comment">//i所对应的2进制数代表每一个项目的完成情况，即i对应的二进制就是当前状态</span></span><br><span class="line">                dp[i].subScore = inf;   <span class="comment">//初始化完成这种情况疯狂扣分减无限分</span></span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> j = n - <span class="number">1</span>; j &gt;= <span class="number">0</span>; j--)&#123;</span><br><span class="line">                    <span class="comment">//遍历所有项目，j为当前选择作为前状态提交项目的项目</span></span><br><span class="line">                    <span class="keyword">int</span> nowSubj = <span class="number">1</span> &lt;&lt; j;   <span class="comment">//nowSubj代表只提交下标为j的项目的状态</span></span><br><span class="line">                    <span class="keyword">if</span>(i &amp; nowSubj)&#123;    <span class="comment">//判断i情况中下标为j的项目是否提交</span></span><br><span class="line">                        <span class="comment">//若已经提交进行如下操作</span></span><br><span class="line">                        <span class="keyword">int</span> past = i - nowSubj;<span class="comment">//把i状态的中代表j号项目的状态改为没有提交，就可以获得i状态提交j的前状态past</span></span><br><span class="line">                        <span class="keyword">int</span> subScorej;</span><br><span class="line">                        <span class="comment">//subScorej代表past状态提交j号项目的扣分</span></span><br><span class="line">                        <span class="comment">//它就等于past状态已经消耗的天数加上j项目需要消耗的天数减去j号项目的要求的最晚提交日期。</span></span><br><span class="line">                        subScorej = dp[past].costNow + Subject[j].costDays - Subject[j].deadline;</span><br><span class="line">                        <span class="keyword">if</span>(subScorej &lt; <span class="number">0</span>)&#123;  <span class="comment">//扣分不可能小于0，如果小于0就证明时间充足，扣分为0</span></span><br><span class="line">                            subScorej = <span class="number">0</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span>(subScorej + dp[past].subScore &lt; dp[i].subScore)&#123; <span class="comment">//如果从past状态到现在状态可以使i状态当前的扣分减小</span></span><br><span class="line">                            dp[i].subScore = subScorej + dp[past].subScore;</span><br><span class="line">                            <span class="comment">//更新i状态的扣分</span></span><br><span class="line">                            dp[i].costNow = dp[past].costNow + Subject[j].costDays;</span><br><span class="line">                            <span class="comment">//记录以past为前状态的i状态消耗的天数</span></span><br><span class="line">                            dp[i].now = j;</span><br><span class="line">                            <span class="comment">//前状态past到现在状态i并使其扣分最少所提交的项目为j项目</span></span><br><span class="line">                            dp[i].pre = past;</span><br><span class="line">                            <span class="comment">//记录i的前状态为past</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dp[endn].subScore);</span><br><span class="line">            <span class="comment">//输出提交全部项目的最少扣分（所有的项目都提交状态最少扣分）</span></span><br><span class="line">            <span class="keyword">int</span> lastSubNow = endn;  <span class="comment">//全部提交状态</span></span><br><span class="line">            <span class="keyword">while</span>(lastSubNow)&#123;  <span class="comment">//到全部未提交为止</span></span><br><span class="line">                subName.push(dp[lastSubNow].now);   <span class="comment">//入站前状态</span></span><br><span class="line">                lastSubNow = dp[lastSubNow].pre;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span>(!subName.empty())&#123;    <span class="comment">//输出提交顺序</span></span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; Subject[subName.top()].name &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">                subName.pop();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2018/12/07/HDU-1029-Ignatius-and-the-Princess-IV/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2018/12/07/HDU-1029-Ignatius-and-the-Princess-IV/" class="post-title-link" itemprop="url">HDU 1029 Ignatius and the Princess IV</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-07 15:18:04" itemprop="dateCreated datePublished" datetime="2018-12-07T15:18:04+08:00">2018-12-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　“OK, you are not too bad, em… But you can never pass the next test.” feng5166 says. </p>
<p>　　“I will tell you an odd number N, and then N integers. There will be a special integer among them, you have to tell me which integer is the special one after I tell you all the integers.” feng5166 says. </p>
<p>　　“But what is the characteristic of the special integer?” Ignatius asks. </p>
<p>　　“The integer will appear at least (N+1)/2 times. If you can’t find the right integer, I will kill the Princess, and you will be my dinner, too. Hahahaha…..” feng5166 says. </p>
<p>　　Can you find the special integer for Ignatius? </p>
<p>Input</p>
<p>　　The input contains several test cases. Each test case contains two lines. The first line consists of an odd integer N(1&lt;=N&lt;=999999) which indicate the number of the integers feng5166 will tell our hero. The second line contains the N integers. The input is terminated by the end of file.<br>Output</p>
<p>　　For each test case, you have to output only one line which contains the special number you have found.<br>Sample Input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">1 3 2 3 3</span><br><span class="line">11</span><br><span class="line">1 1 1 1 1 5 5 5 5 5 5</span><br><span class="line">7</span><br><span class="line">1 1 1 1 1 1 1</span><br></pre></td></tr></table></figure>
<p>Sample Output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">5</span><br><span class="line">1</span><br></pre></td></tr></table></figure>
<p>解题思路：<br>　　本题给出多组数据每组数据给出一个数n，下一行给出n个数，要求找出出现次数超过一半的数字。</p>
<p>试想一个数的数量超过总数的一半其出现次数一定是所有的数中出现最多的那个数，我们就可以在输入时用一个ans记录当前出现次数最多的数，cnt记录ans比其他数的出现次数多多少。每当cnt等于0时便说明在当前输入已经输入完的数中ans所代表的数出现的次数不足一半，则cnt重新记录一个数，输入结束后获得的ans即为所取数。</p>
<p>　　AC代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n) != EOF)&#123;</span><br><span class="line">        <span class="keyword">int</span> ans, cnt = <span class="number">0</span>, temp;</span><br><span class="line">        <span class="comment">//ans记录当前出现次数最多的数，cnt记录ans比其他数的出现次数多多少</span></span><br><span class="line">        <span class="comment">//temp记录当前输入的数</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;temp);</span><br><span class="line">            <span class="keyword">if</span>(cnt == <span class="number">0</span>)&#123;<span class="comment">//cnt等于0重新记录一个数</span></span><br><span class="line">                ans = temp;</span><br><span class="line">                cnt++;</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(ans == temp)&#123;</span><br><span class="line">                cnt++;  <span class="comment">//输入的数等于ans cnt++</span></span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                cnt--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);    <span class="comment">//输出答案</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/10/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/12/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SUVVM"
      src="/images/ortrait.jpg">
  <p class="site-author-name" itemprop="name">SUVVM</p>
  <div class="site-description" itemprop="description">SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">152</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">85</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/suvvm" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;suvvm" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/suvvm@foxmail.com" title="E-Mail → suvvm@foxmail.com"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SUVVM</span>
	<a href="http://www.beian.miit.gov.cn/"  style="color:#f72b07" target="_blank">鲁ICP备19040043号-2</a>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  

  

</body>
</html>
