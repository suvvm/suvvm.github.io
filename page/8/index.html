<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/ortrait.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/ortrait.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/ortrait.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.suvvm.work","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
<meta property="og:type" content="website">
<meta property="og:title" content="SUVVM">
<meta property="og:url" content="https://www.suvvm.work/page/8/index.html">
<meta property="og:site_name" content="SUVVM">
<meta property="og:description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="SUVVM">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://www.suvvm.work/page/8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>SUVVM</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e5190116d64be66cac29daef18c94ac0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">SUVVM</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">呜嗷SUVVM</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="calendar fa-fw"></i>日程表</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/17/Qt5-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/17/Qt5-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">Qt5--从零开始的学生管理系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-17 14:44:58" itemprop="dateCreated datePublished" datetime="2019-04-17T14:44:58+08:00">2019-04-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/" itemprop="url" rel="index"><span itemprop="name">项目实践</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><meta name="referrer" content="no-referrer"></p>
<h2 id="一、项目设计"><a href="#一、项目设计" class="headerlink" title="一、项目设计"></a>一、项目设计</h2><h3 id="1、需求分析"><a href="#1、需求分析" class="headerlink" title="　　1、需求分析"></a>　　1、需求分析</h3><p>　　记录并处理学生成绩信息。</p>
<p>　　1）添加新的学生数据；</p>
<p>　　2）根据学号对已有的学生数据进行修改；</p>
<p>　　3）根据学号删除已存在的学生信息；</p>
<p>　　4）根据学号查询学生信息；</p>
<p>　　5）根据各门成绩与平均成绩进行排序。</p>
<h3 id="2、窗口设计"><a href="#2、窗口设计" class="headerlink" title="　　2、窗口设计"></a>　　2、窗口设计</h3><p>　　1）菜单窗口；</p>
<p>　　2）添加学生窗口；</p>
<p>　　3）修改信息窗口（包括删除信息）；</p>
<p>　　4）查询学生窗口</p>
<p>　　5）排序窗口；</p>
<h3 id="3、数据结构设计"><a href="#3、数据结构设计" class="headerlink" title="　　3、数据结构设计"></a>　　3、数据结构设计</h3><p>　　以一个类StudentInfo储存单个学生信息，学生类中包括：</p>
<p>　　姓名（字符串）</p>
<p>　　学号（整型）</p>
<p>　　数学成绩（整型）</p>
<p>　　英语成绩（整型）</p>
<p>　　C语言程序设计成绩（整型）</p>
<p>　　平均成绩（双浮点数）</p>
<h2 id="二、项目制作"><a href="#二、项目制作" class="headerlink" title="二、项目制作"></a>二、项目制作</h2><h3 id="1、建立项目"><a href="#1、建立项目" class="headerlink" title="1、建立项目"></a>1、建立项目</h3><p>　　打开Qt Creator 文件-&gt;新建文件或项目（Ctrl+N）-&gt;其他项目-&gt;空的Qt项目（Empty qmacke Project）</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135537743-346606840.png" alt="img"></p>
<h3 id="2、添加窗口"><a href="#2、添加窗口" class="headerlink" title="2、添加窗口"></a>2、添加窗口</h3><p>　　将其命名为StudentManagementSystem_Qt一路下一步到结束。</p>
<p>　　右击项目名称-&gt;Add New-&gt;Qt -&gt; Qt设计师界面模板选择Widget下一步，我们当前建立的是菜单窗口，所以将其类名命名为MenuWidget一路下一步到结束。</p>
<p>　　以同样的方式建立添加学生窗口：AddStudentWidget、修改信息窗口：ModifyWidget、查询窗口：SelectWidget、排序窗口：SortWidget。</p>
<p>　　完成后的项目资源管理器页面中应该有如下文件</p>
<p>　　 <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135642056-2079261753.png" alt="img"></p>
<p>　　我们可以看到Qt中建立模板为widget的设计师界面就是建立了一个c++类（继承自QWidget）与其对应的ui文件 ，这个ui文件便是Qt Designer设计文件，它会在编译时生成一个ui_*.h文件，这样我们便可以用c++的方式对其进行调用。</p>
<p>　　Qt Designer的详细使用方法可以看官方的手册：<a href="https://doc.qt.io/archives/qt-4.8/designer-manual.html" target="_blank" rel="noopener">https://doc.qt.io/archives/qt-4.8/designer-manual.html</a></p>
<p>　　之后打开我们的menuwidget.h，会发现其中存在错误。</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135819172-1344535597.png" alt="img"></p>
<p>　　这是因为我们的项目中没有连接Qt Widgets库，在StudentManagementSystem_Qt.pro中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QT +&#x3D; widgets</span><br></pre></td></tr></table></figure>
<p>可解决问题。</p>
<h3 id="3、实现窗口之间的切换"><a href="#3、实现窗口之间的切换" class="headerlink" title="　　3、实现窗口之间的切换"></a>　　3、实现窗口之间的切换</h3><p>　　现在，就是实现我们新建立的几个窗口之间的窗口切换问题的时候了，这里我打算使用QStackedLayout实现窗口切换。</p>
<p>　　QStackedLayout继承自QLayout，提供了多页面切换的布局，一次只能看到一个界面，在我的Qt5——从零开始的Hello World教程(Qt Creator) 中提到过，大部分控件都继承自QFrame，而QFrame又继承自QWidget，所以QStackedLayout完全可以实现窗口之间的切换。</p>
<p>　　现在我们用与上一步相同的方法建立一个窗口MainWidget。并添加一个main.cpp来写main函数</p>
<p>　　 <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135901363-1389249971.png" alt="img"></p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135912811-1823331648.png" alt="img"></p>
<p>　　在mainwidget.h中修改MainWidget的定义，为其添加成员</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MenuWidget *menuwidget;        &#x2F;&#x2F;菜单窗口</span><br><span class="line">AddStudentWidget *addstudentwidget;   &#x2F;&#x2F;添加学生窗口</span><br><span class="line">SelectWidget *selectwidget;    &#x2F;&#x2F;查询窗口</span><br><span class="line">ModifyWidget *modifywidget;    &#x2F;&#x2F;修改窗口</span><br><span class="line">SortWidget *sortwidget;        &#x2F;&#x2F;排序窗口</span><br><span class="line">QStackedLayout *stackLayout;   &#x2F;&#x2F;QStackedLayout布局</span><br></pre></td></tr></table></figure>
<p>​    当然，也需要引用其对应的头文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;QStackedLayout&gt;</span><br><span class="line">#include &quot;menuwidget.h&quot;</span><br><span class="line">#include &quot;addstudentwidget.h&quot;</span><br><span class="line">#include &quot;selectwidget.h&quot;</span><br><span class="line">#include &quot;modifywidget.h&quot;</span><br><span class="line">#include &quot;sortwidget.h&quot;</span><br></pre></td></tr></table></figure>
<p>​    在MainWidget.cpp中将MainWidget设为stackLayout布局，声明我们需要的窗口，并将其加入stackLayout布局中去。</p>
<p>​    在MainWidget.cpp中显示调用MainWidget构造函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MainWidget::MainWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(new Ui::MainWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　处添加。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">menuwidget = <span class="keyword">new</span> MenuWidget;</span><br><span class="line">addstudentwidget = <span class="keyword">new</span> AddStudentWidget;</span><br><span class="line">selectwidget = <span class="keyword">new</span> SelectWidget;</span><br><span class="line">modifywidget = <span class="keyword">new</span> ModifyWidget;</span><br><span class="line">sortwidget = <span class="keyword">new</span> SortWidget;</span><br><span class="line">stackLayout = <span class="keyword">new</span> QStackedLayout;</span><br><span class="line"></span><br><span class="line">stackLayout-&gt;addWidget(menuwidget);</span><br><span class="line">stackLayout-&gt;addWidget(addstudentwidget);</span><br><span class="line">stackLayout-&gt;addWidget(selectwidget);</span><br><span class="line">stackLayout-&gt;addWidget(modifywidget);</span><br><span class="line">stackLayout-&gt;addWidget(sortwidget);</span><br><span class="line"></span><br><span class="line">setLayout(stackLayout);</span><br></pre></td></tr></table></figure>
<p>  之后就需要使用Qt designer 设计页面了（当然在对应类中手动添加成员控件也没有任何问题）。</p>
<p>​    双击mainwidget.ui就打开了设计页面</p>
<p>​    在menuwidget中添加如下按钮（push button）</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417140255883-1145969539.png" alt="img"></p>
<p>　　以同样的方法在addstudentwidget,selectwidget,modifywidget,sortwidget中都添加一个返回按钮returnButton。</p>
<p>　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417140423744-971443667.png" alt="img"></p>
<p>　　为这些按钮设计点击槽函数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">menuwidget.h:</span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_addButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_selectButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_modifyButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_sortButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_exitButton_clicked</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<p> 还需要一个方法作为stackLayout切换页面的信号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">signals:</span><br><span class="line">    void display(int number);</span><br></pre></td></tr></table></figure>
<p>  在menuwidget.cpp中给出函数定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> MenuWidget::on_addButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_selectButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_modifyButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_sortButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_exitButton_clicked()&#123;</span><br><span class="line">    QApplication::<span class="built_in">exit</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>emit 把connect把信号和槽进行关联，emit某个信号，就相当于调用这个信号connect时所关联的槽函数。至于更多关于 emit信息诸位可以搜索或者看帮助文档。</p>
<p>之后为addstudentwidget,selectwidget,modifywidget,sortwidget窗口中的按钮设计信号与槽函数</p>
<p>在（类名）.h中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">signals:</span><br><span class="line">    void display(int number);</span><br><span class="line">private slots:</span><br><span class="line">    void on_returnButton_clicked();</span><br></pre></td></tr></table></figure>
<p>在（类名）.cpp中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void （类名）::on_returnButton_clicked()&#123;</span><br><span class="line">    emit display(0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　现在可以使用的只有退出按钮，跳转按钮还需要在mainwidget.cpp中用connect函数连接。</p>
<p>　　到此为止便完成了页面切换功能。</p>
<p>　　到次为止的源码：</p>
<p>​       <a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt</a></p>
<h3 id="4、完善窗口设计"><a href="#4、完善窗口设计" class="headerlink" title="　　4、完善窗口设计"></a>　　4、完善窗口设计</h3><h4 id="1：AddStudentWidget"><a href="#1：AddStudentWidget" class="headerlink" title="1：AddStudentWidget"></a>1：AddStudentWidget</h4><p>​    我们需要提示标签来指明输入的数据，也需要输入框来接收用户的输入，QLabel与QLineEdit可以满足我们的要求。</p>
<p>　　QLabel，QLineEdit有方法setText(“内容”)来改变其显示的文字，有方法setGeometry (起始横坐标，起始纵坐标，宽， 高)来设置左上角起始位置与大小。</p>
<p>　　当然这些都可以在Qt Designer中直接设置。打开addstudentwidget.ui。</p>
<p>　　根据之前设计的数据结构，需要nameLineEdit、idLineEdit、mathLineEdit、enLineEdit、cLineEdit五个QLineEdit接收学生的姓名、学号、数学成绩、英语成绩、C语言成绩（平均成绩由计算得出），需要nameLabel、idLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户输入数据，需要addButton 一个QPushButton来添加学生。</p>
<p>　　最终将addstudentwidget页面设计为。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141128411-873116665.png" alt="img"></p>
<h4 id="2：modifyWidget"><a href="#2：modifyWidget" class="headerlink" title="　　2：modifyWidget"></a>　　2：modifyWidget</h4><p>　　我们需要nameLineEdit、idLineEdit、mathLineEdit、enLineEdit、cLineEdit五个QLineEdit接收学生的姓名、学号、数学成绩、英语成绩、C语言成绩（平均成绩由计算得出），需要nameLabel、idLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户输入数据，需要deleteButton、modifyButton 两个QPushButton来根据学号删除学生，和根据学号修改学生信息。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141145625-303859315.png" alt="img"></p>
<h4 id="3：selectwidget"><a href="#3：selectwidget" class="headerlink" title="　　3：selectwidget"></a>　　3：selectwidget</h4><p>　　我们需要idLabel一个QLabel提醒用户输入数据，需要idLineEdit一个QLineEdit接收学生的学号，之后需要nameLabel、avgLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户显示的数据，需要showNameLabel、showMathLabel、showEnLabel、showCLabel、showAvgLabel五个QLabel来接收查询到的数据，需要selectButton一个QPushButton来提交查询。 </p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141209265-1987825417.png" alt="img"></p>
<h4 id="4：sortwidget"><a href="#4：sortwidget" class="headerlink" title="　　4：sortwidget"></a>　　4：sortwidget</h4><p>　　QRadioButton单选框可以解决我们的排序根据选择问题</p>
<p>　　（当然，许多方法都可以，这里只演示QRadioButton）</p>
<p>　　QTableWidget表格可以用来显示排序后的信息。</p>
<p>　　我们需要mathRadioButton、enRadioButton、cRadioButton、avgRadioButton四个QRadioButton来选择排序的根据，需要sortButton一个QPushButton来提交排序，需要tableWidget一个 QTableWidget来显示排序结果。</p>
<p> 　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141240402-1168770826.png" alt="img"></p>
<p>到此为止的源码：</p>
<p><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_1(uiOnly" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_1(uiOnly</a>)</p>
<h3 id="5、完成学生类的设计"><a href="#5、完成学生类的设计" class="headerlink" title="　　5、完成学生类的设计"></a>　　5、完成学生类的设计</h3><p>​    之前在数据结构设计中我们已经设计好了，以一个类StudentInfo储存单个学生信息，学生类中包括：</p>
<p>  姓名（字符串）</p>
<p>  学号（整型）</p>
<p>  数学成绩（整型）</p>
<p>  英语成绩（整型）</p>
<p>  C语言程序设计成绩（整型）</p>
<p>  平均成绩（双浮点数）</p>
<p>现在着手去实现它</p>
<p>​    右击项目Add New选择C++ C++Class 为它起名叫StudentInfo之后下一步到完成，在studentinfo.h中为其创建对应的私有变量，及其对应的get与set函数。</p>
<h4 id="studentinfo-h"><a href="#studentinfo-h" class="headerlink" title="　　studentinfo.h"></a>　　studentinfo.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentInfo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QString name;</span><br><span class="line">    <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">    <span class="keyword">double</span> avg;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    StudentInfo();</span><br><span class="line">    StudentInfo(QString tname, <span class="keyword">int</span> tid, <span class="keyword">int</span> tmath, <span class="keyword">int</span> tenglish, <span class="keyword">int</span> tlanguageC)&#123;</span><br><span class="line">        name = tname;</span><br><span class="line">        id = tid;</span><br><span class="line">        math = tmath;</span><br><span class="line">        english = tenglish;</span><br><span class="line">        languageC = tlanguageC;</span><br><span class="line">        avg = (tmath + tenglish + tlanguageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QString <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMath</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> math;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getEnglish</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> english;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getLanguageC</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> languageC;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">getAvg</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avg;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> tid)</span></span>&#123;</span><br><span class="line">        id = tid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setName</span><span class="params">(QString tname)</span></span>&#123;</span><br><span class="line">        name = tname;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setMath</span><span class="params">(<span class="keyword">int</span> tmath)</span></span>&#123;</span><br><span class="line">        math = tmath;</span><br><span class="line">        avg = (math + english + languageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setEnglish</span><span class="params">(<span class="keyword">int</span> tenglish)</span></span>&#123;</span><br><span class="line">        english = tenglish;</span><br><span class="line">        avg = (math + english + languageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setLanguageC</span><span class="params">(<span class="keyword">int</span> tlanguageC)</span></span>&#123;</span><br><span class="line">        languageC = tlanguageC;</span><br><span class="line">        avg = (math + english + languageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="6、完善添加学生信息"><a href="#6、完善添加学生信息" class="headerlink" title="　　6、完善添加学生信息"></a>　　6、完善添加学生信息</h3><p>​    打开addstudentwidget.h为”添加”按钮设计点击槽函数，由于我们设计用文件对学生信息进行储存，所以需要引用QFile，这里我使用对话框来提示用户操作中的各种问题，所以需要引入QMessageBox。</p>
<p>　　QMessageBox中有很多类型的对话框，各对话框的用法这里就不详细介绍了，这里我们只介绍我们即将用到的QMessageBox::about</p>
<p>　　QMessageBox::about(NULL, “About”, “About this application”);</p>
<p>　　其中三个参数分别对应，父窗口对象， 对话框标题， 对话框内容。</p>
<p>　　在addstudentwidget.cpp中给出函数定义：</p>
<p>　　在lineEdit中取出用户输入的数据，lineEdit拥有text()方法，会返回一个QString，而QString中又拥有入toInt() toDouble()等各种类型转换函数，可以适应我们的大多数要求。</p>
<p>　　打开数据文件将我们刚刚获取的数据追加在文件结尾。</p>
<h4 id="addstudentwidget-h"><a href="#addstudentwidget-h" class="headerlink" title="　　addstudentwidget.h"></a>　　addstudentwidget.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ADDSTUDENTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ADDSTUDENTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">AddStudentWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddStudentWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">AddStudentWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~AddStudentWidget();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::AddStudentWidget *ui;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_addButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// ADDSTUDENTWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="addstudentwidget-cpp"><a href="#addstudentwidget-cpp" class="headerlink" title="　　addstudentwidget.cpp"></a>　　addstudentwidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"addstudentwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_addstudentwidget.h"</span></span></span><br><span class="line">AddStudentWidget::AddStudentWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::AddStudentWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">AddStudentWidget::~AddStudentWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> AddStudentWidget::on_returnButton_clicked()&#123;   <span class="comment">//"主菜单"按钮点击</span></span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> AddStudentWidget::on_addButton_clicked()&#123;  <span class="comment">//"添加"按钮点击</span></span><br><span class="line">    QString name = ui-&gt;nameLineEdit-&gt;text();</span><br><span class="line">    <span class="comment">//将用户输入的姓名由nameLineEdit取出</span></span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由idLineEdit取出，并转换为整型</span></span><br><span class="line">    <span class="keyword">int</span> math = ui-&gt;mathLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由mathLineEdit取出，并转换为整型</span></span><br><span class="line">    <span class="keyword">int</span> english = ui-&gt;enLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由enLineEdit取出，并转化为整型</span></span><br><span class="line">    <span class="keyword">int</span> languageC = ui-&gt;cLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由cLineEdit取出，并转化为整型</span></span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;nameLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;mathLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;enLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;cLineEdit-&gt;text() == <span class="string">""</span>)&#123;</span><br><span class="line">        <span class="comment">//插入的五项数据都不能为空，否则在读取文件时会出现问题。</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"存在空项"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    <span class="comment">//实例化一个QFile file为我们的数据文件student.txt</span></span><br><span class="line">    file.open(QIODevice::WriteOnly|QIODevice::Text|QIODevice::Append);</span><br><span class="line">    <span class="comment">//open()可以用来打开文件这里QIODevice::WriteOnly代表将文件以只写的方式打开</span></span><br><span class="line">    <span class="comment">//QIODevice::Text代表我们打开的是文本文件，QIODevice::Text会对end-of-line结束符进行转译</span></span><br><span class="line">    <span class="comment">//QIODevice::Append以追加的方式打开，新增加的内容将被追加到文件末尾</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QTextStream <span class="title">out</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//QTextStream可以进行一些基本的文本读写，比如QString int char之类的数据QDataStream可以进行一个如QMap QPoint之类数据的读写。</span></span><br><span class="line">    out &lt;&lt; name &lt;&lt; <span class="string">" "</span> &lt;&lt;  id &lt;&lt; <span class="string">" "</span> &lt;&lt; math &lt;&lt; <span class="string">" "</span> &lt;&lt; english &lt;&lt; <span class="string">" "</span> &lt;&lt; languageC;</span><br><span class="line">    <span class="comment">//将我们刚刚获取的数据写入文件</span></span><br><span class="line">    file.close();</span><br><span class="line">    QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"插入成功"</span>);</span><br><span class="line">    ui-&gt;nameLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;mathLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;enLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;cLineEdit-&gt;clear();</span><br><span class="line">    <span class="comment">//将用户输入的数据清空</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行一下</p>
<p> <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142628997-69777435.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142640980-133161709.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142717069-1580996710.png" alt="img"></p>
<p>　　显示插入成功，打开项目文件夹所在目录build-StudentManagementSystem开头的文件夹，我们的数据文件student就会出现在此处</p>
<p> <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142740686-400229227.png" alt="img"></p>
<p>打开看一看</p>
<p> <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142801933-2073656640.png" alt="img"></p>
<p>这样，我们的添加信息模块就完成了。</p>
<p>以上源代码：</p>
<p><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_2(add" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_2(add</a>)</p>
<h3 id="7、完善修改信息"><a href="#7、完善修改信息" class="headerlink" title="　　7、完善修改信息"></a>　　7、完善修改信息</h3><p>　　打开modifywidget.h为”删除”与”修改”按钮设计点击槽函数,在modifywidget.cpp中给出函数定义。</p>
<p>　　对于删除和修改操作这里我打算以文件中的数据建立一个数据类型为StudentInfo的QVector容器，容器中盛放全体学生信息。对容器进行删改操作，最后以容器内的数据覆盖原有的数据即可。</p>
<h4 id="modifywidget-h"><a href="#modifywidget-h" class="headerlink" title="　　modifywidget.h"></a>　　modifywidget.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MODIFYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MODIFYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"studentinfo.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ModifyWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModifyWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">ModifyWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~ModifyWidget();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::ModifyWidget *ui;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>; <span class="comment">//点击主菜单按钮</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_deleteButton_clicked</span><span class="params">()</span></span>; <span class="comment">//点击删除按钮</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_modifyButton_clicked</span><span class="params">()</span></span>; <span class="comment">//点击修改按钮</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// MODIFYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="modifywidget-cpp"><a href="#modifywidget-cpp" class="headerlink" title="　　modifywidget.cpp"></a>　　modifywidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"modifywidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_modifywidget.h"</span></span></span><br><span class="line"></span><br><span class="line">ModifyWidget::ModifyWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::ModifyWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ModifyWidget::~ModifyWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> ModifyWidget::on_returnButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> ModifyWidget::on_deleteButton_clicked()&#123;</span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span>)&#123;   <span class="comment">//如果id输入栏为空则输出错误提示并返回</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不得为空!"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读 的方式打开文本文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//QIODevice::Truncate在写入时会从文件开始处写入，覆盖原有内容</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//以file建立一个QT的文本流</span></span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123;</span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        <span class="comment">//读入姓名 学号 数学成绩 英语成绩 C语言成绩</span></span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();  <span class="comment">//文件最后会多读一个无用数据，将其拿出</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//获取用户输入的id</span></span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//记录是否进行过删除</span></span><br><span class="line">    <span class="keyword">for</span>(QVector&lt;StudentInfo&gt;::iterator it = allStudentInfo.begin(); it != allStudentInfo.end(); it++)&#123;</span><br><span class="line">        <span class="comment">//用迭代器遍历allStudentInfo</span></span><br><span class="line">        <span class="keyword">if</span>(it-&gt;getId() == id)&#123;  <span class="comment">//如果找到有id与该id相同的学生，就进行删除</span></span><br><span class="line">            allStudentInfo.erase(it);</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag)&#123;   <span class="comment">//如果进行过删除，弹出对话框并更新文件</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"删除成功"</span>);</span><br><span class="line">        file.open(QIODevice::WriteOnly|QIODevice::Text|QIODevice::Truncate);</span><br><span class="line">        <span class="comment">//以只写覆盖的方式打开文本文件</span></span><br><span class="line">        <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">            QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function">QTextStream <span class="title">out</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : allStudentInfo)&#123;</span><br><span class="line">            out &lt;&lt; i.getName() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getId() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getMath() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getEnglish() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getLanguageC() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        file.close();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//如果没有进行删除，弹出不存在对话框</span></span><br><span class="line">         QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不存在！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">    <span class="comment">//清空id输入框</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> ModifyWidget::on_modifyButton_clicked()&#123;</span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;nameLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;mathLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;enLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;cLineEdit-&gt;text() == <span class="string">""</span>)&#123;</span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"存在空项"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读 的方式打开文本文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//QIODevice::Truncate在写入时会从文件开始处写入，覆盖原有内容</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//以file建立一个QT的文本流</span></span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123;</span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        <span class="comment">//读入姓名 学号 数学成绩 英语成绩 C语言成绩</span></span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();  <span class="comment">//文件最后会多读一个无用数据，将其拿出</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    QString name = ui-&gt;nameLineEdit-&gt;text();</span><br><span class="line">    <span class="keyword">int</span> math = ui-&gt;mathLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">int</span> english = ui-&gt;enLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">int</span> languageC = ui-&gt;cLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(QVector&lt;StudentInfo&gt;::iterator it = allStudentInfo.begin(); it != allStudentInfo.end(); it++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(it-&gt;getId() == id)&#123;</span><br><span class="line">            it-&gt;setName(name);</span><br><span class="line">            it-&gt;setMath(math);</span><br><span class="line">            it-&gt;setEnglish(english);</span><br><span class="line">            it-&gt;setLanguageC(languageC);</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag)&#123;   <span class="comment">//如果进行过修改，弹出对话框并更新文件</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"修改成功"</span>);</span><br><span class="line">        file.open(QIODevice::WriteOnly|QIODevice::Text|QIODevice::Truncate);</span><br><span class="line">        <span class="comment">//以只写覆盖的方式打开文本文件</span></span><br><span class="line">        <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">            QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function">QTextStream <span class="title">out</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : allStudentInfo)&#123;</span><br><span class="line">            out &lt;&lt; i.getName() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getId() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getMath() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getEnglish() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getLanguageC() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        file.close();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//如果没有进行修改，弹出不存在对话框</span></span><br><span class="line">         QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不存在！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;nameLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;mathLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;enLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;cLineEdit-&gt;clear();</span><br><span class="line">    <span class="comment">//清空所有输入框</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，修改模块就完成了</p>
<p>以上源代码：</p>
<p> <a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt _3(add%2Cmodify" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt%20_3(add%2Cmodify)</a>)</p>
<h3 id="8、查询模块"><a href="#8、查询模块" class="headerlink" title="8、查询模块"></a>8、查询模块</h3><p>　　打开selectwidget.h为”删除”与”修改”按钮设计点击槽函数,在selectwidget.cpp中给出函数定义。</p>
<p>　　查询可以在从文件读取时判断是否会读取到id为输入id的学生，也可以向修改一样江所有学生信息先读入到数据类型为StudentInfo的QVector容器中，在从容器中查询数据，这里我选择读入到容器的方法。</p>
<h4 id="selectwidget-h"><a href="#selectwidget-h" class="headerlink" title="selectwidget.h"></a>selectwidget.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SELECTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SELECTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"studentinfo.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">SelectWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SelectWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">SelectWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~SelectWidget();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::SelectWidget *ui;</span><br><span class="line"> </span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_selectButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// SELECTWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="selectwidget-cpp"><a href="#selectwidget-cpp" class="headerlink" title="selectwidget.cpp"></a>selectwidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"selectwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_selectwidget.h"</span></span></span><br><span class="line"></span><br><span class="line">SelectWidget::SelectWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::SelectWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SelectWidget::~SelectWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SelectWidget::on_returnButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SelectWidget::on_selectButton_clicked()&#123;</span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span>)&#123;</span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不能为空"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读的方式打开文本文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//文件打开失败</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//以file作为Qt文本流</span></span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;</span><br><span class="line">    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123; <span class="comment">//读到文件结尾</span></span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();</span><br><span class="line">    <span class="comment">//扔掉最后的无用数据</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i : allStudentInfo)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i.getId() == id)&#123;</span><br><span class="line">            ui-&gt;showNameLabel-&gt;setText(i.getName());</span><br><span class="line">            ui-&gt;showMathLabel-&gt;setText(QString::number(i.getMath()));</span><br><span class="line">            ui-&gt;showEnLabel-&gt;setText(QString::number(i.getEnglish()));</span><br><span class="line">            ui-&gt;showCLabel-&gt;setText(QString::number(i.getLanguageC()));</span><br><span class="line">            ui-&gt;showAvgLabel-&gt;setText(QString::number(i.getAvg()));</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">       QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不存在！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上源代码</p>
<p> <a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_4(add%2Cmodify%2Cselect" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_4(add%2Cmodify%2Cselect</a>)</p>
<h3 id="9、排序模块"><a href="#9、排序模块" class="headerlink" title="9、排序模块"></a>9、排序模块</h3><p>　　老样子，将数据从文件中读入数据类型为StudentInfo的QVector容器后进行排序就容易很多了。</p>
<p>　　我们需要排序时只能根据数学、英语、C语言、平均成绩中的一种进行排序，所以我们要做到代表这四种排序方式的QRedioButton有且只有一个能被选中，我们可以将其加入一个QButtonGroup，这样便可以实现这个需求，至于显示排序后的数据我们可以显示在表格控件QTableWidget中。</p>
<p>　　QButtonGroup直接继承自QObject，他有一个属性exclusive当这个属性为真时，所有在QButtonGroup内的按钮同一时间只有一个可以被选择。</p>
<p>　　QButtonGroup我们用到了addButton添加按钮 与checkedId获取选中按钮的id两个方法，其他方法诸位可以自己去搜索。</p>
<p>　　QTableWidget继承自QTableView，QTableView可以自定义的数据模型显示内容(setModel)但是QTableWidget不行，QTableWidget有固定的数据模型，在像其中填入数据时只需要一个单元格一个单元格的填好就可以了（setItem）</p>
<p>　　QTableWidget我们用到了setHorizontalHeaderLabels设置水平表头标签horizontalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch); 设置根据总宽度调整列宽；setRowCount设置行数；setItem设置单元格，其他方法诸位可以自己去搜索。</p>
<h3 id="sortwidget-h"><a href="#sortwidget-h" class="headerlink" title="sortwidget.h"></a>sortwidget.h</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SORTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SORTWIDGET_H</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QButtonGroup&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"studentinfo.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">SortWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SortWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">SortWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~SortWidget();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::SortWidget *ui;</span><br><span class="line">    QButtonGroup *sortButtonGroup;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>; <span class="comment">//返回菜单</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_sortButton_clicked</span><span class="params">()</span></span>;   <span class="comment">//排序</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// SORTWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="sortwidget-cpp"><a href="#sortwidget-cpp" class="headerlink" title="sortwidget.cpp"></a>sortwidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"sortwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_sortwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line">SortWidget::SortWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::SortWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">    sortButtonGroup = <span class="keyword">new</span> QButtonGroup();</span><br><span class="line">    <span class="comment">//实例化sortButtonGroup</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;mathRadioButton, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//将代表数学的单选框加入sortButtonGroup并将其id设为0</span></span><br><span class="line">    <span class="comment">//不建议使用默认id，默认id是由-2开始依次递减的</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;enRadioButton, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//将代表英语的单选框加入sortButtonGroup并将其id设为1</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;cRadioButton, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">//将代表C语言的单选框加入sortButtonGroup并将其id设为2</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;avgRadioButton, <span class="number">3</span>);</span><br><span class="line">    <span class="comment">//将代表平均的单选框加入sortButtonGroup并将其id设为3</span></span><br><span class="line">    ui-&gt;avgRadioButton-&gt;setChecked(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//平均成绩默认选中</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;setColumnCount(<span class="number">6</span>);</span><br><span class="line">    QStringList headerLabels;</span><br><span class="line">    <span class="comment">//QStringList headerLabels用来记录表格表头数据</span></span><br><span class="line">    headerLabels &lt;&lt; tr(<span class="string">"姓名"</span>) &lt;&lt; tr(<span class="string">"学号"</span>) &lt;&lt; tr(<span class="string">"数学"</span>) &lt;&lt; tr(<span class="string">"英语"</span>) &lt;&lt; tr(<span class="string">"C语言"</span>) &lt;&lt; tr(<span class="string">"平均"</span>);</span><br><span class="line">    ui-&gt;tableWidget-&gt;setHorizontalHeaderLabels(headerLabels);</span><br><span class="line">    <span class="comment">// void setHorizontalHeaderLabels(const QStringList &amp;labels);设置水平表头标签</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;horizontalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch);</span><br><span class="line">    <span class="comment">//设置根据总宽度调整列宽</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;setRowCount(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//初始行数设为一行</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SortWidget::~SortWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SortWidget::on_returnButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">getStudentInfo</span><span class="params">(QVector&lt;StudentInfo&gt; &amp;allStudentInfo)</span></span>&#123;  <span class="comment">//读取信息成功返回true 否则返回false</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读方式打开文本文件student.txt</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//文件打开失败</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123;    <span class="comment">//读到文件结尾</span></span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前声明的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();</span><br><span class="line">    <span class="comment">//扔掉最后的无用数据</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_math</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123;    <span class="comment">//数学排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getMath() &gt; b.getMath();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_English</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123; <span class="comment">//英语排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getEnglish() &gt; b.getEnglish();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_languageC</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123;   <span class="comment">//C语言排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getLanguageC() &gt; b.getLanguageC();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_avg</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123; <span class="comment">//平均成绩排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getAvg() &gt; b.getAvg();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">void</span> SortWidget::on_sortButton_clicked()&#123;</span><br><span class="line">    ui-&gt;tableWidget-&gt;clearContents();</span><br><span class="line">    <span class="comment">//清空除表头外的所有数据</span></span><br><span class="line">    <span class="comment">//若想清除表头可使用clear()</span></span><br><span class="line">    <span class="keyword">int</span> sortTag = sortButtonGroup-&gt;checkedId();</span><br><span class="line">    <span class="comment">//取得当前选中的单选框的id</span></span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;</span><br><span class="line">    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="keyword">if</span>(!getStudentInfo(allStudentInfo)) <span class="comment">//从文件读取数据到allStudentInfo</span></span><br><span class="line">        <span class="keyword">return</span>; <span class="comment">//读取失败直接返回</span></span><br><span class="line">    <span class="keyword">if</span>(allStudentInfo.empty())&#123; <span class="comment">//allStudentInfo中没有数据</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"没有学生信息"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (sortTag) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//sortTag==0根据数学进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_math);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//sortTag==1根据英语进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_English);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//sortTag==2根据C语言进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_languageC);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//sortTag==3根据平均成绩进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_avg);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ui-&gt;tableWidget-&gt;setRowCount(allStudentInfo.size());</span><br><span class="line">    <span class="comment">//将表格的行数设为与学生数量相同</span></span><br><span class="line">    <span class="comment">//否则setItem添加单元格不会生效</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; allStudentInfo.size(); i++)&#123;</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">0</span>, <span class="keyword">new</span> QTableWidgetItem(allStudentInfo[i].getName()));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">1</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getId())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">2</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getMath())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">3</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getEnglish())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">4</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getLanguageC())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">5</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getAvg())));</span><br><span class="line">        <span class="comment">//设置各单元格的数据，非QString类型的数据需要转换为QString</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到此为止我们整个项目便完成了，以后可能还会继续完善。</p>
<p>源代码</p>
<p><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_5(all" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_5(all</a>)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/11/2015%E5%B9%B4%E7%AC%AC%E5%85%AD%E5%B1%8A-%E8%93%9D%E6%A1%A5%E6%9D%AFC-C-%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%9C%AC%E7%A7%91B%E7%BB%84%E5%86%B3%E8%B5%9B-%E5%AE%8C%E7%BE%8E%E6%AD%A3%E6%96%B9%E5%BD%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/11/2015%E5%B9%B4%E7%AC%AC%E5%85%AD%E5%B1%8A-%E8%93%9D%E6%A1%A5%E6%9D%AFC-C-%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%9C%AC%E7%A7%91B%E7%BB%84%E5%86%B3%E8%B5%9B-%E5%AE%8C%E7%BE%8E%E6%AD%A3%E6%96%B9%E5%BD%A2/" class="post-title-link" itemprop="url">2015年第六届 蓝桥杯C  C++程序设计 本科B组决赛 完美正方形</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-11 21:54:34" itemprop="dateCreated datePublished" datetime="2019-04-11T21:54:34+08:00">2019-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><meta name="referrer" content="no-referrer"><br>　　如果一些边长互不相同的正方形，可以恰好拼出一个更大的正方形，则称其为完美正方形。历史上，人们花了很久才找到了若干完美正方形。比如：如下边长的22个正方形</p>
<p>2 3 4 6 7 8 12 13 14 15 16 17 18 21 22 23 24 26 27 28 50 60</p>
<p>如【图1.png】那样组合，就是一种解法。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190411214601151-449620736.png" alt="img"><br>　　此时，紧贴上边沿的是：60 50，紧贴下边沿的是：26 28 17 21 18</p>
<p>　　22阶完美正方形一共有8种。下面的组合是另一种：</p>
<p>2 5 9 11 16 17 19 21 22 24 26 30 31 33 35 36 41 46 47 50 52 61</p>
<p>　　如果告诉你该方案紧贴着上边沿的是从左到右依次为：47 46 61，你能计算出紧贴着下边沿的是哪几个正方形吗？</p>
<p>　　请提交紧贴着下边沿的正方形的边长，从左到右，用空格分开。</p>
<p>不要填写任何多余的内容或说明文字。</p>
<p>解题思路：</p>
<p>　　既然已经给出紧贴着上边沿的三个正方形，便可以得知最终拼接成的大正方形边长为47+46+61=154我们将整个大正方形视为一个154*154的地图，将47 46 61三个正方形先拼到地图顶端。之后找到第一个空闲位置，深搜填入其他正方形，直到找到可以填满地图的填充方式为止。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> EDGE = <span class="number">47</span> + <span class="number">46</span> + <span class="number">61</span>;</span><br><span class="line"><span class="comment">//大正方形边长</span></span><br><span class="line"><span class="keyword">int</span> num[] = &#123;<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">24</span>, <span class="number">26</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">33</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">41</span>, <span class="number">50</span>, <span class="number">52</span>&#125;;</span><br><span class="line"><span class="comment">//num需要是有序的</span></span><br><span class="line"><span class="comment">//记录剩下的所有可以被选取的正方形边长</span></span><br><span class="line"><span class="keyword">int</span> vis[<span class="number">20</span>] = &#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="comment">//vis[i]记录i号正方形是否被选取过</span></span><br><span class="line"><span class="keyword">int</span> mp[EDGE][EDGE];</span><br><span class="line"><span class="comment">//地图</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fillUp</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> length, <span class="keyword">int</span> fillNumber)</span></span>&#123;</span><br><span class="line">    <span class="comment">//填充函数，x y为要填充位置的坐标（要填充正方形的左上角所在位置）</span></span><br><span class="line">    <span class="comment">//length为填充正方形的长度，fillNumber表示填入地图的数字（填充时设为边长，拿出时设为0）</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = x; i &lt; x + length; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = y; j &lt; y + length; j++)</span><br><span class="line">            mp[i][j] = fillNumber;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isFull</span><span class="params">()</span></span>&#123;  <span class="comment">//判断地图是否已被填满</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; EDGE; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; EDGE; j++)</span><br><span class="line">            <span class="keyword">if</span>(!mp[i][j])</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">judge</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> length)</span></span>&#123;   <span class="comment">//判断位置x y是否能填入边长为length的正方形</span></span><br><span class="line">    <span class="keyword">if</span>(x + length &gt; EDGE || y + length &gt; EDGE)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = x; i &lt; x + length; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = y; j &lt; y + length; j++)</span><br><span class="line">            <span class="keyword">if</span>(mp[i][j])</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(isFull())  <span class="comment">//如果地图已被填满则找到答案，返回true</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &gt; EDGE || y &gt; EDGE)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">int</span> newX, newY;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; EDGE; i++)&#123;  <span class="comment">//将newX newY记录为地图上第一个空位的坐标</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; EDGE; j++)</span><br><span class="line">            <span class="keyword">if</span>(!mp[i][j])&#123;</span><br><span class="line">                newX = i, newY = j;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">19</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(judge(newX, newY, num[i]))&#123;  <span class="comment">//位置newX newY能填入边长为num[i]的正方形 且边长为num[i]的正方形还没有被选取过</span></span><br><span class="line">            <span class="keyword">if</span>(!vis[i])&#123;</span><br><span class="line">                fillUp(newX, newY, num[i], num[i]); <span class="comment">//将长度为num[i]的正方形 填入位置 newX, newY</span></span><br><span class="line">                vis[i] = <span class="literal">true</span>;  <span class="comment">//边长为num[i]的正方形标记为已选取</span></span><br><span class="line">                <span class="keyword">if</span>(dfs(newX, newY + num[i]))</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                fillUp(newX, newY, num[i], <span class="number">0</span>);  <span class="comment">//将长度为num[i]的正方形从位置 newX, newY取出</span></span><br><span class="line">                vis[i] = <span class="literal">false</span>; <span class="comment">//边长为num[i]的正方形标记为未选取</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>   <span class="comment">//由于num是有序的只要num[i]无法放入位置newX newY则之后的正方形都无法放入位置newX newY</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    fillUp(<span class="number">0</span>, <span class="number">0</span>, <span class="number">47</span>, <span class="number">47</span>);</span><br><span class="line">    fillUp(<span class="number">0</span>, <span class="number">47</span>, <span class="number">46</span>, <span class="number">46</span>);</span><br><span class="line">    fillUp(<span class="number">0</span>, <span class="number">93</span>, <span class="number">61</span>, <span class="number">61</span>);</span><br><span class="line">    <span class="comment">//将题中给出的上方三个正方形填入地图</span></span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//int ans = 0;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; EDGE; j++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%3d "</span>, mp[<span class="number">153</span>][j]); <span class="comment">//打印最后一行</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/08/PTA-Advanced-Level-1007-Maximum-Subsequence-Sum/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/08/PTA-Advanced-Level-1007-Maximum-Subsequence-Sum/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1007 Maximum Subsequence Sum</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-08 17:25:01" itemprop="dateCreated datePublished" datetime="2019-04-08T17:25:01+08:00">2019-04-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　Given a sequence of K integers { N1, N2, …, NK }. A continuous subsequence is defined to be { Ni, Ni+1, …, Nj } where 1. The Maximum Subsequence is the continuous subsequence which has the largest sum of its elements. For example, given sequence { -2, 11, -4, 13, -5, -2 }, its maximum subsequence is { 11, -4, 13 } with the largest sum being 20.</p>
<p>　　Now you are supposed to find the largest sum, together with the first and the last numbers of the maximum subsequence.</p>
<p><strong>Input Specification:</strong></p>
<p>　　Each input file contains one test case. Each case occupies two lines. The first line contains a positive integer K (≤). The second line contains K numbers, separated by a space.</p>
<p><strong>Output Specification:</strong></p>
<p>　　For each test case, output in one line the largest sum, together with the first and the last numbers of the maximum subsequence. The numbers must be separated by one space, but there must be no extra space at the end of a line. In case that the maximum subsequence is not unique, output the one with the smallest indices i and j (as shown by the sample case). If all the K numbers are negative, then its maximum sum is defined to be 0, and you are supposed to output the first and the last numbers of the whole sequence.</p>
<p><strong>Sample Input:</strong></p>
<p>10</p>
<p>-10 1 2 3 4 -5 -23 3 7 -21</p>
<p><strong>Sample Output:</strong></p>
<p>10 1 4</p>
<p>题目解析</p>
<p>　　本题第一行给出数组长度k，下一行给出k个整数，要求计算出最大连续子串和，并输出最大连续字串的首位与末位，如果整个字符串全为负数，则输出0并输出整个字符串的首位与末位。</p>
<p>　　用数组arr记录给出的数组，最大连续子串和，果断dp。用数组dp[i]记录当字符串以第i位结尾时的最大连续子串和。当i = 0时以首位为结尾的最大连续子串和为首位arr[ i ]的值。</p>
<p>之后的值只会有两种情况：</p>
<p>　　1）以当前位i为结尾时最大连续子串只有其本身arr[ i ]一个元素;</p>
<p>　　2）以当前位i为结尾时最大连续子串有多个元素，即dp[ i - 1] + arr[ i ];</p>
<p>　　可以得到状态转移方程dp[ i ] = max(arr[ i ], dp[ i - 1] + arr[ i ]);</p>
<p>　　至于最大连续子串的首尾两位我们可以在计算dp数组时一并计算，以bg[ i ]记录dp[ i ]对应的最大连续子串的首位，以ed[ i ]记录dp[ i ]对应的最大连续子串的末尾。</p>
<p>注意：</p>
<p>​    若不对整个字符串全为负数的情况做出处理， 测试点4会错误；</p>
<p>　　若对整个字符串全为负数的情况做出处理了，但将字符串存在0的情况也视为全为负数处理，测试点5会错误。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">1e4</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAX];</span><br><span class="line"><span class="keyword">int</span> dp[MAX], bg[MAX], ed[MAX];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;k);    <span class="comment">//输入数组长度k</span></span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;  <span class="comment">//flag记录数组是否全为负数</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)&#123; <span class="comment">//输入数组</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;arr[i]);</span><br><span class="line">        <span class="keyword">if</span>(arr[i] &gt;= <span class="number">0</span>) <span class="comment">//只要存在正数或0则将flag标记位true</span></span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>] = arr[<span class="number">0</span>]; <span class="comment">//以首位为结尾的最大连续连续子串和为首位arr[i]的值</span></span><br><span class="line">    <span class="keyword">int</span> maxSum = arr[<span class="number">0</span>], index = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//maxSum记录最大连续子串和</span></span><br><span class="line">    <span class="comment">//index记录最大连续子串的末位下标</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; k; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[i - <span class="number">1</span>] + arr[i] &gt;= arr[i])&#123;   <span class="comment">//情况2</span></span><br><span class="line">            dp[i] = dp[i - <span class="number">1</span>] + arr[i];</span><br><span class="line">            bg[i] = bg[i - <span class="number">1</span>];  <span class="comment">//记录当前最大连续子串首位下标</span></span><br><span class="line">            ed[i] = i;  <span class="comment">//记录最大连续子串末位下标</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;  <span class="comment">//情况1</span></span><br><span class="line">            dp[i] = arr[i];</span><br><span class="line">            bg[i] = ed[i] = i;</span><br><span class="line">            <span class="comment">//最大连续子串首尾下标都为i</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(dp[i] &gt; maxSum)&#123;</span><br><span class="line">            maxSum = dp[i];</span><br><span class="line">            index = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, maxSum, arr[bg[index]], arr[ed[index]]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"0 %d %d\n"</span>, arr[<span class="number">0</span>], arr[k - <span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　当然本题数据量最大只有1e4，暴力的O(n^2)并不会超时，所以本题暴力依然没有问题。</p>
<p>暴力过一切：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">1e4</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAX], sum[MAX];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;k);</span><br><span class="line">    <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;arr[i]);</span><br><span class="line">        temp += arr[i];</span><br><span class="line">        sum[i] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> maxSum = <span class="number">-1</span>, bg = <span class="number">0</span>, ed = k - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt; k; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(sum[j] - sum[i] + arr[i] &gt; maxSum)&#123;</span><br><span class="line">                maxSum = sum[j] - sum[i] + arr[i];</span><br><span class="line">                bg = i;</span><br><span class="line">                ed = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(maxSum &lt; <span class="number">0</span>)</span><br><span class="line">        maxSum = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, maxSum, arr[bg], arr[ed]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/04/PTA-Advanced-Level-1008-Elevator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/04/PTA-Advanced-Level-1008-Elevator/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1008 Elevator</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-04 12:47:06" itemprop="dateCreated datePublished" datetime="2019-04-04T12:47:06+08:00">2019-04-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　The highest building in our city has only one elevator. A request list is made up with Npositive numbers. The numbers denote at which floors the elevator will stop, in specified order. It costs 6 seconds to move the elevator up one floor, and 4 seconds to move down one floor. The elevator will stay for 5 seconds at each stop.</p>
<p>　　For a given request list, you are to compute the total time spent to fulfill the requests on the list. The elevator is on the 0th floor at the beginning and does not have to return to the ground floor when the requests are fulfilled.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>　　Each input file contains one test case. Each case contains a positive integer N, followed by Npositive numbers. All the numbers in the input are less than 100.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>　　For each test case, print the total time on a single line.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 2 3 1</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">41</span><br></pre></td></tr></table></figure>
<p>题目解析</p>
<p>　　本题首先给出一个整数n代表电梯会停留的层数，之后给出n个数，代表电梯具体停留的楼层，电梯初始在0层，每向上一层会消耗6秒，每向下一层会消耗4秒，在需停留层会停留5秒，电梯最后不需要返回0层。</p>
<p>　　模拟一下电梯的运行过程即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n, t = <span class="number">0</span>, nowf = <span class="number">0</span>; <span class="comment">//n为电梯需停留层数， t为已经消耗的时间， nowf是电梯当前所在的楼层</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);    <span class="comment">//输入电梯需停留层数</span></span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        <span class="keyword">int</span> floors;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;floors);   <span class="comment">//输入下一个要停留的楼层</span></span><br><span class="line">        <span class="keyword">while</span>(nowf &lt; floors)&#123;   <span class="comment">//向上运行</span></span><br><span class="line">            nowf++;</span><br><span class="line">            t += <span class="number">6</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(nowf &gt; floors)&#123;   <span class="comment">//向下运行</span></span><br><span class="line">            nowf--;</span><br><span class="line">            t += <span class="number">4</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        t += <span class="number">5</span>; <span class="comment">//停留</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, t);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/03/PTA-Advanced-Level-1006-Sign-In-and-Sign-Out/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/03/PTA-Advanced-Level-1006-Sign-In-and-Sign-Out/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1006 Sign In and Sign Out</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-03 20:17:30" itemprop="dateCreated datePublished" datetime="2019-04-03T20:17:30+08:00">2019-04-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　At the beginning of every day, the first person who signs in the computer room will unlock the door, and the last one who signs out will lock the door. Given the records of signing in’s and out’s, you are supposed to find the ones who have unlocked and locked the door on that day.</p>
<p><strong>Input Specification:</strong></p>
<p>　　Each input file contains one test case. Each case contains the records for one day. The case starts with a positive integer M, which is the total number of records, followed by M lines, each in the format:</p>
<p>　　ID_number Sign_in_time Sign_out_time</p>
<p>　　where times are given in the format HH:MM:SS, and ID_number is a string with no more than 15 characters.</p>
<p><strong>Output Specification:</strong></p>
<p>　　For each test case, output in one line the ID numbers of the persons who have unlocked and locked the door on that day. The two ID numbers must be separated by one space.</p>
<p>　　Note: It is guaranteed that the records are consistent. That is, the sign in time must be earlier than the sign out time for each person, and there are no two persons sign in or out at the same moment.</p>
<p><strong>Sample Input:</strong></p>
<p>3</p>
<p>CS301111 15:30:28 17:00:10</p>
<p>SC3021234 08:00:00 11:25:25</p>
<p>CS301133 21:45:00 21:58:40</p>
<p><strong>Sample Output:</strong></p>
<p>SC3021234 CS301133</p>
<p>题目解析</p>
<p>　　本题给出一天内登录机房的总人数m，之后给出m行数据，每行为一个人的登录信息，其中包括一个长度不超过15的id， 一个格式为HH:MM:SS的登录时间inTime，和一个格式为HH:MM:SS的登出时间outTime。</p>
<p>　　第一个登录机房的人将是开门者，最后一个登出机房的人将是锁门者，要求输出开门者与锁门者的id。</p>
<p>　　C++的string比较两个长度相等的字符串大小是由首位开始按位比较ASCII码，首位ASCII码大的字符串视为较大字符串，若首位相等边比较第二位，依次向后比较。者正好符合我们对HH:MM:SS类型的时间比较，较大的时间在字符串比较时依然较大，这样我们便可以将时间存为string直接进行比较。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">string</span> unlockedId, lockedId, minTime = <span class="string">"24:00:00"</span>, maxTime = <span class="string">"00:00:00"</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;m);    <span class="comment">//输入登录总人数</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">        <span class="built_in">string</span> id, inTime, outTime;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; id &gt;&gt; inTime &gt;&gt; outTime; <span class="comment">//输入登录者id 登录时间 登出时间</span></span><br><span class="line">        <span class="keyword">if</span>(minTime &gt; inTime)&#123;   <span class="comment">//如果登录时间早于当早登录时间</span></span><br><span class="line">            minTime = inTime;   <span class="comment">//记录最早登录时间为当前登录时间</span></span><br><span class="line">            unlockedId = id;    <span class="comment">//记录开门者id为当前id</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(maxTime &lt; outTime)&#123;  <span class="comment">//如果登出时间晚于最晚登录时间</span></span><br><span class="line">            maxTime = outTime;  <span class="comment">//记录最晚登出时间为当前登出时间</span></span><br><span class="line">            lockedId = id;  <span class="comment">//记录锁门者id为当前id</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; unlockedId &lt;&lt; <span class="string">" "</span> &lt;&lt; lockedId &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">//输出开门者和锁门者的id</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/02/PTA-Advanced-Level-1004-Counting-Leaves/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/02/PTA-Advanced-Level-1004-Counting-Leaves/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1004 Counting Leaves</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-02 21:04:09" itemprop="dateCreated datePublished" datetime="2019-04-02T21:04:09+08:00">2019-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　A family hierarchy is usually presented by a pedigree tree. Your job is to count those family members who have no child.</p>
<p>Input Specification:<br>　　Each input file contains one test case. Each case starts with a line containing 0 &lt; N &lt; 100, the number of nodes in a tree, and M (&lt;N), the number of non-leaf nodes. Then M lines follow, each in the format:</p>
<p>ID K ID[1] ID[2] … ID[K]<br>　　where ID is a two-digit number representing a given non-leaf node, K is the number of its children, followed by a sequence of two-digit ID’s of its children. For the sake of simplicity, let us fix the root ID to be 01.</p>
<p>The input ends with N being 0. That case must NOT be processed.</p>
<p>Output Specification:<br>　　For each test case, you are supposed to count those family members who have no child for every seniority level starting from the root. The numbers must be printed in a line, separated by a space, and there must be no extra space at the end of each line.</p>
<p>　　The sample case represents a tree with only 2 nodes, where 01 is the root and 02 is its only child. Hence on the root 01 level, there is 0 leaf node; and on the next level, there is 1leaf node. Then we should output 0 1 in a line.</p>
<p>Sample Input:<br>2 1<br>01 1 02<br>Sample Output:<br>0 1<br>题目解析</p>
<p>　　本题给出一颗家族关系树第一行首先给出两个整数0&lt;N&lt;100为家族中人数，M&lt;N为非叶子节点个数（有孩子的人的数量）之后跟随M行，每行都是一个有孩子的人的信息，其中包括一个两位id为其对应编号，一个整数K为其孩子的数量，之后K个两位数为其孩子的编号。家族树的根结点编号为1，要求由根结点所在层开始输出每层拥有的叶子结点个数（每层没有孩子的成员个数）。</p>
<p>用一个vector<int> 类型的数组child[ ]储存每个人的孩子的编号，int型数组cnt[ ]储存每层的叶子结点数量，视根结点为第0层由根结点开始dfs搜索其每一个孩子，每个点的孩子所在的层数就是其层数加一，若搜索到没有孩子的结点便将其对应层叶子结点数量加一。将搜索到的最大层数计入maxL。</int></p>
<p>最后由0到maxL输出每层的叶子结点数量即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; child[<span class="number">110</span>];  <span class="comment">//储存每个id的孩子</span></span><br><span class="line"><span class="keyword">int</span> cnt[<span class="number">110</span>]; <span class="comment">//记录每层叶子结点的个数</span></span><br><span class="line"><span class="keyword">int</span> n, m;   <span class="comment">//n为总人数， m为非叶子结点数量</span></span><br><span class="line"><span class="keyword">int</span> maxL = INT_MIN; <span class="comment">//maxL记录最大层数</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> id, <span class="keyword">int</span> nowlevel)</span></span>&#123;</span><br><span class="line">    maxL = max(maxL, nowlevel); <span class="comment">//记录最大层数</span></span><br><span class="line">    <span class="keyword">if</span>(child[id].empty())   <span class="comment">//如果该点没有孩子表明其为叶子结点</span></span><br><span class="line">        cnt[nowlevel]++;    <span class="comment">//其对应层的叶子结点数量加一</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i : child[id]) <span class="comment">//搜索其所有的孩子</span></span><br><span class="line">        dfs(i, nowlevel + <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;n, &amp;m);  <span class="comment">//输入总人数与非叶子结点数</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123; <span class="comment">//输入所有非叶子结点信息</span></span><br><span class="line">        <span class="keyword">int</span> id, k;  <span class="comment">//该点id与孩子数量k</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;id, &amp;k);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; k; j++)&#123; <span class="comment">//输入该点所有孩子</span></span><br><span class="line">            <span class="keyword">int</span> cid;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;cid);</span><br><span class="line">            child[id].push_back(cid);   <span class="comment">//记录该点的孩子</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);  <span class="comment">//1为根结点，由根结点第0层开始搜索</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= maxL; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i != <span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d"</span>, cnt[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/02/Qt5-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84Hello-World%E6%95%99%E7%A8%8B-Qt-Creator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/02/Qt5-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84Hello-World%E6%95%99%E7%A8%8B-Qt-Creator/" class="post-title-link" itemprop="url">Qt5--从零开始的Hello World教程(Qt Creator)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-02 17:10:07" itemprop="dateCreated datePublished" datetime="2019-04-02T17:10:07+08:00">2019-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%80%E5%8D%95%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">简单教程</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><meta name="referrer" content="no-referrer"></p>
<h3 id="一、打开Qt-Creator"><a href="#一、打开Qt-Creator" class="headerlink" title="一、打开Qt Creator"></a>一、打开Qt Creator</h3><p>　　本次的目的是用Qt Creator建立一个Hello World项目，在安装Qt之后，首先要打开Qt Creator。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402144344775-843344643.png" alt="img"></p>
<p>　　就是它啦，打开后会显示如下页面。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402144516906-500975365.png" alt="img"></p>
<h3 id="二、建立新项目"><a href="#二、建立新项目" class="headerlink" title="二、建立新项目"></a>二、建立新项目</h3><p>　　点击文件——新建文件或项目 或者使用快捷键Ctrl+N便可以打开新建项目菜单。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402144825806-315022429.png" alt="img"></p>
<p>　　这里选择其他项目——Empty qmake Project创建一个空的qt项目 HelloWorld_Qt。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402145220721-54460256.png" alt="img"></p>
<p>　　一路下一步到完成之后就可以看到已经成功建立的项目HelloWorld_Qt。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402145420368-1252528396.png" alt="img"></p>
<p>　　这个生成的新项目包含两个文件。</p>
<p> <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402145521816-1197688933.png" alt="img"></p>
<p>　　HelloWorld_Qt.pro是qt的工程文件，HelloWorld_Qt.pro.user是用于记录该次编译所用的打开工程的路径，编译器、构建的工具链、生成目录、打开工程的qt-creator的版本等的文件，更换编译环境是需删除。</p>
<p>　　这样建立Qt项目便完成了。</p>
<p>　　由于这里建立的是一个空项目，我们需要添加文件来编写代码，右击项目HelloWorld_Qt点击Add New，选择C++中的C++ Source File添加一个c++源代码文件，起名叫main一路下一步到完成。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402150231560-2062946358.png" alt="img"></p>
<p>　　这样就有了一个可以用来编写代码的main.cpp</p>
<h3 id="三、编写代码"><a href="#三、编写代码" class="headerlink" title="三、编写代码"></a>三、编写代码</h3><p>　　打开main.cpp在其中编写代码我们需要建立一个Qt应用程序，需要引入Qt应用程序类QApplication所以我们引用它</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;QApplication&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402150738245-1316022751.png" alt="img"></p>
<p>　　但是这里报错了，编译器告诉我们‘QApplication’类文件没有找到，这是因为没有连接Qt Widgets库，打开HelloWorld_Qt.pro引入Qt Widgets库，添加一句QT += widgets按下Ctrl+S保存，之后回到main.cpp</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402151334917-157143616.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402151409236-1511120867.png" alt="img"></p>
<p>　　果然，错误消失了。</p>
<p>　　继续编写代码，我们还需要有一个窗体，需要引入QWidget类</p>
<p>　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;QWidget&gt;</span><br></pre></td></tr></table></figure>
<p>　　之后便可以开始设计主函数了。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="comment">//在程序编译完成后会生成一个.exe后缀的可执行文件</span></span><br><span class="line">    <span class="comment">//argc是命令行参数个数</span></span><br><span class="line">    <span class="comment">//argv[0]记录程序名</span></span><br><span class="line">    <span class="comment">//argv[1]~argv[argc-1]记录的输入参数</span></span><br><span class="line">    <span class="comment">//argc argv是标识符，可以修改名称</span></span><br><span class="line">    <span class="comment">//main()函数有argc和argv或没有，即int main() 或void main，都是合法的。</span></span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    <span class="comment">//应用程序抽象类</span></span><br><span class="line">    <span class="comment">//使用在argv中的argc个命令行参数构造一个名为app的QApplication对象。</span></span><br><span class="line">    <span class="comment">//QApplication 类管理图形用户界面应用程序的控制流和主要设置</span></span><br><span class="line">    <span class="comment">//任何一个使用Qt的图形用户界面应用程序，都存在一个QApplication对象</span></span><br><span class="line"></span><br><span class="line">    QWidget w;</span><br><span class="line">    <span class="comment">//QWidget类是所有用户界面对象的基类</span></span><br><span class="line">    <span class="comment">//在这里可以把它看作一个窗口，构造了一个窗口对象</span></span><br><span class="line">    w.setWindowTitle(<span class="string">"Hello World!"</span>);</span><br><span class="line">    <span class="comment">//将窗口的标题设为Hello World!</span></span><br><span class="line">    w.show();</span><br><span class="line">    <span class="comment">//显示窗体</span></span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">    <span class="comment">//exec()函数有一个消息循环，在调用之后，程序就被锁定。等待窗口的关闭</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　执行一下</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402152145588-140921127.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402152215884-149429949.png" alt="img"></p>
<p>　　成功显示HelloWorld窗口。 </p>
<p>　　窗口建好之后我们便可以向窗口中添加控件了，现在需要在窗体中显示Hello World！，我们可以通过QLabel标签实现，要向窗体中添加QLabel标签则同样需要引入QLabel类。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;QLabel&gt;</span><br></pre></td></tr></table></figure>
<p>　　之后构造一个标签对象</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">textLabel.resize(<span class="number">100</span>,<span class="number">15</span>);</span><br><span class="line"><span class="comment">//设定标签宽40高15</span></span><br><span class="line">textLabel.move(<span class="number">150</span>, <span class="number">170</span>);</span><br><span class="line"><span class="comment">//将标签移动到距离左上角水平100px垂直130px的位置</span></span><br><span class="line">textLabel.setText(<span class="string">"Hello World!"</span>);</span><br><span class="line"><span class="comment">//标签的初始显示字符串NULL</span></span><br><span class="line">textLabel.setParent(&amp;w);</span><br></pre></td></tr></table></figure>
<p>　　标签QLabel也是一个窗体，它继承自QFrame，而QFrame又继承自QWidget，若想让他显示在我们构造的窗口w中就需要将QLabel对象textLabel的父对象设为w。</p>
<p>　　在这个程序中w是主窗口，主窗口是指没有父对象的窗口。</p>
<p>　　若在此处不使用textLable.setParent(w),text标签将单独弹出一个窗口。</p>
<p>　　这就说明了，所有最终继承至QFrame的控件如果不把控件的父对象设置为当前主窗口，控件将单独作为一另个主窗口弹出。</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402190800843-918816892.png" alt="img"></p>
<p>　　注释textLable.setParent(w),text后的效果</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190402190907055-724741945.png" alt="img"></p>
<p>　　正确效果</p>
<p>　　源代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QLabel&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="comment">//在程序编译完成后会生成一个.exe后缀的可执行文件</span></span><br><span class="line">    <span class="comment">//argc是命令行参数个数</span></span><br><span class="line">    <span class="comment">//argv[0]记录程序名</span></span><br><span class="line">    <span class="comment">//argv[1]~argv[argc-1]记录的输入参数</span></span><br><span class="line">    <span class="comment">//argc argv是标识符，可以修改名称</span></span><br><span class="line">    <span class="comment">//main()函数有argc和argv或没有，即int main() 或void main，都是合法的。</span></span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line">    <span class="comment">//应用程序抽象类</span></span><br><span class="line">    <span class="comment">//使用在argv中的argc个命令行参数构造一个名为app的QApplication对象。</span></span><br><span class="line">    <span class="comment">//QApplication 类管理图形用户界面应用程序的控制流和主要设置</span></span><br><span class="line">    <span class="comment">//任何一个使用Qt的图形用户界面应用程序，都存在一个QApplication对象</span></span><br><span class="line">    QWidget w;</span><br><span class="line">    w.resize(<span class="number">400</span>, <span class="number">400</span>);</span><br><span class="line">    <span class="comment">//QWidget类是所有用户界面对象的基类</span></span><br><span class="line">    <span class="comment">//在这里可以把它看作一个窗口，构造了一个窗口对象</span></span><br><span class="line">    w.setWindowTitle(<span class="string">"Hello World!"</span>);</span><br><span class="line">    <span class="comment">//将窗口的标题设为Hello World!</span></span><br><span class="line">    QLabel textLabel;</span><br><span class="line">    <span class="comment">//构造一个标签</span></span><br><span class="line">    textLabel.resize(<span class="number">100</span>,<span class="number">15</span>);</span><br><span class="line">    <span class="comment">//设定标签宽40高15</span></span><br><span class="line">    textLabel.move(<span class="number">150</span>, <span class="number">170</span>);</span><br><span class="line">    <span class="comment">//将标签移动到距离左上角水平100px垂直130px的位置</span></span><br><span class="line">    textLabel.setText(<span class="string">"Hello World!"</span>);</span><br><span class="line">    <span class="comment">//标签的初始显示字符串NULL</span></span><br><span class="line">    textLabel.setParent(&amp;w);</span><br><span class="line">    textLabel.show();</span><br><span class="line">    w.show();</span><br><span class="line">    <span class="comment">//显示窗体</span></span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">    <span class="comment">//exec()函数有一个消息循环，在调用之后，程序就被锁定。等待窗口的关闭</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="四、Hello-New-World"><a href="#四、Hello-New-World" class="headerlink" title="四、Hello New World!"></a>四、Hello New World!</h3><p>　　在成功完成上述项目后我们已经不能满足于单单在窗口中显示Hello World！了，这次我们希望用一个按钮来将Hello World！改为 Hello New World！。</p>
<p>　　新建一个空的Qt项目，名为Hello New World。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190407144430673-1999955819.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190407144527554-1706277458.png" alt="img"></p>
<p>　　一路下一步到完成，打开HelloNewWorld.pro引入Qt Widgets库，添加一句QT += widgets。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190407145104965-23413638.png" alt="img"></p>
<p>　　这次我们不像上一个项目一样一个main函数到底，我们添加一个C++类作为主窗口框架。</p>
<p> 　右击HelloNewWorld选择Add New添加一个C++ Class</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190407145222933-287602353.png" alt="img"></p>
<p>　　我们想让这个类作为我们主窗口的对象类型，我们将其命名为MainWidget，既然MainWidget是一个窗口，我们就让MainWidget作为QWidget的一个子类。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190407145638466-777605577.png" alt="img"></p>
<p>　　将MainWidget的基类设为QWidget。</p>
<p>　　一路下一步到结束。</p>
<p>　　可以发现项目中多了两个文件，mainwidget.h 与 mainwidget.cpp。</p>
<p><strong><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190407145926646-486457409.png" alt="img"></strong></p>
<p>　　我们的MainWidget类就声明在mainwidget.h中</p>
<p>mainwidget.h:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MAINWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAINWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainWidget</span> :</span> <span class="keyword">public</span> QWidget   <span class="comment">//MainWidget的声明</span></span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MainWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    <span class="comment">//MainWidget类的构造函数 因为使用了explicit所以为显式构造函数</span></span><br><span class="line">    <span class="comment">//c++ 类构造函数默认情况下即声明为implicit(隐式)</span></span><br><span class="line">    <span class="comment">//关于显示与隐式的区别这里就不介绍了，诸位若不知道可以搜索</span></span><br><span class="line">signals:</span><br><span class="line">    <span class="comment">//这里可以用来声明信号函数</span></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="comment">//这里可以用来声明槽函数</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// MAINWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<p> mainwidget.cpp: </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mainwidget.h"</span></span></span><br><span class="line"></span><br><span class="line">MainWidget::MainWidget(QWidget *parent) : QWidget(parent)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//显示调用MainWidget构造函数</span></span><br><span class="line">    <span class="comment">//调用顺序是先调用父类QWidget的构造函数，再调用派生类的构造函数</span></span><br><span class="line">    <span class="comment">//具体可以看https://www.cnblogs.com/findumars/p/9231742.html这篇博客</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　之后便可以设计一下我们的主窗口了，根据本次的要求，我们希望主窗口中有一个标签来显示我们的Hello World与Hello New World，有一个按钮来实现点击按钮转换文字，这样就可以确定我们的MainWidget中会有两个成员控件，一个QLabel一个QPushButton。</p>
<p>　　在MainWidget的声明中添加它们。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MAINWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAINWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="comment">//添加成员变量QPushButton与QLabel标签需要引入QPushButton与QLabel类。</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QPushButton&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QLabel&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MainWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    <span class="comment">//MainWidget类的构造函数 因为使用了explicit所以为显式构造函数</span></span><br><span class="line">    <span class="comment">//c++ 类构造函数默认情况下即声明为implicit(隐式)</span></span><br><span class="line">    <span class="comment">//关于显示与隐式的区别这里就不介绍了，诸位若不知道可以搜索</span></span><br><span class="line"></span><br><span class="line">    QPushButton* button;    <span class="comment">//成员控件按钮</span></span><br><span class="line">    QLabel* label;  <span class="comment">//成员控件标签</span></span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="comment">//这里可以用来声明信号函数</span></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="comment">//这里可以用来声明槽函数</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// MAINWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<p> 　　之后便可以在mainwidget.cpp中编写代码了，我们希望将主窗口设计为一个400*400，文字和按钮显示在中间，文字在按钮上方，在mainwidget.cpp中，MainWidget构造函数处做如下更改 。 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">MainWidget::MainWidget(QWidget *parent) : QWidget(parent)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//显示调用MainWidget构造函数</span></span><br><span class="line">    <span class="comment">//调用顺序是先调用父类QWidget的构造函数，再调用派生类的构造函数</span></span><br><span class="line">    <span class="comment">//具体可以看https://www.cnblogs.com/findumars/p/9231742.html这篇博客</span></span><br><span class="line">    resize(<span class="number">400</span>, <span class="number">400</span>);</span><br><span class="line">    <span class="comment">//设置窗口大小为400px * 400px</span></span><br><span class="line">    label = <span class="keyword">new</span> QLabel(<span class="string">"Hello World!"</span>, <span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//初始化控件lable文字显示为Hello World!， 父对象为当前MainWidget窗口对象</span></span><br><span class="line">    label-&gt;setGeometry(<span class="number">150</span>, <span class="number">100</span>, <span class="number">130</span>, <span class="number">50</span>);</span><br><span class="line">    <span class="comment">//lable的位置在x = 150px y = 100px 宽为100px高为50px</span></span><br><span class="line">    button = <span class="keyword">new</span> QPushButton(<span class="string">"change"</span>, <span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//初始化控件button文字显示为change， 父对象为当前MainWidget窗口对象</span></span><br><span class="line">    button-&gt;setGeometry(<span class="number">150</span>, <span class="number">175</span>, <span class="number">130</span>, <span class="number">50</span>);</span><br><span class="line">    <span class="comment">//button的位置在x = 150px y = 175px 宽为100px高为50px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 　　之后设计主函数，在主函数中构建一个MainWidget窗口w，将它显示出来。 </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    MainWidget w;   <span class="comment">//构建一个MainWidget窗口w</span></span><br><span class="line">    w.show();   <span class="comment">//显示w</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　不要忘记引入QApplication。</p>
<h3 id="以下为当前mainwidget-cpp的全部代码"><a href="#以下为当前mainwidget-cpp的全部代码" class="headerlink" title="　　以下为当前mainwidget.cpp的全部代码"></a>　　以下为当前mainwidget.cpp的全部代码</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mainwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line">MainWidget::MainWidget(QWidget *parent) : QWidget(parent)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//显示调用MainWidget构造函数</span></span><br><span class="line">    <span class="comment">//调用顺序是先调用父类QWidget的构造函数，再调用派生类的构造函数</span></span><br><span class="line">    <span class="comment">//具体可以看https://www.cnblogs.com/findumars/p/9231742.html这篇博客</span></span><br><span class="line">    resize(<span class="number">400</span>, <span class="number">400</span>);</span><br><span class="line">    <span class="comment">//设置窗口大小为400px * 400px</span></span><br><span class="line">    label = <span class="keyword">new</span> QLabel(<span class="string">"Hello World!"</span>, <span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//初始化控件lable文字显示为Hello World!， 父对象为当前MainWidget窗口对象</span></span><br><span class="line">    label-&gt;setGeometry(<span class="number">150</span>, <span class="number">100</span>, <span class="number">130</span>, <span class="number">50</span>);</span><br><span class="line">    <span class="comment">//lable的位置在x = 150px y = 100px 宽为100px高为50px</span></span><br><span class="line">    button = <span class="keyword">new</span> QPushButton(<span class="string">"change"</span>, <span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//初始化控件button文字显示为change， 父对象为当前MainWidget窗口对象</span></span><br><span class="line">    button-&gt;setGeometry(<span class="number">150</span>, <span class="number">175</span>, <span class="number">130</span>, <span class="number">50</span>);</span><br><span class="line">    <span class="comment">//button的位置在x = 150px y = 175px 宽为100px高为50px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    MainWidget w;   <span class="comment">//构建一个MainWidget窗口w</span></span><br><span class="line">    w.show();   <span class="comment">//显示w</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　运行一下</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190407152141926-1324001370.png" alt="img"></p>
<p>　　一个符合我们设计要求的窗口已经完成了。</p>
<p>　　之后就要开始完成点击按钮更换文字的功能了，这里就用到了信号和槽的知识。</p>
<p>　　在QObject类中有一个connect函数其中要求传入四个参数，第一个参数为被用户操作的对象（发出信号的对象当前为我们的change按钮），第二个参数是一个被操作信号（当前为按钮被点击clicked()），第三个参数是我们要进行操作的对象（接受信号的对象当前为我们的主窗体w），第四个参数为对应的槽函数（这就需要我们自己设计一个槽函数了，我们将这个槽函数命名为changeText）。</p>
<p>　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QObject::connect(w.button, SIGNAL(clicked()), &amp;w, SLOT(changeText()));</span><br></pre></td></tr></table></figure>
<p>　　当然，Qt中QObject是绝大多数类的基类，包括QWidget，而我们的MainWidget又是QWidget的子类，所以如下写法依然正确。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MainWidget::connect(w.button, SIGNAL(clicked()), &amp;w, SLOT(changeText()));</span><br></pre></td></tr></table></figure>
<p>　　之后我们就要在MainWidget的声明中去声明和定义槽函数了（可以只声明，在mainwidget.cpp中定义）。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public slots:</span><br><span class="line">    &#x2F;&#x2F;这里可以用来声明槽函数</span><br><span class="line">    void changeText()&#123;</span><br><span class="line">        label-&gt;setText(&quot;Hello New World!&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>　　运行一下</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190407154617832-1219284277.png" alt="img"></p>
<p>　　点击change</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190407154646019-1773784269.png" alt="img"></p>
<p>　　完整代码：</p>
<p>　　HelloNewWorld.pro:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">QT +&#x3D; widgets</span><br><span class="line"></span><br><span class="line">HEADERS +&#x3D; \</span><br><span class="line">    mainwidget.h</span><br><span class="line"></span><br><span class="line">SOURCES +&#x3D; \</span><br><span class="line">    mainwidget.cpp</span><br></pre></td></tr></table></figure>
<p> 　　mainwidget.h: </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MAINWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAINWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="comment">//添加成员变量QPushButton与QLabel标签需要引入QPushButton与QLabel类。</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QPushButton&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QLabel&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainWidget</span> :</span> <span class="keyword">public</span> QWidget   <span class="comment">//MainWidget的声明</span></span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">MainWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    <span class="comment">//MainWidget类的构造函数 因为使用了explicit所以为显式构造函数</span></span><br><span class="line">    <span class="comment">//c++ 类构造函数默认情况下即声明为implicit(隐式)</span></span><br><span class="line">    <span class="comment">//关于显示与隐式的区别这里就不介绍了，诸位若不知道可以搜索</span></span><br><span class="line"></span><br><span class="line">    QPushButton* button;    <span class="comment">//成员控件按钮</span></span><br><span class="line">    QLabel* label;  <span class="comment">//成员控件标签</span></span><br><span class="line"></span><br><span class="line">signals:</span><br><span class="line">    <span class="comment">//这里可以用来声明信号函数</span></span><br><span class="line"><span class="keyword">public</span> slots:</span><br><span class="line">    <span class="comment">//这里可以用来声明槽函数</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">changeText</span><span class="params">()</span></span>&#123;</span><br><span class="line">        label-&gt;setText(<span class="string">"Hello New World!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// MAINWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<p> 　　mainwidget.cpp: </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"mainwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;QApplication&gt;</span></span></span><br><span class="line"></span><br><span class="line">MainWidget::MainWidget(QWidget *parent) : QWidget(parent)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//显示调用MainWidget构造函数</span></span><br><span class="line">    <span class="comment">//调用顺序是先调用父类QWidget的构造函数，再调用派生类的构造函数</span></span><br><span class="line">    <span class="comment">//具体可以看https://www.cnblogs.com/findumars/p/9231742.html这篇博客</span></span><br><span class="line">    resize(<span class="number">400</span>, <span class="number">400</span>);</span><br><span class="line">    <span class="comment">//设置窗口大小为400px * 400px</span></span><br><span class="line">    label = <span class="keyword">new</span> QLabel(<span class="string">"Hello World!"</span>, <span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//初始化控件lable文字显示为Hello World!， 父对象为当前MainWidget窗口对象</span></span><br><span class="line">    label-&gt;setGeometry(<span class="number">150</span>, <span class="number">100</span>, <span class="number">130</span>, <span class="number">50</span>);</span><br><span class="line">    <span class="comment">//lable的位置在x = 150px y = 100px 宽为100px高为50px</span></span><br><span class="line">    button = <span class="keyword">new</span> QPushButton(<span class="string">"change"</span>, <span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">//初始化控件button文字显示为change， 父对象为当前MainWidget窗口对象</span></span><br><span class="line">    button-&gt;setGeometry(<span class="number">150</span>, <span class="number">175</span>, <span class="number">130</span>, <span class="number">50</span>);</span><br><span class="line">    <span class="comment">//button的位置在x = 150px y = 175px 宽为100px高为50px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span></span>&#123;</span><br><span class="line">    <span class="function">QApplication <span class="title">app</span><span class="params">(argc, argv)</span></span>;</span><br><span class="line"></span><br><span class="line">    MainWidget w;   <span class="comment">//构建一个MainWidget窗口w</span></span><br><span class="line">    w.show();   <span class="comment">//显示w</span></span><br><span class="line"></span><br><span class="line">    QObject::connect(w.button, SIGNAL(clicked()), &amp;w, SLOT(changeText()));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> app.exec();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/02/PTA-Advanced-Level-1005-Spell-It-Right/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/02/PTA-Advanced-Level-1005-Spell-It-Right/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1005 Spell It Right</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-02 12:41:48" itemprop="dateCreated datePublished" datetime="2019-04-02T12:41:48+08:00">2019-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　Given a non-negative integer N, your task is to compute the sum of all the digits of N, and output every digit of the sum in English.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>　　Each input file contains one test case. Each case occupies one line which contains an N (≤).</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>　　For each test case, output in one line the digits of the sum in English words. There must be one space between two consecutive words, but no extra space at the end of a line.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">12345</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">one five</span><br></pre></td></tr></table></figure>
<p>题目解析</p>
<p>　　本题给出一个小于10的100次方的数字，要求计算其每一位的数字的和，并由最大为开始以英文输出和的每一位。</p>
<p>　　将给出的数字记录在字符串num中计算字符串每一位减去字符’0’后的和即可得到给出数字每一位的和，以字符串数组str[ ]记录其下标数字对应的英文单词。</p>
<p>　　最后将得到的和每一位对应的单词记录并输出即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">string</span> str[<span class="number">10</span>] = &#123;<span class="string">"zero"</span>, <span class="string">"one"</span>, <span class="string">"two"</span>, <span class="string">"three"</span>, <span class="string">"four"</span>, <span class="string">"five"</span>, <span class="string">"six"</span>, <span class="string">"seven"</span>, <span class="string">"eight"</span>, <span class="string">"nine"</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getSum</span><span class="params">(<span class="built_in">string</span> num)</span></span>&#123; <span class="comment">//计算给出数字每一位的和</span></span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i : num)</span><br><span class="line">        ans += i - <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span> num;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; num; <span class="comment">//输入num</span></span><br><span class="line">    <span class="keyword">int</span> sum = getSum(num);  <span class="comment">//求每一位的和</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ans; <span class="comment">//记录sum每一位对应的英文单词</span></span><br><span class="line">    <span class="keyword">do</span>&#123; <span class="comment">//由于可能出现sum为0的情况，所以用do while</span></span><br><span class="line">        ans.push_back(str[sum % <span class="number">10</span>]);</span><br><span class="line">        sum /= <span class="number">10</span>;</span><br><span class="line">    &#125;<span class="keyword">while</span>(sum);</span><br><span class="line">    reverse(ans.begin(), ans.end());    <span class="comment">//由于记录时时由低位到高位记录，所以将其反转ans</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; ans.size(); i++)&#123;    <span class="comment">//输出答案</span></span><br><span class="line">        <span class="keyword">if</span>(i != <span class="number">0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; ans[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/01/PTA-Advanced-Level-1003-Emergency/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/01/PTA-Advanced-Level-1003-Emergency/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1003 Emergency</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-01 12:29:36" itemprop="dateCreated datePublished" datetime="2019-04-01T12:29:36+08:00">2019-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　As an emergency rescue team leader of a city, you are given a special map of your country. The map shows several scattered cities connected by some roads. Amount of rescue teams in each city and the length of each road between any pair of cities are marked on the map. When there is an emergency call to you from some other city, your job is to lead your men to the place as quickly as possible, and at the mean time, call up as many hands on the way as possible.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>　　Each input file contains one test case. For each test case, the first line contains 4 positive integers: N (≤) - the number of cities (and the cities are numbered from 0 to N−1), M- the number of roads, C1 and C2 - the cities that you are currently in and that you must save, respectively. The next line contains N integers, where the i-th integer is the number of rescue teams in the i-th city. Then M lines follow, each describes a road with three integers c1, c2 and L, which are the pair of cities connected by a road and the length of that road, respectively. It is guaranteed that there exists at least one path from C1 to C2.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>　　For each test case, print in one line two numbers: the number of different shortest paths between C1 and C2, and the maximum amount of rescue teams you can possibly gather. All the numbers in a line must be separated by exactly one space, and there is no extra space allowed at the end of a line.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">5 6 0 2</span><br><span class="line">1 2 1 5 3</span><br><span class="line">0 1 1</span><br><span class="line">0 2 2</span><br><span class="line">0 3 1</span><br><span class="line">1 2 1</span><br><span class="line">2 4 1</span><br><span class="line">3 4 1</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 4</span><br></pre></td></tr></table></figure>
<p>题目解析</p>
<p>  本题有若干个城市与若干条连接城市的道路，每个城市中会有一定数量的救援队，要求解初给出两城市之间的最短路条数，并求出在最短路的情况下所能聚集的救援队的最大数量。</p>
<p>​    第一行给出4个正整数，分别为N(&lt;=500)-城市数量（城市编号由0 ~ N-1，M-道路的条数，C1、C2 – 给出的两个城市。第二行给出N个整数，分别为第0 ~ N-1号城市所拥有的救援队数量。之后给随M行表示道路信息，每行包括道路两端的城市c1、 c2 与道路长度L。</p>
<p>​    由于城市最高数量只有500，所以可以之间用一个二维数组来储存道路信息，用一维数组teamCnt储存每个城市所拥有的救援队数量，vector<int>pre[i] 存储i城市的前驱城市，之后dijkstra获取每个城市的前驱，这样便可以构建出一张由最短路径组成的邻接表。之后dfs这张邻接表获取C1到C2的最短路径数量与最多课聚集救援队数量即可。</int></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">550</span>;</span><br><span class="line"><span class="keyword">int</span> n, m, c1, c2;</span><br><span class="line"><span class="keyword">int</span> G[MAX][MAX];</span><br><span class="line"><span class="keyword">int</span> teamCnt[MAX];</span><br><span class="line"><span class="keyword">int</span> d[MAX];</span><br><span class="line"><span class="keyword">bool</span> vis[MAX] = &#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pre[MAX];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> bg)</span></span>&#123;</span><br><span class="line">    fill(d, d + n, INT_MAX);    <span class="comment">//初始化起点到任何点的距离都为正无穷</span></span><br><span class="line">    d[bg] = <span class="number">0</span>;  <span class="comment">//起点到本身的距离为0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n ; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> minCity = <span class="number">-1</span>, minDis = INT_MAX;</span><br><span class="line">        <span class="comment">//minCity保存最近的城市    minDis保存最近的距离</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)&#123; <span class="comment">//找到当前还未访问过的距离起点最近的城市</span></span><br><span class="line">            <span class="keyword">if</span>(d[j] &lt; minDis &amp;&amp; !vis[j])&#123;</span><br><span class="line">                minDis = d[j];</span><br><span class="line">                minCity = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(minCity == <span class="number">-1</span>)   <span class="comment">//若minCity为-1证明其他城市都不与起点连通</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        vis[minCity] = <span class="literal">true</span>;    <span class="comment">//将找出的最近城市标记为已访问</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> next = <span class="number">0</span>; next &lt; n; next++)&#123;    <span class="comment">//遍历所有点</span></span><br><span class="line">            <span class="keyword">if</span>(!vis[next] &amp;&amp; d[next] &gt; d[minCity] + G[minCity][next] &amp;&amp; G[minCity][next] != <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//若存在未访问的点next 与起点之间的距离可被minCity优化 优化该点</span></span><br><span class="line">                d[next] = d[minCity] + G[minCity][next];</span><br><span class="line">                pre[next].clear();</span><br><span class="line">                pre[next].push_back(minCity);</span><br><span class="line">                <span class="comment">//将next的前驱清空并将minCity计入next的前驱</span></span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(!vis[next] &amp;&amp; d[next] == d[minCity] + G[minCity][next] &amp;&amp; G[minCity][next] != <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="comment">//若存在未访问的点next 与起点之间的距离和以minCity为中转的距离相等</span></span><br><span class="line">                pre[next].push_back(minCity);</span><br><span class="line">                <span class="comment">//将minCity计入next的前驱</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> maxTeamCnt = INT_MIN;</span><br><span class="line"><span class="comment">//记录最大聚集救援队数量</span></span><br><span class="line"><span class="keyword">int</span> roadCnt = <span class="number">0</span>;</span><br><span class="line"><span class="comment">//记录最短路数量</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> ed, <span class="keyword">int</span> nowTeamCnt)</span></span>&#123;   <span class="comment">//由终点向起点搜索 nowTeamCnt表示当前聚集的救援队数量</span></span><br><span class="line">    <span class="keyword">if</span>(ed == c1)&#123;   <span class="comment">//若搜索到起点</span></span><br><span class="line">        maxTeamCnt = max(maxTeamCnt, nowTeamCnt);   <span class="comment">//获取最大聚集数量</span></span><br><span class="line">        roadCnt++;  <span class="comment">//最短路加一</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i : pre[ed])&#123;  <span class="comment">//遍历ed的前驱</span></span><br><span class="line">        <span class="keyword">if</span>(!vis[i])&#123;    <span class="comment">//若前驱还每有被计入道路</span></span><br><span class="line">            vis[i] = <span class="literal">true</span>;</span><br><span class="line">            dfs(i, nowTeamCnt + teamCnt[i]);</span><br><span class="line">            vis[i] = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d%d"</span>, &amp;n, &amp;m, &amp;c1, &amp;c2);</span><br><span class="line">    <span class="comment">//输入城市数量n 道路数量m 要计算最短路的城市c1与c2</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)  <span class="comment">//输入每个城市的救援队数量</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;teamCnt[i]);</span><br><span class="line">    <span class="built_in">memset</span>(G, <span class="number">0</span>, <span class="keyword">sizeof</span>(G));    <span class="comment">//初始化任意两个城市之间距离为0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123; <span class="comment">//输入道路信息</span></span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>, &amp;u, &amp;v);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;G[u][v]);</span><br><span class="line">        G[v][u] = G[u][v];</span><br><span class="line">    &#125;</span><br><span class="line">    dijkstra(c1);   <span class="comment">//最短路以c1为起点获取前驱</span></span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">    dfs(c2, teamCnt[c2]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, roadCnt, maxTeamCnt);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/03/29/PTA-Advanced-Level-1002-A-B-for-Polynomials/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/03/29/PTA-Advanced-Level-1002-A-B-for-Polynomials/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1002 A+B for Polynomials</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-29 19:12:54" itemprop="dateCreated datePublished" datetime="2019-03-29T19:12:54+08:00">2019-03-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　This time, you are supposed to find A+B where A and B are two polynomials.</p>
<p><strong>Input Specification:</strong></p>
<p>　　Each input file contains one test case. Each case occupies 2 lines, and each line contains the information of a polynomial:</p>
<p>　　K N1 aN1 N2 aN2 … NK aNK</p>
<p>　　where K is the number of nonzero terms in the polynomial, Ni and aNi (,) are the exponents and coefficients, respectively. It is given that 1，0.</p>
<p><strong>Output Specification:</strong></p>
<p>　　For each test case you should output the sum of A and B in one line, with the same format as the input. Notice that there must be NO extra space at the end of each line. Please be accurate to 1 decimal place.</p>
<p><strong>Sample Input:</strong></p>
<p>2 1 2.4 0 3.2</p>
<p>2 2 1.5 1 0.5</p>
<p><strong>Sample Output:</strong></p>
<p>3 2 1.5 1 2.9 0 3.2</p>
<p>题目解析</p>
<p>  本题给出两个多项式，每个多项式按照 项数K 指数N1 系数aN1 指数N2 系数aN2 …… 指数NK 系数aNK 的方式给出，要求计算两个多项式的和。</p>
<p>​    用一个double型ans来记录两个多项式的和 （下标为指数，下标对应的和为系数），每输入一组指数与系数，就将系数加入ans中对应项中去。在输入数据时应记录输入的最大指数与最小指数。</p>
<p>​    遍历ans由最小指数到最大指数，获取系数不为0的项数记为cnt，cnt便是两个多项式的和的项数。</p>
<p>​    出数cnt，由最大指数到最小指数遍历并输出每一个系数不为0的项即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX= <span class="number">1e5</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">double</span> ans[MAX];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);    <span class="comment">//输入多项式A的项数</span></span><br><span class="line">    <span class="keyword">int</span> maxe = INT_MIN, mine = INT_MAX;</span><br><span class="line">    <span class="comment">//maxe保存最大指数    mine保存最小指数</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123; <span class="comment">//输入多项式a</span></span><br><span class="line">        <span class="keyword">int</span> ea; <span class="comment">//指数</span></span><br><span class="line">        <span class="keyword">double</span> temp;    <span class="comment">//系数</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;ea);   </span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lf"</span>, &amp;temp);</span><br><span class="line">        ans[ea] += temp;    <span class="comment">//系数加入ans中对应项</span></span><br><span class="line">        maxe = max(maxe, ea);   <span class="comment">//记录最大指数</span></span><br><span class="line">        mine = min(mine, ea);   <span class="comment">//记录最小指数</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);    <span class="comment">//输入多项式b</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> eb; <span class="comment">//指数</span></span><br><span class="line">        <span class="keyword">double</span> temp;    <span class="comment">//系数</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;eb);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lf"</span>, &amp;temp);</span><br><span class="line">        ans[eb] += temp;    <span class="comment">//系数加入ans中对应项</span></span><br><span class="line">        maxe = max(maxe, eb);   <span class="comment">//记录最大指数</span></span><br><span class="line">        mine = min(mine, eb);   <span class="comment">//记录最小指数</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//cnt记录A+B的项数</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = mine; i &lt;= maxe; i++)&#123;  <span class="comment">//由最小指数到最大指数遍历ans</span></span><br><span class="line">        <span class="keyword">if</span>(ans[i] != <span class="number">0.0</span>)   <span class="comment">//若某项系数不为0则项数加1</span></span><br><span class="line">            cnt++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, cnt);  <span class="comment">//输出cnt</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = maxe; i &gt;= mine; i--)&#123;  <span class="comment">//由最大指数到最小指数遍历并输出每一个系数不为0的项</span></span><br><span class="line">        <span class="keyword">if</span>(ans[i] != <span class="number">0.0</span>)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">" %d %.1f"</span>, i, ans[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SUVVM"
      src="/images/ortrait.jpg">
  <p class="site-author-name" itemprop="name">SUVVM</p>
  <div class="site-description" itemprop="description">SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">146</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">81</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/suvvm" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;suvvm" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/suvvm@foxmail.com" title="E-Mail → suvvm@foxmail.com"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SUVVM</span>
	<a href="http://www.beian.miit.gov.cn/"  style="color:#f72b07" target="_blank">鲁ICP备19040043号-2</a>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  

  

</body>
</html>
