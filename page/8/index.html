<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/ortrait.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/ortrait.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/ortrait.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.suvvm.work","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
<meta property="og:type" content="website">
<meta property="og:title" content="SUVVM">
<meta property="og:url" content="https://www.suvvm.work/page/8/index.html">
<meta property="og:site_name" content="SUVVM">
<meta property="og:description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="SUVVM">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://www.suvvm.work/page/8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>SUVVM</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e5190116d64be66cac29daef18c94ac0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">SUVVM</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">呜嗷SUVVM</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="calendar fa-fw"></i>日程表</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/11/09/C-%E5%A4%A7%E6%95%B4%E6%95%B0%E8%BF%90%E7%AE%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/09/C-%E5%A4%A7%E6%95%B4%E6%95%B0%E8%BF%90%E7%AE%97/" class="post-title-link" itemprop="url">C++大整数运算</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-09 21:07:58" itemprop="dateCreated datePublished" datetime="2019-11-09T21:07:58+08:00">2019-11-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>加法运算：以两个数中较大的数的长度为边界进行遍历，由最低位开始按位进行加法运算，将对应位相加并记录进位，在下一位进行相加运算时再加上进位即可。 </p>
<p> 减法运算：同样以两个数中较长的长度为边界进行遍历，按位进行减法运算，不够减则从前一位借位。最终不要忘记消去最高位的0  </p>
<p>倍增（数量级在int内）运算：选择一个数进行遍历，将其每位依次乘另一个数，将产生的结果的个位作为结果，除个位外其他位作为进位。 </p>
<p> 除法（大整数除以普通数）运算：从被除数最高位开始遍历，每一个位与上一位遗留的余数结合后进行除法运算。  比较：优先比较长度，长度相同则由高位向下比较。  </p>
<p>相乘：使用分治思想   假设现有大整数A与大整数B要做乘法运算，如果依照暴力过一切的思想去遍历相乘时间复杂度将变为O(n^2)所以这里使用分治思想。  将长度为n的大数a分为两部分  若n为偶数则可以将a分为长度为$\frac n2$的两段$a_0$与$a_1$  若n为奇数则a0的长度为$\frac {n+1}2$,$a_1$长度为$ \frac n2 $ $a = a_0 \times 10^{\frac n2} + a_1$  则$a \times b$同样可以分为 </p>
<script type="math/tex; mode=display">
a \times b = [a_0 \times 10^{\frac {n_1}2} + a_1] \times [b_0 \times 10^{\frac {n_2}2} + b_1]\\ =  a_0 \times b_0 \times 10^{\frac {n_1}2+\frac {n_2}2}+a_0 \times b_1 \times 10^{\frac {n_1}2} + a_1 \times b_0 \times 10^{\frac {n_2}2}+a_1 \times b_1</script><p>对于新出现的 $a_0 \times b_0 \ \ a_0 \times b_1 \ \ a_1 \times b_0 \ \ a_1\ \times b_1$用相同的方法递归解决即可以。</p>
<p>附上代码</p>
  <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/********************************************************************************</span></span><br><span class="line"><span class="comment">* @File: 大面值数据处理</span></span><br><span class="line"><span class="comment">* @Author: suvvm</span></span><br><span class="line"><span class="comment">* @blog: www.suvvm.work</span></span><br><span class="line"><span class="comment">* @github: https://github.com/suvvm</span></span><br><span class="line"><span class="comment">* @email: suvvm@foxmail.com</span></span><br><span class="line"><span class="comment">* @Version: 1.0.0</span></span><br><span class="line"><span class="comment">* @Date: 2019-11-07</span></span><br><span class="line"><span class="comment">* @Description: 2019第2学期算法设计与分析分治实验1第2项</span></span><br><span class="line"><span class="comment">********************************************************************************/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1000</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxz = <span class="number">1e6</span>+<span class="number">10</span>;</span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* ClassName:BigNum</span></span><br><span class="line"><span class="comment">* Description: 存储大数</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@num	大数具体值（为了方便运算采取低位在前的存储方式）</span></span><br><span class="line"><span class="comment">* 	@len	大数位数</span></span><br><span class="line"><span class="comment">* 	@BigNum	无参构造，将其初始化为0</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">BigNum</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> num[maxn];</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    BigNum()&#123;</span><br><span class="line">        <span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="keyword">sizeof</span>(num));</span><br><span class="line">        len = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName:change</span></span><br><span class="line"><span class="comment">* Description: 将C++ string转换为BigNum</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@temp	传入的字符串</span></span><br><span class="line"><span class="comment">* Return:</span></span><br><span class="line"><span class="comment">*   返回转换后的BigNum</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function">BigNum <span class="title">change</span><span class="params">(<span class="built_in">string</span> temp)</span></span>&#123;</span><br><span class="line">    BigNum a;</span><br><span class="line">    a.len = temp.size();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.len; i++)</span><br><span class="line">        a.num[i] = temp[a.len - i - <span class="number">1</span>] - <span class="string">'0'</span>;</span><br><span class="line">    <span class="keyword">return</span> a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName:compare</span></span><br><span class="line"><span class="comment">* Description: 比较两个BigNum的大小</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@a	需要比较的参数1</span></span><br><span class="line"><span class="comment">*   @b  需要比较的参数2</span></span><br><span class="line"><span class="comment">* Return:</span></span><br><span class="line"><span class="comment">*   参数1大于参数2返回(int)1</span></span><br><span class="line"><span class="comment">*   参数2大于参数1返回(int)-1</span></span><br><span class="line"><span class="comment">*   相等返回(int)0</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(BigNum a, BigNum b)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a.len &gt; b.len)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(a.len &lt; b.len)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = a.len <span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(a.num[i] &gt; b.num[i])</span><br><span class="line">                <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(a.num[i] &lt; b.num[i])</span><br><span class="line">                <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName:add</span></span><br><span class="line"><span class="comment">* Description: 两个BigNum大数相加</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@a	要进行加法运算的BigNum1</span></span><br><span class="line"><span class="comment">*   @b  要进行加法运算的BigNum2</span></span><br><span class="line"><span class="comment">* Return:</span></span><br><span class="line"><span class="comment">*   返回相加后的BigNum</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function">BigNum <span class="title">add</span><span class="params">(BigNum a, BigNum b)</span></span>&#123;</span><br><span class="line">    BigNum c;</span><br><span class="line">    <span class="keyword">int</span> carry = <span class="number">0</span>;<span class="comment">//进位</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.len || i &lt; b.len; i++)&#123;<span class="comment">//以较长的长度为界限</span></span><br><span class="line">        <span class="keyword">int</span> temp = a.num[i] + b.num[i] + carry;<span class="comment">//两个位置相加后加上进位</span></span><br><span class="line">        c.num[c.len++] = temp % <span class="number">10</span>;</span><br><span class="line">        carry = temp / <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(carry != <span class="number">0</span>)</span><br><span class="line">        c.num[c.len++] = carry;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName:sub</span></span><br><span class="line"><span class="comment">* Description: 两个BigNum大数相减</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@a	被减数</span></span><br><span class="line"><span class="comment">*   @b  减数</span></span><br><span class="line"><span class="comment">* Return:</span></span><br><span class="line"><span class="comment">*   返回相减后的BigNum</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function">BigNum <span class="title">sub</span><span class="params">(BigNum a, BigNum b)</span></span>&#123;</span><br><span class="line">    BigNum c;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.len || i &lt; b.len; i++)&#123;<span class="comment">//较长为界</span></span><br><span class="line">        <span class="keyword">if</span>(a.num[i] &lt; b.num[i])&#123;<span class="comment">//如果不够减</span></span><br><span class="line">            a.num[i + <span class="number">1</span>]--;<span class="comment">//借位</span></span><br><span class="line">            a.num[i] += <span class="number">10</span>;<span class="comment">//加10</span></span><br><span class="line">        &#125;</span><br><span class="line">        c.num[c.len++] = a.num[i] - b.num[i];<span class="comment">//相减结果为当前位结果</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(c.len - <span class="number">1</span> &gt;= <span class="number">1</span> &amp;&amp; c.num[c.len - <span class="number">1</span>] == <span class="number">0</span>)</span><br><span class="line">        c.len--;<span class="comment">//去除最高位的0</span></span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName: multi</span></span><br><span class="line"><span class="comment">* Description: 将BigNum扩大指定倍数（int）</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@a	要扩大的BigNum</span></span><br><span class="line"><span class="comment">*   @b  扩大倍数</span></span><br><span class="line"><span class="comment">* Return:</span></span><br><span class="line"><span class="comment">*   返回扩大后的BigNum</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function">BigNum <span class="title">multi</span><span class="params">(BigNum a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">    BigNum c;</span><br><span class="line">    <span class="keyword">int</span> carry = <span class="number">0</span>;<span class="comment">//进位</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a.len; i++)&#123;<span class="comment">//a每位依次乘b</span></span><br><span class="line">        <span class="keyword">int</span> temp = a.num[i] * b + carry;</span><br><span class="line">        c.num[c.len++] = temp % <span class="number">10</span>;<span class="comment">//temp个位作为该位结果</span></span><br><span class="line">        carry = temp / <span class="number">10</span>;<span class="comment">//temp高位作为进位</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(carry != <span class="number">0</span>)&#123;<span class="comment">//乘法的进位可能不止一位</span></span><br><span class="line">        c.num[c.len++] = carry % <span class="number">10</span>;</span><br><span class="line">        carry /= <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">int</span> mod = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;r = mod;</span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName: divide</span></span><br><span class="line"><span class="comment">* Description: 大数除int内数字</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@a	被除数</span></span><br><span class="line"><span class="comment">*   @b  除数</span></span><br><span class="line"><span class="comment">*   @r  余数</span></span><br><span class="line"><span class="comment">* Return:</span></span><br><span class="line"><span class="comment">*   返回相除后的BigNum</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function">BigNum <span class="title">divide</span><span class="params">(BigNum a, <span class="keyword">int</span> b, <span class="keyword">int</span> &amp;r)</span></span>&#123;<span class="comment">//r为余数</span></span><br><span class="line">    BigNum c;</span><br><span class="line">    c.len = a.len;<span class="comment">//被除数和商的每一位是一一对应的，所以先令长度相等</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = a.len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;<span class="comment">//从最高位开始</span></span><br><span class="line">        r = r * <span class="number">10</span> + a.num[i];<span class="comment">//每一位和上一位遗留的余数组合</span></span><br><span class="line">        <span class="keyword">if</span>(r &lt; b)</span><br><span class="line">            c.num[i] = <span class="number">0</span>;<span class="comment">//若不够除该位为0</span></span><br><span class="line">        <span class="keyword">else</span>&#123;<span class="comment">//够除</span></span><br><span class="line">            c.num[i] = r / b;<span class="comment">//得到该位的商</span></span><br><span class="line">            r = r % b;<span class="comment">//新的余数</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(c.len - <span class="number">1</span> &gt;= <span class="number">1</span> &amp;&amp; c.num[c.len - <span class="number">1</span>] == <span class="number">0</span>)</span><br><span class="line">        c.len--;<span class="comment">//去除最高位的0</span></span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName: rmZero</span></span><br><span class="line"><span class="comment">* Description: 在传入大数前方去除0</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@a	要去除0的大数</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rmZero</span><span class="params">(BigNum &amp;a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(a.len - <span class="number">1</span> &gt;= <span class="number">1</span> &amp;&amp; a.num[a.len - <span class="number">1</span>] == <span class="number">0</span>)</span><br><span class="line">        a.len--;<span class="comment">//去除最高位的0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName: addAfterZero</span></span><br><span class="line"><span class="comment">* Description: 在传入大数后方添加0</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@a	要添加0的大数</span></span><br><span class="line"><span class="comment">*   @l  要添加0的数量</span></span><br><span class="line"><span class="comment">* Return:</span></span><br><span class="line"><span class="comment">*   返回添加0后的BigNum</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function">BigNum <span class="title">addAfterZero</span><span class="params">(BigNum a, <span class="keyword">int</span> l)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp[maxn];</span><br><span class="line">    BigNum res;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++) &#123;</span><br><span class="line">        tmp[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memcpy</span>(res.num, tmp, <span class="keyword">sizeof</span>(tmp));</span><br><span class="line">    <span class="built_in">memcpy</span>(res.num + l, a.num, <span class="keyword">sizeof</span>(a.num));</span><br><span class="line">    res.len = l + a.len;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName: addBeforeZero</span></span><br><span class="line"><span class="comment">* Description: 在传入大数前方添加0</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@a	要添加0的大数</span></span><br><span class="line"><span class="comment">*   @l  要添加0的数量</span></span><br><span class="line"><span class="comment">* Return:</span></span><br><span class="line"><span class="comment">*   返回添加0后的BigNum</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function">BigNum <span class="title">addBeforeZero</span><span class="params">(BigNum a, <span class="keyword">int</span> l)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp[maxn];</span><br><span class="line">    BigNum res;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; l; i++) &#123;</span><br><span class="line">        tmp[i] = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memcpy</span>(res.num, a.num, <span class="keyword">sizeof</span>(a.num));</span><br><span class="line">    <span class="built_in">memcpy</span>(res.num + a.len, tmp, <span class="keyword">sizeof</span>(tmp));</span><br><span class="line">    res.len = l + a.len;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName: subBigNum</span></span><br><span class="line"><span class="comment">* Description: 大数截取</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@a	要被截取的大数</span></span><br><span class="line"><span class="comment">*   @bg 开始截取的位置</span></span><br><span class="line"><span class="comment">*   @l  截取的长度</span></span><br><span class="line"><span class="comment">* Return:</span></span><br><span class="line"><span class="comment">*   返回截取后的BigNum</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function">BigNum <span class="title">subBigNum</span><span class="params">(BigNum a, <span class="keyword">int</span> bg, <span class="keyword">int</span> l)</span> </span>&#123;</span><br><span class="line">    BigNum res;</span><br><span class="line">    res.len = l;</span><br><span class="line">    <span class="keyword">int</span> tmp = l<span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = a.len - bg; i &gt; a.len - bg - l; i--)&#123;</span><br><span class="line">        <span class="comment">//cout &lt;&lt; "i:" &lt;&lt; i &lt;&lt; " a.num[i]:" &lt;&lt; a.num[i] &lt;&lt; endl;</span></span><br><span class="line">        res.num[tmp--] = a.num[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* FunctionName: multi_2</span></span><br><span class="line"><span class="comment">* Description: 大数乘法（分治）</span></span><br><span class="line"><span class="comment">* Parameter:</span></span><br><span class="line"><span class="comment">* 	@a	乘数1</span></span><br><span class="line"><span class="comment">*   @b  乘数2</span></span><br><span class="line"><span class="comment">* Return:</span></span><br><span class="line"><span class="comment">*   返回相乘后的BigNum</span></span><br><span class="line"><span class="comment">**********************************************************/</span></span><br><span class="line"><span class="function">BigNum <span class="title">multi_2</span><span class="params">(BigNum a, BigNum b)</span></span>&#123;</span><br><span class="line">    BigNum c;</span><br><span class="line">    <span class="keyword">int</span> n = <span class="number">2</span>;	<span class="comment">// 计算当前大数长度</span></span><br><span class="line">    <span class="keyword">if</span>(a.len &gt; <span class="number">2</span> || b.len &gt; <span class="number">2</span>) &#123;</span><br><span class="line">        n = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">while</span>(n &lt; a.len || n &lt; b.len)	<span class="comment">// n一直乘二直到n大于两数中较长者的长度</span></span><br><span class="line">            n &lt;&lt;= <span class="number">1</span>;</span><br><span class="line">        <span class="comment">// 在大数前方补零直至两者长度都为n</span></span><br><span class="line">        a = addBeforeZero(a, n - a.len);</span><br><span class="line">        b = addBeforeZero(b, n - b.len);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 长度为一则证明当前n依旧为2 将两数长度补至二</span></span><br><span class="line">    <span class="keyword">if</span>(a.len == <span class="number">1</span>)  a = addBeforeZero(a, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(b.len == <span class="number">1</span>)  b = addBeforeZero(b, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span>(n == <span class="number">2</span>)&#123;	<span class="comment">// 当前长度为2</span></span><br><span class="line">        <span class="keyword">int</span> inta = <span class="number">0</span>, intb = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = a.len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;	<span class="comment">// 用inta记录第一个数</span></span><br><span class="line">            inta += a.num[i];</span><br><span class="line">            <span class="keyword">if</span>(i != <span class="number">0</span>)&#123;</span><br><span class="line">                inta *= <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = b.len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)&#123;	<span class="comment">// 用intb记录第二个数</span></span><br><span class="line">            intb += b.num[i];</span><br><span class="line">            <span class="keyword">if</span>(i != <span class="number">0</span>)&#123;</span><br><span class="line">                intb *= <span class="number">10</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> inttmp = inta * intb;	<span class="comment">// 两数相乘</span></span><br><span class="line">        <span class="built_in">string</span> tmp;	<span class="comment">// 将整数转为字符串 当然如果环境支持c11以上也可以直接使用std::itos</span></span><br><span class="line">        <span class="built_in">stringstream</span> sst;</span><br><span class="line">        sst &lt;&lt; inttmp;</span><br><span class="line">        sst &gt;&gt; tmp;</span><br><span class="line">        c = change(tmp);	<span class="comment">// 将当前两数乘积转为大数c</span></span><br><span class="line">        <span class="keyword">return</span> c;	<span class="comment">// 返回大数c</span></span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        BigNum a0, a1, b0, b1, c0, c1, c2;</span><br><span class="line">        a1 = subBigNum(a, <span class="number">1</span>, (n/<span class="number">2</span>));<span class="comment">// a1为大数a的后半部分（我上方大数类中为了方便运算逆序存储）</span></span><br><span class="line">        a0 = subBigNum(a, (n/<span class="number">2</span>+<span class="number">1</span>), a.len - (n/<span class="number">2</span>) );	<span class="comment">// a0为大数a的前半部分</span></span><br><span class="line">        <span class="comment">// b0 b1同理</span></span><br><span class="line">        b1 = subBigNum(b, <span class="number">1</span>, (n/<span class="number">2</span>));</span><br><span class="line">        b0 = subBigNum(b, (n/<span class="number">2</span>+<span class="number">1</span>), b.len - (n/<span class="number">2</span>));</span><br><span class="line">        c2 = multi_2(a1, b1);</span><br><span class="line">        c0 = multi_2(a0, b0);</span><br><span class="line">        c1 = sub(multi_2(add(a0,a1),add(b0,b1)),add(c2, c0));</span><br><span class="line">        c2 = addAfterZero(c2, n);</span><br><span class="line">        c1 = addAfterZero(c1, n / <span class="number">2</span>);</span><br><span class="line">        c = add(add(c2, c1), c0);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    BigNum num1,num2,c,e;</span><br><span class="line">    <span class="built_in">string</span> temp;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; temp;</span><br><span class="line">    num1 = change(temp);</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; temp;</span><br><span class="line">    num2 = change(temp);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"num1: "</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = num1.len<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; num1.num[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"num2: "</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = num2.len<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; num2.num[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"比较大小"</span>;</span><br><span class="line">    <span class="keyword">if</span>(compare(num1, num2) == <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"&gt;"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(compare(num1, num2) == <span class="number">-1</span>)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"&lt;"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"="</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"乘积"</span>;</span><br><span class="line">    BigNum num3 = multi_2(num1, num2);</span><br><span class="line">    rmZero(num3);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = num3.len<span class="number">-1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; num3.num[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"加和"</span> ;</span><br><span class="line">    c = add(num1, num2);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = c.len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">         <span class="built_in">cout</span> &lt;&lt; c.num[i];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"相减"</span> ;</span><br><span class="line">    c = sub(num1, num2);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = c.len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">         <span class="built_in">cout</span> &lt;&lt; c.num[i];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入int值计算与int的乘积（默认使用num1）"</span>;</span><br><span class="line">    <span class="keyword">int</span> mul;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; mul;</span><br><span class="line">    c = multi(num1, mul);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = c.len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; c.num[i];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入int值计算与int的商与余数（默认使用num1）"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; mul;</span><br><span class="line">    c = divide(num1, mul, r);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"商："</span>;</span><br><span class="line">     <span class="keyword">for</span>(<span class="keyword">int</span> i = c.len - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; c.num[i];</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">" 余数"</span> &lt;&lt; r &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/11/06/%E7%9F%A9%E9%98%B5%E8%BF%9E%E4%B9%98%E9%97%AE%E9%A2%98-DP-%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/06/%E7%9F%A9%E9%98%B5%E8%BF%9E%E4%B9%98%E9%97%AE%E9%A2%98-DP-%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/" class="post-title-link" itemprop="url">矩阵连乘问题(DP)原理分析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-06 22:08:46" itemprop="dateCreated datePublished" datetime="2019-11-06T22:08:46+08:00">2019-11-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="矩阵连乘问题（DP）原理分析"><a href="#矩阵连乘问题（DP）原理分析" class="headerlink" title="矩阵连乘问题（DP）原理分析"></a>矩阵连乘问题（DP）原理分析</h1><h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>给定n个可乘的数字矩阵 $A<em>1, A_2,…, A_n $，矩阵 $A_i $ 的规模为 $p</em>{i-1}\times p_i $ 求给定矩阵连乘的最优计算次序，使得计算乘积 $A_1\times A_2 \times … \times A_n $ 所需执行的数乘次数最少.</p>
<h2 id="矩阵乘法规则"><a href="#矩阵乘法规则" class="headerlink" title="矩阵乘法规则"></a>矩阵乘法规则</h2><p>$C=A\times B$ ，如果A为p行r列的矩阵，B为r行q列的矩阵，则根据矩阵乘法规则，A与B相乘后得到的矩阵C将是p行q列的矩阵，对于结果矩阵C中任意元素 $C<em>{ij}: C</em>{ij}= \sum {r \atop k=1} a<em>{ik}b</em>{kj}$ 即：一个元素 $C_{ij}$ 需要做r次乘法，所以若想要获得C中所有元素则需要进行 $p \times q \times r$次乘法。</p>
<p>由于矩阵乘法满足乘法结合律，所以当n个数字矩阵连乘时可以任意更换计算次序，随着计算次序的改变，所需计算的总乘法次数也会跟着改变，具体情况看下图。</p>
<p><img src="/2019/11/06/%E7%9F%A9%E9%98%B5%E8%BF%9E%E4%B9%98%E9%97%AE%E9%A2%98-DP-%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/计算次序1.png" alt="img"></p>
<p><img src="/2019/11/06/%E7%9F%A9%E9%98%B5%E8%BF%9E%E4%B9%98%E9%97%AE%E9%A2%98-DP-%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/计算次序2.png" alt="img"></p>
<p>现在要做的便是设计一种算法，可以求得一种计算次序使得总乘法次数最小。</p>
<h2 id="解法分析"><a href="#解法分析" class="headerlink" title="解法分析"></a>解法分析</h2><p>假设 $A_1\times A_2 \times … \times A_n$ 的最优计算次序会在$A_k$时断开（只是打个比方，就像上方图计算 $A_1 \times A_2 \times A_3 \times A_4$ 时在 $A_1$ 处断开成为 $A_1与A_2 \times (A_3\times A_4)$ 一样）这时对最优计算次序的计算也会断开成为两个子问题 </p>
<script type="math/tex; mode=display">
\left\{ \begin{aligned} 子问题1 & = & 求A_1\times A_2 \times ... \times A_k 的最优计算次序\\ 子问题2 & = & 求A_{k+1}\times A_{k+2} \times ... \times A_n 的最优计算次序\end{aligned} \right.</script><p>因为原问题是两子问题相乘，所以原问题的答案便是俩个子问题的答案加上最后一次两子问题产生的矩阵相乘所需要的乘法次数。根据上方列出的矩阵乘法计算规则 </p>
<script type="math/tex; mode=display">
最后一次需要乘法次数= \\ 子问题1矩阵的行数 \\ \times 子问题2矩阵的列数 \\ \times 计算结果矩阵中一个元素所需的乘法次数</script><p>而</p>
<script type="math/tex; mode=display">
计算结果矩阵中一个元素所需的乘法次数=子问题1矩阵的列数=子问题2矩阵的行数</script><p>这里我们把 $m[i][j]$ 记为最优计算次序下计算 $A<em>i \times A</em>{i+1} \times … \times A_j$ 所需的乘法次数（最少乘法次数）</p>
<p>根据上述假设，我们依旧假设 $A<em>i \times A</em>{i+1} \times … \times A_j$ 的最优计算次序会在 $A_k$ 时断开，这时的两个子问题便是 </p>
<script type="math/tex; mode=display">\left\{ \begin{aligned} 子问题1 & = & 求A_i\times A_{i+1} \times ... \times A_k 的最优计算次序m[i][k]\\ 子问题2 & = & 求A_{k+1}\times A_{k+2} \times ... \times A_j 的最优计算次序m[k+1][j]\end{aligned} \right.</script><p>根据上次假设总结出的公式我们便可以得到 </p>
<script type="math/tex; mode=display">m[i][j]=m[i][k]+m[k+1][j]+最后一次需要乘法次数(子问题1矩阵\times 子问题2矩阵)</script><p>由于在矩阵连乘中，前一个矩阵的列数与后一个矩阵的行数相同，所以这里我们把所有矩阵的行与列属性记录在一个一维数组p中 $P<em>0$ 表示第一个矩阵的行数 $p_1$ 表示第一个矩阵的列数与第二个矩阵的行数，以此类推 $p</em>{n-1}$ 代表第n-1个矩阵的列数与第n个矩阵的行​数。</p>
<script type="math/tex; mode=display">
最后一次所需乘法= \\ 子问题1矩阵的行数（等于A_i的行数） \\ \times 子问题2矩阵的列数（等于A_j的列数） \\ \times 计算结果矩阵中一个元素所需的乘法次数（等于子问题2矩阵的行数等于A_k的列数）\\=p_{i-1} \times p_j \times p_k</script><p>这样便得到了动态规划算法最核心的动态转移方程</p>
<script type="math/tex; mode=display">
m[i][j]=\left\{ \begin{aligned} 0(i = j )\\ m[i][k]+m[k+1][j]+p_{i-1} \times p_j \times p_k(i < j)\end{aligned} \right.</script><p>有了它便可以去写代码了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/" class="post-title-link" itemprop="url">Dijkstra原理分析</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-05 22:01:55" itemprop="dateCreated datePublished" datetime="2019-11-05T22:01:55+08:00">2019-11-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Dijkstra（迪杰斯特拉）"><a href="#Dijkstra（迪杰斯特拉）" class="headerlink" title="Dijkstra（迪杰斯特拉）"></a>Dijkstra（迪杰斯特拉）</h2><p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra1-1.svg" alt="img"></p>
<p>假设给定的源点是A，现在要求的便是源点A到其他所有点的最短路长度</p>
<p>我们初始将所有点看作不连通</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra1-2.svg" alt="img"></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
</tr>
</thead>
<tbody>
<tr>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
</tr>
</tbody>
</table>
</div>
<h3 id="第一次优化"><a href="#第一次优化" class="headerlink" title="第一次优化"></a>第一次优化</h3><p>我们所规定的源点为A，A点到其本身的距离为0。这样我们就找到了第一个距离源点A最近的点，就是A本身，将其标记为红色。</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra1-3.svg" alt="img"></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>0</code></strong></td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
</tr>
</tbody>
</table>
</div>
<h3 id="第二次优化"><a href="#第二次优化" class="headerlink" title="第二次优化"></a>第二次优化</h3><p>之后恢复以A为起点的所有边，更新所有可达点的最短路长度。如下图，可以发现以A为起点的两条边分别通向B与D，根据边权我们可以把B与D到A的最短路长度进行更新，可以发现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A点到B点的最短路长度由无穷大优化为了2</span><br><span class="line">A点到D点的最短路长度由无穷大优化为了1</span><br></pre></td></tr></table></figure>
<p>这时观察所有的点，我们可以发现当前距离A点最近且还没有被标为红色的点便是我们刚刚更新的D。我们便可以确定，A点到D点的最短路径1，将D标记为红色。</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra1-4.svg" alt="img"></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td>2</td>
<td>∞</td>
<td><strong><code>1</code></strong></td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
</tr>
</tbody>
</table>
</div>
<h3 id="第三次优化"><a href="#第三次优化" class="headerlink" title="第三次优化"></a>第三次优化</h3><p>重复之前操作，恢复以D为起点的所有边，以D为跳板更新所有未被标红的可达点的最短路长度，更新后可以发现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A点到C点的最短路长度由无穷大被优化为了3</span><br><span class="line">A点到E点的最短路长度由无穷大被优化为了3</span><br><span class="line">A点到F点的最短路长度由无穷大被优化为了9</span><br><span class="line">A点到G点的最短路长度由无穷大被优化为了5</span><br></pre></td></tr></table></figure>
<p>这时观察所有的点，我们可以发现当前距离A点最近且还没有被标为红色的点是最短路长度为2的点B。我们便可以确定，A点到B点的最短路径2，将B标记为红色。</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra1-5.svg" alt="img"></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td><strong><code>2</code></strong></td>
<td>3</td>
<td><strong>1</strong></td>
<td>3</td>
<td>9</td>
<td>5</td>
</tr>
</tbody>
</table>
</div>
<h3 id="第四次优化"><a href="#第四次优化" class="headerlink" title="第四次优化"></a>第四次优化</h3><p>重复之前操作，恢复以B为起点的所有边，以B为跳板更新所有未被标红的可达点的最短路长度，更新后可以发现没有点可以被更新。</p>
<p>这时观察所有的点，我们可以发现当前距离A点最近且还没有被标为红色的点有两个，分别为最短路长度为3的点C与最短路长度为3的点E。我们可以选任意一个将其标为红色（以已经固定长度的点去优化另一个点，被优化的点的长度一定不会小于优化它的点，所以在这里另一个点一定会在下次优化中被标红）这里我选择点C。</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra1-6.svg" alt="img"></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td><strong>2</strong></td>
<td><strong><code>3</code></strong></td>
<td><strong>1</strong></td>
<td>3</td>
<td>9</td>
<td>5</td>
</tr>
</tbody>
</table>
</div>
<h3 id="第五次优化"><a href="#第五次优化" class="headerlink" title="第五次优化"></a>第五次优化</h3><p>重复之前操作，恢复以C为起点的所有边，以C为跳板更新所有未被标红的可达点的最短路长度，更新后可以发现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A点到F点的最短路长度由无穷大被优化为了8</span><br></pre></td></tr></table></figure>
<p>这时观察所有的点，我们可以发现当前距离A点最近且还没有被标为红色的是上一次没有选择的最短路长度为3的点E。我们便可以确定，A点到E点的最短路径3，将E标记为红色。</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra1-7.svg" alt="img"></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td><strong>2</strong></td>
<td><strong>3</strong></td>
<td><strong>1</strong></td>
<td><strong><code>3</code></strong></td>
<td>8</td>
<td>5</td>
</tr>
</tbody>
</table>
</div>
<h3 id="第六次优化"><a href="#第六次优化" class="headerlink" title="第六次优化"></a>第六次优化</h3><p>依旧是重复之前操作，恢复以E为起点的所有边，以E为跳板更新所有未被标红的可达点的最短路长度，更新后可以发现没有点可以被更新。</p>
<p>依旧是观察所有的点，我们可以发现当前距离A点最近且还没有被标为红色的是最短路长度为5的点G。我们便可以确定，A点到G点的最短路径5，将G标记为红色。</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra1-8.svg" alt="img"></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td><strong>2</strong></td>
<td><strong>3</strong></td>
<td><strong>1</strong></td>
<td><strong>3</strong></td>
<td>8</td>
<td><strong><code>5</code></strong></td>
</tr>
</tbody>
</table>
</div>
<h3 id="第七次优化"><a href="#第七次优化" class="headerlink" title="第七次优化"></a>第七次优化</h3><p>重复之前操作，恢复以G为起点的所有边，以G为跳板更新所有未被标红的可达点的最短路长度，更新后可以发现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">A点到F点的最短路长度由无穷大被优化为了6</span><br></pre></td></tr></table></figure>
<p>依旧是观察所有的点，我们可以发现当前距离A点最近且还没有被标为红色的是最短路长度为5的最后一个点F。我们便可以确定，A点到F点的最短路径6，将F标记为红色，至此所有的点都优化完毕。</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra1-9.svg" alt="img"></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td><strong>2</strong></td>
<td><strong>3</strong></td>
<td><strong>1</strong></td>
<td><strong>3</strong></td>
<td><strong><code>6</code></strong></td>
<td><strong>5</strong></td>
</tr>
</tbody>
</table>
</div>
<h3 id="最短路长度表汇总"><a href="#最短路长度表汇总" class="headerlink" title="最短路长度表汇总"></a>最短路长度表汇总</h3><div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
</tr>
</thead>
<tbody>
<tr>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
</tr>
<tr>
<td><strong><code>0</code></strong></td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
</tr>
<tr>
<td><strong>0</strong></td>
<td>2</td>
<td>∞</td>
<td><strong><code>1</code></strong></td>
<td>∞</td>
<td>∞</td>
<td>∞</td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><strong><code>2</code></strong></td>
<td>3</td>
<td><strong>1</strong></td>
<td>3</td>
<td>9</td>
<td>5</td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><strong>2</strong></td>
<td><strong><code>3</code></strong></td>
<td><strong>1</strong></td>
<td>3</td>
<td>9</td>
<td>5</td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><strong>2</strong></td>
<td><strong>3</strong></td>
<td><strong>1</strong></td>
<td><strong><code>3</code></strong></td>
<td>8</td>
<td>5</td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><strong>2</strong></td>
<td><strong>3</strong></td>
<td><strong>1</strong></td>
<td><strong>3</strong></td>
<td>8</td>
<td><strong><code>5</code></strong></td>
</tr>
<tr>
<td><strong>0</strong></td>
<td><strong>2</strong></td>
<td><strong>3</strong></td>
<td><strong>1</strong></td>
<td><strong>3</strong></td>
<td><strong><code>6</code></strong></td>
<td><strong>5</strong></td>
</tr>
</tbody>
</table>
</div>
<h3 id="不适用情况"><a href="#不适用情况" class="headerlink" title="不适用情况"></a>不适用情况</h3><p>只要图中有任何负权边，dijkstra边不能正确得到预期答案，即使没有负环也不行。</p>
<p>至于为什么，可以从如下图的例子中看出</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra2-1.svg" alt="img"></p>
<p>按照之前的方法进行分析</p>
<p>我们初始将所有点看作不连通</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra2-2.svg" alt="img"></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td>∞</td>
<td>∞</td>
<td>∞</td>
</tr>
</tbody>
</table>
</div>
<h4 id="第一次优化-1"><a href="#第一次优化-1" class="headerlink" title="第一次优化"></a>第一次优化</h4><p>A点到其本身的距离为0。找到了第一个距离源点A最近的点，为A本身，将其标记为红色。</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra2-3.svg" alt="img"></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>0</code></strong></td>
<td>∞</td>
<td>∞</td>
</tr>
</tbody>
</table>
</div>
<h4 id="第二次优化-1"><a href="#第二次优化-1" class="headerlink" title="第二次优化"></a>第二次优化</h4><p>恢复以A为起点的所有边，更新所有可达点的最短路长度。</p>
<p>如下图</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra2-4.svg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A点到B点的最短路长度由无穷大优化为了3</span><br><span class="line">A点到C点的最短路长度由无穷大优化为了2</span><br></pre></td></tr></table></figure>
<p>当前距离A点最近且还没有被标为红色的点是C，A点到C点的最短路径2，将C标记为红色。</p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td>3</td>
<td><strong><code>2</code></strong></td>
</tr>
</tbody>
</table>
</div>
<h4 id="第三次优化-1"><a href="#第三次优化-1" class="headerlink" title="第三次优化"></a>第三次优化</h4><p>恢复以C为起点的所有边，更新所有可达点的最短路长度。</p>
<p>如下图</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra2-5.svg" alt="img"></p>
<p>没有点可以被更新</p>
<p>当前距离A点最近且还没有被标为红色的点是B，A点到B点的最短路径3，将B标记为红色。</p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td><strong><code>3</code></strong></td>
<td><strong>2</strong></td>
</tr>
</tbody>
</table>
</div>
<h4 id="第四次优化-1"><a href="#第四次优化-1" class="headerlink" title="第四次优化"></a>第四次优化</h4><p>恢复以B为起点的所有边，更新所有可达点的最短路长度。</p>
<p>如下图</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra2-6.svg" alt="img"></p>
<p><strong>由于C已经被固定，所以没有点可以被更新！！</strong></p>
<p>当前A点到所有点的最短路长度表</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td><strong>3</strong></td>
<td><strong>2</strong></td>
</tr>
</tbody>
</table>
</div>
<p>所以上表便是dijkstra得出的最终结果，而并不是我们认为的</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td><strong>3</strong></td>
<td><strong>1</strong></td>
</tr>
</tbody>
</table>
</div>
<h3 id="算法实现"><a href="#算法实现" class="headerlink" title="算法实现"></a>算法实现</h3><h4 id="一般实现"><a href="#一般实现" class="headerlink" title="一般实现"></a>一般实现</h4><p>以上方正确示例为例，为了方便处理，我们将A~G这七个字母在算法中以0~6七个点所代替。</p>
<p>我们可以得出下图的输入数据</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra3-1.svg" alt="img"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">7 12</span><br><span class="line">0 1 2</span><br><span class="line">0 3 1</span><br><span class="line">1 3 3</span><br><span class="line">1 4 10</span><br><span class="line">2 0 4</span><br><span class="line">2 5 5</span><br><span class="line">3 2 2</span><br><span class="line">3 4 2</span><br><span class="line">3 5 8</span><br><span class="line">3 6 4</span><br><span class="line">4 6 6</span><br><span class="line">6 5 1</span><br></pre></td></tr></table></figure>
<p>代码实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXV = <span class="number">1e3</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">1e6</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> v, dis;</span><br><span class="line">    Node(<span class="keyword">int</span> tv, <span class="keyword">int</span> tdis)&#123;</span><br><span class="line">        v = tv, dis = tdis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> n;  <span class="comment">//n为顶点数量</span></span><br><span class="line"><span class="keyword">int</span> d[MAXV]; <span class="comment">//存放起点到各点的最短路径长度</span></span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; Adj[MAXV];</span><br><span class="line"><span class="keyword">bool</span> vis[MAXV]; <span class="comment">//标记数组</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">    fill(d, d + MAXV, inf); <span class="comment">//初始化起点到所有点的最短路长度为无穷大</span></span><br><span class="line">    d[s] = <span class="number">0</span>;   <span class="comment">//起点至本身的距离为0</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++)&#123;</span><br><span class="line">        <span class="keyword">int</span> u = <span class="number">-1</span>, mind = inf;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n; j++)&#123; <span class="comment">//寻找距离顶点最近的点</span></span><br><span class="line">            <span class="keyword">if</span>(!vis[j] &amp;&amp; d[j] &lt; mind)&#123;</span><br><span class="line">                u = j;</span><br><span class="line">                mind = d[j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(u == <span class="number">-1</span>) <span class="comment">//若找不到u证明剩下的点与顶点不连通</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        vis[u] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> j : Adj[u])&#123;   <span class="comment">//遍历所有与u连通的点</span></span><br><span class="line">            <span class="keyword">int</span> v = j.v;</span><br><span class="line">            <span class="keyword">if</span>(!vis[v] &amp;&amp; d[u] + j.dis &lt; d[v])&#123; <span class="comment">//以u为中转优化起点到与u连通的点的最短距离</span></span><br><span class="line">                d[v] = d[u] + j.dis;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="keyword">int</span> s;  <span class="comment">//为起点</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;<span class="string">"输入顶点数:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> r;<span class="comment">//路径数</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入路径数:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; r;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; r; i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入路径（格式:端点1 端点2 权值）:"</span>;</span><br><span class="line">        <span class="keyword">int</span> u, v, dis;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; u &gt;&gt; v &gt;&gt; dis;</span><br><span class="line">        Adj[u].push_back(Node(v, dis));</span><br><span class="line">        <span class="comment">//Adj[v].push_back(Node(u, dis));</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入起点:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">    dijkstra(s);</span><br><span class="line">    <span class="keyword">int</span> e;  <span class="comment">//终点</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入终点:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; e;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"最短路长度"</span> &lt;&lt; d[e] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i ++)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">":"</span> &lt;&lt; d[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="堆优化dijkstra"><a href="#堆优化dijkstra" class="headerlink" title="堆优化dijkstra"></a>堆优化dijkstra</h4><p>分析一下上方dijkstra的时间复杂度，设顶点个数n，外层循环为 $ O(n) $，内层循环有寻找距离起点最近的点需要 $ O(n) $，每次枚举被优化点v需要$O(Adj[u].size) $总共需要 $ O(\sum {n-1 \atop u=0} Adj[u].size)=E $，总时间复杂度 $ O(N\times N + E)=O(N^2+E) $</p>
<p>如何去优化它呢？压榨外层循环，根据dijkstra的原理显然是不太现实的，但是根据前的设计dijkstra在每次进行优化时都需要寻找距离起点最近的点，这需要每次都遍历所有的点，这里便可以使用堆优化来降低时间复杂度，可以直接使用STL里的优先队列priority_queue，使距离起点进的点优先出队，这样就可以将内层循环中寻找距离起点最近的点消耗的 $ O(N) $优化为维护优先队列的 $ O(logN) $，这样总时间复杂度就降为了 $ O(NlogN+E) $</p>
<p>代码实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1e6</span>;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">int</span> d[MAXN];</span><br><span class="line"><span class="keyword">bool</span> vis[MAXN];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> v, dis;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> node &amp;tNode) <span class="keyword">const</span>&#123;  <span class="comment">//优先队列默认优先级高的先出队 这里就要通过重载运算符 &lt; 使距离越小优先级越高</span></span><br><span class="line">        <span class="keyword">return</span> dis &gt; tNode.dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;node&gt; Adj[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">    fill(d, d + MAXN, INF); <span class="comment">//初始化起点至所有点距离为无穷大</span></span><br><span class="line">    priority_queue&lt;node&gt; Q;</span><br><span class="line">    d[s] = <span class="number">0</span>;   <span class="comment">//起点至其本身距离为0</span></span><br><span class="line">    Q.push(node&#123;s, <span class="number">0</span>&#125;); <span class="comment">//这里node中v代表的是当前顶点，dis代表其与起点的距离</span></span><br><span class="line">    <span class="keyword">while</span>(!Q.empty())&#123;</span><br><span class="line">        node f = Q.top();</span><br><span class="line">        Q.pop();</span><br><span class="line">        <span class="keyword">int</span> u = f.v;</span><br><span class="line">        <span class="keyword">if</span>(vis[u])  <span class="comment">//如果u已经标记则继续出队</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        vis[u] = <span class="literal">true</span>;  <span class="comment">//将u标记</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : Adj[u])&#123;   <span class="comment">//遍历所有与u相邻的顶点</span></span><br><span class="line">            <span class="keyword">int</span> v = i.v;</span><br><span class="line">            <span class="keyword">int</span> dis = i.dis;</span><br><span class="line">            <span class="keyword">if</span>(!vis[v] &amp;&amp; d[u] + dis &lt; d[v])&#123;   <span class="comment">//如果可以以u为中转优化起点到对应点的距离</span></span><br><span class="line">                d[v] = d[u] + dis;      <span class="comment">//执行松弛操作</span></span><br><span class="line">                Q.push(node&#123;v, d[v]&#125;);   <span class="comment">//将松弛后的点与距离入队</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入顶点数:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入边数"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i ++)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入边 (端点1 端点2 权值):"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">int</span> u, v, dis;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; u &gt;&gt; v &gt;&gt; dis;</span><br><span class="line">        Adj[u].push_back(node&#123;v, dis&#125;);</span><br><span class="line">        <span class="comment">//Adj[v].push_back(node&#123;u, dis&#125;);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> s;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入起点:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">    <span class="keyword">int</span> e;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入终点:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; e;</span><br><span class="line">    dijkstra(s);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"最短路长度:"</span> &lt;&lt; d[e] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" : "</span> &lt;&lt; d[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Dijkstra记录最短路路径"><a href="#Dijkstra记录最短路路径" class="headerlink" title="Dijkstra记录最短路路径"></a>Dijkstra记录最短路路径</h4><p>记录最短路径的方法非常简单，这里只需要开一个长度为n的数组pre，在每次进行优化的时候，记录每个被优化点的前驱点，最后由终点开始寻找前驱直到找到起点即可获得最短路径。</p>
<p>代码实现</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1e3</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">1e7</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> v, dis;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;tNode) <span class="keyword">const</span>&#123;  <span class="comment">// 优先队列默认优先级高的先出队 这里就要通过重载运算符 &lt; 使距离越小优先级越高</span></span><br><span class="line">        <span class="keyword">return</span> dis &gt; tNode.dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; Adj[MAXN];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">bool</span> vis[MAXN];</span><br><span class="line"><span class="keyword">int</span> d[MAXN], pre[MAXN];</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">    fill(d, d +MAXN, INF);  <span class="comment">// 初始化起点至所有点距离为无穷大</span></span><br><span class="line">    d[s] = <span class="number">0</span>;    <span class="comment">// 起点至其本身距离为0</span></span><br><span class="line">    priority_queue&lt;Node&gt; Q; <span class="comment">// 这里node中v代表的是当前顶点，dis代表其与起点的距离</span></span><br><span class="line">    Q.push(Node&#123;s, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">while</span>(!Q.empty())&#123;</span><br><span class="line">        Node f = Q.top();</span><br><span class="line">        Q.pop();</span><br><span class="line">        <span class="keyword">int</span> u = f.v;</span><br><span class="line">        <span class="keyword">if</span>(vis[u])  <span class="comment">// 如果u已经标记则继续出队</span></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        vis[u] = <span class="literal">true</span>;  <span class="comment">// 将u标记</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : Adj[u])&#123;   <span class="comment">// 遍历所有与u相邻的顶点</span></span><br><span class="line">            <span class="keyword">if</span>(d[i.v] &gt; d[u] + i.dis)&#123;  <span class="comment">// 如果可以以u为中转优化起点到对应点的距离</span></span><br><span class="line">                d[i.v] = d[u] + i.dis;  <span class="comment">// 执行松弛操作</span></span><br><span class="line">                pre[i.v] = u;   <span class="comment">// 记录本次优化的前驱点</span></span><br><span class="line">                Q.push(Node&#123;i.v, d[i.v]&#125;);  <span class="comment">// 将松弛后的点与距离入队</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入顶点数:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n;</span><br><span class="line">    <span class="keyword">int</span> m;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入边数:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; m;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i++)&#123;</span><br><span class="line">        <span class="keyword">int</span> u, v, dis;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入边（顶点1 顶点2 权值）:"</span>;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt;  u &gt;&gt; v &gt;&gt; dis;</span><br><span class="line">        Adj[u].push_back(Node&#123;v, dis&#125;);</span><br><span class="line">        Adj[v].push_back(Node&#123;u,dis&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> s, e;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入起点:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; s;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"输入终点:"</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; e;</span><br><span class="line">    dijkstra(s);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"最短路长度:"</span> &lt;&lt; d[e] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">int</span> tmp = e;</span><br><span class="line">    <span class="keyword">while</span>(tmp != s)&#123;    <span class="comment">// 由重点开始寻找前驱便可以获得最短路径</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; tmp &lt;&lt; <span class="string">" &lt;- "</span>;</span><br><span class="line">        tmp = pre[tmp];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; s &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Dijkstra-DFS"><a href="#Dijkstra-DFS" class="headerlink" title="Dijkstra+DFS"></a>Dijkstra+DFS</h4><p>在考查dijkstra算法时又是可能会出现最短路不只存在一条的情况，这是通常就会给你一个其他的判断条件，比如要求找出点权和最大的最短路。</p>
<p><img src="/2019/11/05/Dijkstra%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/dijkstra3-2.svg" alt="img"></p>
<p>观察上图，以红色为起点，蓝色为终点，求一条途经点的点权和最高的最短路。</p>
<p>先不考虑点权，先来看对多条最短路的记录，之前在只记录一条最短路时采取了pre前驱数组的方式，单如果有多条最短路，便要使用其他方式。使用前驱数组时，每次只有在某个点被优化时才记录其前驱结点，对到起点距离相等的情况并没有进行处理，也就是说当存在多条最短路径时，即使某个点在被优化时产生了到起点距离相等的情况也要对其进行记录，每个点的前驱就可能不止一个。</p>
<p>这里便可以将int型数组pre更换为容器型（vector）数组，pre[i]中记录的是i点所有的前驱结点。</p>
<p>这样便成功记录了所有的最短路径。若想从这些最短路径中计算出一条点权和最大的来，就可以用dfs去搜索每一条最短路并记录点权和，最终选出点权和最大的最短路。</p>
<p>比如pat <a href="https://pintia.cn/problem-sets/994805342720868352/problems/994805523835109376" target="_blank" rel="noopener">PAT (Advanced Level) Practice  <strong>1003</strong> <strong>Emergency</strong> </a>就是一道典型的这种类型的题目。</p>
<p>送上代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">510</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">500000</span>;</span><br><span class="line"><span class="keyword">int</span> d[MAXN];</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> v, dis;</span><br><span class="line">    <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;tNode) <span class="keyword">const</span>    <span class="comment">// 优先队列默认优先级高的先出队 这里就要通过重载运算符 &lt; 使距离越小优先级越高</span></span><br><span class="line">        <span class="keyword">return</span> dis &gt; tNode.dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">int</span> n, m, s, e;</span><br><span class="line"><span class="keyword">int</span> val[MAXN];</span><br><span class="line"><span class="keyword">bool</span> vis[MAXN];</span><br><span class="line"><span class="built_in">vector</span>&lt;Node&gt; Adj[MAXN];</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pre[MAXN];  <span class="comment">// 存储每个点的所有前驱点</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">    fill(d, d + MAXN, INF); <span class="comment">// 初始化起点至所有点距离为无穷大</span></span><br><span class="line">    d[s] = <span class="number">0</span>;   <span class="comment">// 起点至其本身距离为0</span></span><br><span class="line">    priority_queue&lt;Node&gt; Q;  <span class="comment">// 这里node中v代表的是当前顶点，dis代表其与起点的距离</span></span><br><span class="line">    Q.push(Node&#123;s, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">while</span>(!Q.empty())&#123;</span><br><span class="line">        Node f = Q.top();</span><br><span class="line">        Q.pop();</span><br><span class="line">        <span class="keyword">int</span> u = f.v;</span><br><span class="line">        <span class="keyword">if</span>(!vis[u])&#123;    <span class="comment">// 如果未经标记</span></span><br><span class="line">            vis[u] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">auto</span> i : Adj[u])&#123;   <span class="comment">// 遍历所有与u相邻的顶点</span></span><br><span class="line">                <span class="keyword">if</span>(d[i.v] &gt; d[u] + i.dis)&#123;  <span class="comment">// 如果可以以u为中转优化起点到对应点的距离</span></span><br><span class="line">                    d[i.v] = d[u] + i.dis;  <span class="comment">// 执行松弛操作</span></span><br><span class="line">                    Q.push(Node&#123;i.v, d[i.v]&#125;);</span><br><span class="line">                    pre[i.v].clear();   <span class="comment">// 清除之前记录的前驱</span></span><br><span class="line">                    pre[i.v].push_back(u);  <span class="comment">// u记录为v的前驱</span></span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">if</span>(d[i.v] == d[u] + i.dis)&#123;</span><br><span class="line">                    pre[i.v].push_back(u);  <span class="comment">// u添加为v的前驱</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; road;   <span class="comment">// 记录最终点权和最大的最短路</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; troad;  <span class="comment">// 记录遍历中的每一条最短路</span></span><br><span class="line"><span class="keyword">int</span> minRoadCnt;</span><br><span class="line"><span class="keyword">int</span> saveCnt;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> ed)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(ed == s)&#123;</span><br><span class="line">        minRoadCnt++;</span><br><span class="line">        <span class="keyword">int</span> tempSaveCnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : troad)&#123;</span><br><span class="line">            tempSaveCnt += val[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(saveCnt &lt; tempSaveCnt)&#123;</span><br><span class="line">            road = troad;</span><br><span class="line">            saveCnt = tempSaveCnt;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : pre[ed])&#123;</span><br><span class="line">            troad.push_back(i);</span><br><span class="line">            dfs(i);</span><br><span class="line">            troad.pop_back();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ios::sync_with_stdio(<span class="literal">false</span>);</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &gt;&gt; s &gt;&gt; e;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n ; i ++)&#123;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; val[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; m; i ++)&#123;</span><br><span class="line">        <span class="keyword">int</span> u, v, dis;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; u &gt;&gt; v &gt;&gt; dis;</span><br><span class="line">        Adj[u].push_back(Node&#123;v, dis&#125;);</span><br><span class="line">        Adj[v].push_back(Node&#123;u, dis&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    dijkstra(s);</span><br><span class="line">    troad.push_back(e);</span><br><span class="line">    dfs(e);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; minRoadCnt &lt;&lt; <span class="string">" "</span> &lt;&lt; saveCnt &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="comment">// 打印路径</span></span><br><span class="line">    <span class="comment">/*for(int i = road.size() - 1; i &gt;= 0; i--)&#123;</span></span><br><span class="line"><span class="comment">        if(i == road.size() - 1)</span></span><br><span class="line"><span class="comment">            cout &lt;&lt; road[i];</span></span><br><span class="line"><span class="comment">        else</span></span><br><span class="line"><span class="comment">            cout &lt;&lt; " " &lt;&lt; road[i];</span></span><br><span class="line"><span class="comment">    &#125;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/11/02/PTA-Advanced-Level-1029-Median/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/11/02/PTA-Advanced-Level-1029-Median/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1029 Median</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-02 00:11:27" itemprop="dateCreated datePublished" datetime="2019-11-02T00:11:27+08:00">2019-11-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Given an increasing sequence S of N integers, the median is the number at the middle position. For example, the median of S1 = { 11, 12, 13, 14 } is 12, and the median of S2 = { 9, 10, 15, 16, 17 } is 15. The median of two sequences is defined to be the median of the nondecreasing sequence which contains all the elements of both sequences. For example, the median of S1 and S2 is 13.</p>
<p>Given two increasing sequences of integers, you are asked to find their median.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>Each input file contains one test case. Each case occupies 2 lines, each gives the information of a sequence. For each sequence, the first positive integer N (≤2×105) is the size of that sequence. Then N integers follow, separated by a space. It is guaranteed that all the integers are in the range of <strong>long int</strong>.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>For each test case you should output the median of the two given sequences in a line.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">4 11 12 13 14</span><br><span class="line">5 9 10 15 16 17</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">13</span><br></pre></td></tr></table></figure>
<p>解题思路：<br>　　本题没有任何难度，为何会分到25分，这谁也不知道，题意就是给予两行两个long int序列，每个序列第一位为序列长度，求两个序列合并后的中位数。</p>
<p>AC代码</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">2e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n;</span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> val;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">long</span> <span class="keyword">long</span>&gt; seq;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;val);</span><br><span class="line">        seq.push_back(val);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;val);</span><br><span class="line">        seq.push_back(val);</span><br><span class="line">    &#125;</span><br><span class="line">    sort(seq.begin(), seq.end());</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, seq[(seq.size() <span class="number">-1</span>) / <span class="number">2</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/08/11/HBuilderX%E4%BD%BF%E7%94%A8Vant%E7%BB%84%E4%BB%B6%E5%BA%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/08/11/HBuilderX%E4%BD%BF%E7%94%A8Vant%E7%BB%84%E4%BB%B6%E5%BA%93/" class="post-title-link" itemprop="url">HBuilderX使用Vant组件库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-08-11 22:03:46" itemprop="dateCreated datePublished" datetime="2019-08-11T22:03:46+08:00">2019-08-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%80%E5%8D%95%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">简单教程</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><meta name="referrer" content="no-referrer"><br>​    HBuilderX是一款由国人开发的开发工具，其官网称其为轻如编辑器、强如IDE的合体版本。但是官方的社区中关于Vant组件的安装大多都是针对微信小程序开发安装Vant Weapp，鄙人尝试了各种方法，经历各种错误后终于成功安装vant组件库，在这里分享一下使用HBuilderX进行vue.js开发时安装Vant组件库的经验，使用的版本为2019.08.10更新的2.2.0版本。</p>
<p>​    <strong>本篇所有操作建立在操作系统为windows且已经成功安装配置node.js的基础上。</strong></p>
<p>一、建立uni-app新项目</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201908/1447131-20190811214026033-1365235595.png" alt="img"></p>
<p>二、在终端打开项目目录</p>
<p>　　可以直接在HBuilderX中直接右击项目名称选择‘使用命令行窗口打开目录’，之后会提示插件【内置终端】未安装，选择确定来安装内置终端插件,之后便可以通过内置终端打开对应项目目录，当然也可以直接在windows终端中打开对应目录</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201908/1447131-20190811214118333-329131275.png" alt="img"><img src="https://img2018.cnblogs.com/blog/1447131/201908/1447131-20190811214153594-1456728818.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201908/1447131-20190811214236996-650998932.png" alt="img"><img src="https://img2018.cnblogs.com/blog/1447131/201908/1447131-20190811214253426-1237473327.png" alt="img"></p>
<p>　　之后我将使用内置终端进行操作.</p>
<p>三、初始化项目创建package.json</p>
<p>在终端中执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>　　之后会让你填写一些如项目名称、版本号之类的项目介绍，如果不知道或者不想填就一路回车。　　</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201908/1447131-20190811214527678-541846092.png" alt="img"></p>
<p>四、安装Vant组件库</p>
<p>打开有赞vant的官方文档，快速上手中给出了通过npm安装vant的指令，在终端执行它。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vant -S</span><br></pre></td></tr></table></figure>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201908/1447131-20190811214624228-1496776260.png" alt="img"></p>
<p>不用管这几个警告</p>
<p>​    这时按照官方给的引入方式引入组件，我这里图方便直接引入所有组件，在main.js中添加</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vant <span class="keyword">from</span> <span class="string">'vant'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'vant/lib/index.css'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Vant);</span><br></pre></td></tr></table></figure>
<p>　　这时我们在pages下index.vue中尝试使用vant组件，这里我用vant的自定义输入框做演示，在index.vue添加如下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;van-cell-group&gt;</span><br><span class="line">  &lt;van-field</span><br><span class="line">    value&#x3D;&quot;&#123;&#123; username &#125;&#125;&quot;</span><br><span class="line">    required</span><br><span class="line">    clearable</span><br><span class="line">    label&#x3D;&quot;用户名&quot;</span><br><span class="line">    icon&#x3D;&quot;question-o&quot;</span><br><span class="line">    placeholder&#x3D;&quot;请输入用户名&quot;</span><br><span class="line">    bind:click-icon&#x3D;&quot;onClickIcon&quot;</span><br><span class="line">  &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;van-field</span><br><span class="line">    value&#x3D;&quot;&#123;&#123; password &#125;&#125;&quot;</span><br><span class="line">    type&#x3D;&quot;password&quot;</span><br><span class="line">    label&#x3D;&quot;密码&quot;</span><br><span class="line">    placeholder&#x3D;&quot;请输入密码&quot;</span><br><span class="line">    required</span><br><span class="line">    border&#x3D;&quot;&#123;&#123; false &#125;&#125;&quot;</span><br><span class="line">  &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;van-cell-group&gt;</span><br></pre></td></tr></table></figure>
<p>　　编译并运行，可以使用其自带的内置浏览器插件，可在工具——插件安装中配置安装，如果安装失败就给管理员权限，之后点击预览就会开始编译项目。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201908/1447131-20190811214913216-2006673047.png" alt="img"></p>
<p>　　不出意料会出现如下错误</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">21:11:07.242 Module build failed (from .&#x2F;node_modules&#x2F;postcss-loader&#x2F;src&#x2F;index.js):</span><br><span class="line"></span><br><span class="line">21:11:07.242 SyntaxError</span><br><span class="line"></span><br><span class="line">21:11:07.247 (1:5894) Unclosed bracket</span><br><span class="line"></span><br><span class="line">21:11:07.248 &gt; 1 | @-webkit-keyframes van-slide-up-enter&#123;0%&#123;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)&#125;&#125;@keyframes van-slide-up-…………………省略巨量……………………… (left,#ff6034,#ee0a24);background:linear-gradient(to right,#ff6034,#ee0a24)&#125;</span><br></pre></td></tr></table></figure>
<p>　　这是HBuilderX的bug已经过了很多个版本都没有修复，希望官方早日解决。出现这个是因为在main.js中引入vant的样式import ‘vant/lib/index.css’时出现了错误。</p>
<p>五、建立一个html的模板文件</p>
<p>　　删除main.js中错误代码 import ‘vant/lib/index.css’，以下方代码作为模板建立model.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://cdn.jsdelivr.net/npm/vant@2.0/lib/index.css"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span> %&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">document</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">document</span>.documentElement.style.fontSize = <span class="built_in">document</span>.documentElement.clientWidth / <span class="number">20</span> + <span class="string">'px'</span></span></span><br><span class="line">            &#125;)</span><br><span class="line">        <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"&lt;%= BASE_URL %&gt;static/index.css"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">strong</span>&gt;</span>Please enable JavaScript to continue.<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- built files will be auto injected --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>　　在manifest.json的h5配置中将其作为index.html模板导入</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201908/1447131-20190811215432221-2007786769.png" alt="img"></p>
<p>　　之后遍可以发现错误没了，在浏览器中查看会发现<strong>依然没有样式</strong>。</p>
<p>六、在对应页面引入vant样式</p>
<p>　　将</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &#39;vant&#x2F;lib&#x2F;index.css&#39;;</span><br></pre></td></tr></table></figure>
<p>　　添加至使用vant组件的页面 style块中，这时编译并从浏览器中查看，vant组件样式已经出现（若样式依旧不准确请检查网络连接）。</p>
<p>七、若还是不行，就抛弃HbuilderX，安装使用Vue脚手架Vue Cli 3</p>
<p> dCloud开发者已经知晓此bug很长时间，经过很多个版本后一直没有修复的迹象，所以还是用Vue脚手架吧。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue&#x2F;cli</span><br></pre></td></tr></table></figure>
<p>若HbuilderX修复了bug欢迎提醒我修改文章。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/05/09/Java%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%EF%BC%88%E5%9F%BA%E4%BA%8Esocket%E4%B8%8ERandomAccessFile%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/05/09/Java%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%EF%BC%88%E5%9F%BA%E4%BA%8Esocket%E4%B8%8ERandomAccessFile%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%EF%BC%89/" class="post-title-link" itemprop="url">Java断点续传（基于socket与RandomAccessFile的简单实现）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-05-09 16:58:39" itemprop="dateCreated datePublished" datetime="2019-05-09T16:58:39+08:00">2019-05-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><meta name="referrer" content="no-referrer"><br>　　这是一个简单的C/S架构实现断点续传的方法，基本实现思路是将服务器注册至某个空闲端口用来监视并处理每个客户端的传输请求。</p>
<p>　　客户端先获得用户给予的需传输文件与目标路径，之后根据该文件实例化RandomAccessFile为只读，之后客户端向服务器发送需传输的<strong>文件名</strong>文件大小与目标路径，服务器没接收到一个客户端的请求就会建立一个新的线程去处理它，根据接收到的文件名到目标路径中去寻找目标路径中是否已经有该文件名的.temp临时文件（如果没有就创建它），之后服务器会将文件已经传输的大小（临时文件大小）返回给客户端（例如临时文件刚刚建立返回的便是0），客户端会将刚刚建立的RandomAccessFile对象的文件指针指向服务器返回的位置，之后以1kb为一组向服务器传输需传输文件的内容数据，服务器则接收数据并将其写入临时文件中，并根据现有数据画出进度条。在文件传输完毕后客户端会将临时文件重命名为最初接收到的文件名。</p>
<p>服务器代码： </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br></pre></td><td class="code"><pre><span class="line">import java.awt.Color;</span><br><span class="line">import java.awt.Container;</span><br><span class="line">import java.awt.Dimension;</span><br><span class="line">import java.awt.FlowLayout;</span><br><span class="line">import java.awt.event.ActionEvent;</span><br><span class="line">import java.awt.event.ActionListener;</span><br><span class="line">import java.io.DataInputStream;</span><br><span class="line">import java.io.DataOutputStream;</span><br><span class="line">import java.io.File;</span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.RandomAccessFile;</span><br><span class="line">import java.net.ServerSocket;</span><br><span class="line">import java.net.Socket;</span><br><span class="line"></span><br><span class="line">import javax.swing.BoxLayout;</span><br><span class="line">import javax.swing.JButton;</span><br><span class="line">import javax.swing.JFrame;</span><br><span class="line">import javax.swing.JLabel;</span><br><span class="line">import javax.swing.JOptionPane;</span><br><span class="line">import javax.swing.JPanel;</span><br><span class="line">import javax.swing.JProgressBar;</span><br><span class="line"> </span><br><span class="line">public class FileTransferServer extends ServerSocket &#123;</span><br><span class="line"> </span><br><span class="line">    private static final int SERVER_PORT &#x3D; 8899; &#x2F;&#x2F; 服务端端口</span><br><span class="line"> </span><br><span class="line">    public FileTransferServer() throws Exception &#123;</span><br><span class="line">        super(SERVER_PORT);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public void load() throws Exception &#123;</span><br><span class="line">        while (true) &#123;</span><br><span class="line">            &#x2F;&#x2F; server尝试接收其他Socket的连接请求，server的accept方法是阻塞式的</span><br><span class="line">            Socket socket &#x3D; this.accept();</span><br><span class="line">           </span><br><span class="line">            &#x2F;&#x2F; 每接收到一个Socket就建立一个新的线程来处理它</span><br><span class="line">            new Thread(new Task(socket)).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     &#x2F;&#x2F;处理客户端传输过来的文件线程类</span><br><span class="line">    class Task implements Runnable &#123;</span><br><span class="line"> </span><br><span class="line">        private Socket socket;</span><br><span class="line">        private DataInputStream dis;</span><br><span class="line">        private DataOutputStream dos;</span><br><span class="line">        private RandomAccessFile rad;</span><br><span class="line">        private JFrame frame;    &#x2F;&#x2F;用来显示进度条</span><br><span class="line">        private Container contentPanel;</span><br><span class="line">        private JProgressBar progressbar;</span><br><span class="line">        private JLabel label;</span><br><span class="line">            </span><br><span class="line">        public Task(Socket socket) &#123;</span><br><span class="line">            frame &#x3D; new JFrame(&quot;文件传输&quot;);</span><br><span class="line">            this.socket &#x3D; socket;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                dis &#x3D; new DataInputStream(socket.getInputStream());</span><br><span class="line">                dos &#x3D; new DataOutputStream(socket.getOutputStream());</span><br><span class="line">                String targetPath &#x3D; dis.readUTF();    &#x2F;&#x2F;接收目标路径</span><br><span class="line">                String fileName &#x3D; dis.readUTF();    &#x2F;&#x2F;接收文件名</span><br><span class="line">                &#x2F;&#x2F;System.out.println(&quot;服务器：接收文件名&quot;);</span><br><span class="line">                long fileLength &#x3D; dis.readLong();    &#x2F;&#x2F;接收文件长度</span><br><span class="line">                &#x2F;&#x2F;System.out.println(&quot;服务器：接收文件长度&quot;);</span><br><span class="line">                File directory &#x3D; new File(targetPath);    &#x2F;&#x2F;目标地址</span><br><span class="line">                if(!directory.exists()) &#123;    &#x2F;&#x2F;目标地址文件夹不存在则创建该文件夹</span><br><span class="line">                    directory.mkdir();</span><br><span class="line">                &#125;</span><br><span class="line">                File file &#x3D; new File(directory.getAbsolutePath() + File.separatorChar + fileName + &quot;.temp&quot;);    &#x2F;&#x2F;建立临时数据文件.temp</span><br><span class="line">                &#x2F;&#x2F;System.out.println(&quot;服务器：加载temp文件&quot;);</span><br><span class="line">                rad &#x3D; new RandomAccessFile(directory.getAbsolutePath() + File.separatorChar + fileName + &quot;.temp&quot;, &quot;rw&quot;);</span><br><span class="line">                long size &#x3D; 0;</span><br><span class="line">                if(file.exists() &amp;&amp; file.isFile())&#123;    &#x2F;&#x2F;如果目标路径存在且是文件，则获取文件大小</span><br><span class="line">                    size &#x3D; file.length();</span><br><span class="line">                &#125;</span><br><span class="line">                &#x2F;&#x2F;System.out.println(&quot;服务器：获的当前已接收长度&quot;);</span><br><span class="line">                dos.writeLong(size);    &#x2F;&#x2F;向客户端发送当前数据文件大小</span><br><span class="line">                dos.flush();</span><br><span class="line">                &#x2F;&#x2F;System.out.println(&quot;服务器：发送当前以接收文件长度&quot;);</span><br><span class="line">                int barSize &#x3D; (int)(fileLength &#x2F; 1024);    &#x2F;&#x2F;进度条当前进度</span><br><span class="line">                int barOffset &#x3D; (int)(size &#x2F; 1024);        &#x2F;&#x2F;进度条总长</span><br><span class="line">                frame.setSize(300,120); &#x2F;&#x2F;传输界面</span><br><span class="line">                contentPanel &#x3D; frame.getContentPane();</span><br><span class="line">                contentPanel.setLayout(new BoxLayout(contentPanel, BoxLayout.Y_AXIS));</span><br><span class="line">                progressbar &#x3D; new JProgressBar();    &#x2F;&#x2F;进度条</span><br><span class="line">                label &#x3D; new JLabel(fileName + &quot; 接收中&quot;);</span><br><span class="line">                contentPanel.add(label);</span><br><span class="line">                progressbar.setOrientation(JProgressBar.HORIZONTAL);    &#x2F;&#x2F;进度条为水平</span><br><span class="line">                progressbar.setMinimum(0);    &#x2F;&#x2F;进度条最小值</span><br><span class="line">                progressbar.setMaximum(barSize);    &#x2F;&#x2F;进度条最大值</span><br><span class="line">                progressbar.setValue(barOffset);    &#x2F;&#x2F;进度条当前值</span><br><span class="line">                progressbar.setStringPainted(true); &#x2F;&#x2F;显示进度条信息</span><br><span class="line">                progressbar.setPreferredSize(new Dimension(150, 20));    &#x2F;&#x2F;进度条大小</span><br><span class="line">                progressbar.setBorderPainted(true);    &#x2F;&#x2F;为进度条绘制边框</span><br><span class="line">                progressbar.setBackground(Color.pink);    &#x2F;&#x2F;进度条颜色为骚粉</span><br><span class="line">                JButton cancel &#x3D; new JButton(&quot;取消&quot;);    &#x2F;&#x2F;取消按钮</span><br><span class="line">                JPanel barPanel &#x3D; new JPanel();</span><br><span class="line">                barPanel.setLayout(new FlowLayout(FlowLayout.LEFT));</span><br><span class="line">                barPanel.add(progressbar);</span><br><span class="line">                barPanel.add(cancel);</span><br><span class="line">                contentPanel.add(barPanel);</span><br><span class="line">                cancel.addActionListener(new cancelActionListener());</span><br><span class="line">                &#x2F;&#x2F;为取消按钮注册监听器</span><br><span class="line">                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">                frame.setVisible(true);</span><br><span class="line">                rad.seek(size);    &#x2F;&#x2F;移动文件指针</span><br><span class="line">                &#x2F;&#x2F;System.out.println(&quot;服务器：文件定位完成&quot;);</span><br><span class="line">                int length;</span><br><span class="line">                byte[] bytes&#x3D;new byte[1024];</span><br><span class="line">                while((length &#x3D; dis.read(bytes, 0, bytes.length)) !&#x3D; -1)&#123;</span><br><span class="line">                    rad.write(bytes,0, length);    &#x2F;&#x2F;写入文件</span><br><span class="line">                    progressbar.setValue(++barOffset);    &#x2F;&#x2F;更新进度条（由于进度条每个单位代表大小为1kb，所以太小的文件就显示不出啦）</span><br><span class="line">                &#125;</span><br><span class="line">                if (barOffset &gt;&#x3D; barSize) &#123;    &#x2F;&#x2F;传输完成后的重命名</span><br><span class="line">                    if(rad !&#x3D; null)</span><br><span class="line">                         rad.close();</span><br><span class="line">                    if(!file.renameTo(new File(directory.getAbsolutePath() + File.separatorChar + fileName))) &#123;</span><br><span class="line">                        file.delete();</span><br><span class="line">                        &#x2F;&#x2F;防御性处理删除临时文件</span><br><span class="line">                    &#125;</span><br><span class="line">                    &#x2F;&#x2F;System.out.println(&quot;服务器：临时文件重命名完成&quot;);</span><br><span class="line">                &#125;        </span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125; finally &#123;</span><br><span class="line">                try &#123;    &#x2F;&#x2F;关闭资源</span><br><span class="line">                    if(rad !&#x3D; null)</span><br><span class="line">                         rad.close();</span><br><span class="line">                    if(dis !&#x3D; null)</span><br><span class="line">                        dis.close();</span><br><span class="line">                    if(dos !&#x3D; null)</span><br><span class="line">                        dos.close();</span><br><span class="line">                    frame.dispose();</span><br><span class="line">                    socket.close();</span><br><span class="line">                &#125; catch (Exception e) &#123;&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        class cancelActionListener implements ActionListener&#123;    &#x2F;&#x2F;取消按钮监听器</span><br><span class="line">            public void actionPerformed(ActionEvent e)&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    &#x2F;&#x2F;System.out.println(&quot;服务器：接收取消&quot;);</span><br><span class="line">                    if(dis !&#x3D; null)</span><br><span class="line">                        dis.close();</span><br><span class="line">                    if(dos !&#x3D; null)</span><br><span class="line">                        dos.close();</span><br><span class="line">                    if(rad !&#x3D; null)</span><br><span class="line">                        rad.close();</span><br><span class="line">                    frame.dispose();</span><br><span class="line">                    socket.close();</span><br><span class="line">                    JOptionPane.showMessageDialog(frame, &quot;已取消接收，连接关闭！&quot;, &quot;提示：&quot;, JOptionPane.INFORMATION_MESSAGE);    </span><br><span class="line">                    label.setText(&quot; 取消接收,连接关闭&quot;);</span><br><span class="line">                &#125; catch (IOException e1) &#123;</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 客户端代码： </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket; </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileTransferClient</span> <span class="title">extends</span> <span class="title">Socket</span> &#123;</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> final String SERVER_IP = <span class="string">"127.0.0.1"</span>; <span class="comment">// 服务端IP</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> final <span class="keyword">int</span> SERVER_PORT = <span class="number">8899</span>; <span class="comment">// 服务端端口</span></span><br><span class="line">    <span class="keyword">private</span> Socket client;</span><br><span class="line">    <span class="keyword">private</span> DataOutputStream dos;</span><br><span class="line">    <span class="keyword">private</span> DataInputStream dis;  </span><br><span class="line">    <span class="keyword">private</span> RandomAccessFile rad;  </span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FileTransferClient</span><span class="params">()</span> throws Exception </span>&#123;</span><br><span class="line">        super(SERVER_IP, SERVER_PORT);</span><br><span class="line">        <span class="keyword">this</span>.client = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">//System.out.println("客户端：成功连接服务端");</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendFile</span><span class="params">(String filePath, String targetPath)</span> throws Exception </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            File file = <span class="keyword">new</span> File(filePath);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span>(file.exists()) &#123;</span><br><span class="line">                dos = <span class="keyword">new</span> DataOutputStream(client.getOutputStream());     <span class="comment">//发送信息 getOutputStream方法会返回一个java.io.OutputStream对象</span></span><br><span class="line">                dis = <span class="keyword">new</span> DataInputStream(client.getInputStream());    <span class="comment">//接收远程对象发送来的信息  getInputStream方法会返回一个java.io.InputStream对象</span></span><br><span class="line">                dos.writeUTF(targetPath); <span class="comment">//发送目标路径</span></span><br><span class="line">                dos.writeUTF(file.getName()); <span class="comment">//发送文件名</span></span><br><span class="line">                <span class="comment">//System.out.println("客户端：发送文件名");</span></span><br><span class="line">                rad = <span class="keyword">new</span> RandomAccessFile(file.getPath(), <span class="string">"r"</span>);</span><br><span class="line">                <span class="comment">/*</span></span><br><span class="line"><span class="comment">                 * RandomAccessFile是Java输入输出流体系中功能最丰富的文件内容访问类，既可以读取文件内容，也可以向文件输出数据。</span></span><br><span class="line"><span class="comment">                 * 与普通的输入/输出流不同的是，RandomAccessFile支持跳到文件任意位置读写数据，RandomAccessFile对象包含一个记录指针，用以标识当前读写处的位置。</span></span><br><span class="line"><span class="comment">                 * 当程序创建一个新的RandomAccessFile对象时，该对象的文件记录指针对于文件头 r代表读取</span></span><br><span class="line"><span class="comment">                 */</span></span><br><span class="line">                dos.flush();    <span class="comment">//作用见下方介绍</span></span><br><span class="line">                dos.writeLong(file.length()); <span class="comment">//发送文件长度</span></span><br><span class="line">                <span class="comment">//System.out.println("客户端：发送文件长度");</span></span><br><span class="line">                dos.flush();</span><br><span class="line">                <span class="keyword">long</span> size = dis.readLong();    <span class="comment">//读取当前已发送文件长度</span></span><br><span class="line">                <span class="comment">//System.out.println("客户端：开始传输文件 ");</span></span><br><span class="line">                <span class="keyword">int</span> length = <span class="number">0</span>;</span><br><span class="line">                byte[] bytes = <span class="keyword">new</span> byte[<span class="number">1024</span>];    <span class="comment">//每1kb发送一次</span></span><br><span class="line">                <span class="keyword">if</span> (size &lt; rad.length()) &#123;</span><br><span class="line">                    rad.seek(size);</span><br><span class="line">                    <span class="comment">//System.out.println("客户端：文件定位完成");</span></span><br><span class="line">                    <span class="comment">//移动文件指针</span></span><br><span class="line">                    <span class="keyword">while</span>((length = rad.read(bytes)) &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                        dos.write(bytes, <span class="number">0</span>, length);                            </span><br><span class="line">                        dos.flush();</span><br><span class="line">                        <span class="comment">//每1kb清空一次缓冲区</span></span><br><span class="line">                        <span class="comment">//为了避免每读入一个字节都写一次，java的输流有了缓冲区，读入数据时会首先将数据读入缓冲区，等缓冲区满后或执行flush或close时一次性进行写入操作</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//System.out.println("客户端：文件传输成功 ");</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; finally &#123;    <span class="comment">//关闭资源</span></span><br><span class="line">            <span class="keyword">if</span>(dos != null)</span><br><span class="line">                dos.close();</span><br><span class="line">            <span class="keyword">if</span>(dis != null)</span><br><span class="line">                dis.close();</span><br><span class="line">            <span class="keyword">if</span>(rad != null)</span><br><span class="line">                rad.close();</span><br><span class="line">            client.close();</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">cancelActionListener</span> <span class="title">implements</span> <span class="title">ActionListener</span>&#123;</span>    <span class="comment">//关闭按钮监听器</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e3)</span></span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//System.out.println("客户端：文件传输取消");</span></span><br><span class="line">                <span class="keyword">if</span>(dis != null)</span><br><span class="line">                    dis.close();</span><br><span class="line">                <span class="keyword">if</span>(dos != null)</span><br><span class="line">                    dos.close();</span><br><span class="line">                <span class="keyword">if</span>(rad != null)</span><br><span class="line">                    rad.close();</span><br><span class="line">                client.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e1) &#123;</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　传输文件是一个耗时操作，若直接实例化客户端对服务器发送数据会造成UI假死的情况，直到文件传输完成后才会恢复，所以建议在实例化客户端时单独建立一个新线程。</p>
<p>测试代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFileChooser;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.MouseAdapter;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.MouseEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainFrame</span> <span class="title">extends</span> <span class="title">JFrame</span>&#123;</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MainFrame</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setSize(<span class="number">1280</span>, <span class="number">768</span>);</span><br><span class="line">        getContentPane().setLayout(null);</span><br><span class="line">        </span><br><span class="line">        JButton btnNewButton = <span class="keyword">new</span> JButton(<span class="string">"传输文件"</span>);    <span class="comment">//点击按钮进行文件传输</span></span><br><span class="line">        btnNewButton.addMouseListener(<span class="keyword">new</span> MouseAdapter() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> mouseClicked(MouseEvent e) &#123;</span><br><span class="line">                <span class="comment">// TODO 自动生成的方法存根</span></span><br><span class="line">                super.mouseClicked(e);</span><br><span class="line">                JFileChooser fileChooser = <span class="keyword">new</span> JFileChooser();    <span class="comment">//fileChooser用来选择要传输的文件</span></span><br><span class="line">                fileChooser.setDialogTitle(<span class="string">"选择要传输的文件"</span>);</span><br><span class="line">                <span class="keyword">int</span> stFile = fileChooser.showOpenDialog(null);</span><br><span class="line">                <span class="keyword">if</span>(stFile == fileChooser.APPROVE_OPTION)&#123;    <span class="comment">//选择了文件</span></span><br><span class="line">                    JFileChooser targetPathChooser = <span class="keyword">new</span> JFileChooser();    <span class="comment">//targetPathChooser用来选择目标路径</span></span><br><span class="line">                    targetPathChooser.setDialogTitle(<span class="string">"选择目标路径"</span>);</span><br><span class="line">                    targetPathChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);    <span class="comment">//只能选择路径</span></span><br><span class="line">                    <span class="keyword">int</span> stPath = targetPathChooser.showOpenDialog(null);</span><br><span class="line">                    <span class="keyword">if</span>(stPath == targetPathChooser.APPROVE_OPTION) &#123;    <span class="comment">//选择了路径</span></span><br><span class="line">                        <span class="comment">//新建一个线程实例化客户端</span></span><br><span class="line">                        <span class="keyword">new</span> Thread(<span class="keyword">new</span> NewClient( fileChooser.getSelectedFile().getPath(), targetPathChooser.getSelectedFile().getPath())).start();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        btnNewButton.setBounds(<span class="number">526</span>, <span class="number">264</span>, <span class="number">237</span>, <span class="number">126</span>);</span><br><span class="line">        getContentPane().add(btnNewButton);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">NewClient</span> <span class="title">implements</span> <span class="title">Runnable</span> &#123;</span>    <span class="comment">//用于实例化客户端的线程</span></span><br><span class="line">        <span class="keyword">private</span> String fileP;    <span class="comment">//需复制文件路径</span></span><br><span class="line">        <span class="keyword">private</span> String targetP;    <span class="comment">//目标路径</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">NewClient</span><span class="params">(String fileP, String targetP)</span> </span>&#123;    <span class="comment">//构造函数</span></span><br><span class="line">            <span class="keyword">this</span>.fileP = fileP;</span><br><span class="line">            <span class="keyword">this</span>.targetP = targetP;</span><br><span class="line">        &#125;</span><br><span class="line">        @Override</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="comment">// TODO 自动生成的方法存根</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                @SuppressWarnings(<span class="string">"resource"</span>)</span><br><span class="line">                FileTransferClient ftc = <span class="keyword">new</span> FileTransferClient();</span><br><span class="line">                <span class="comment">//实例化客户端</span></span><br><span class="line">                ftc.sendFile(fileP, targetP);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e1) &#123;</span><br><span class="line">                <span class="comment">// TODO 自动生成的 catch 块</span></span><br><span class="line">                e1.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// TODO 自动生成的方法存根</span></span><br><span class="line">        MainFrame mainFrame = <span class="keyword">new</span> MainFrame();</span><br><span class="line">        mainFrame.setVisible(<span class="literal">true</span>);</span><br><span class="line">        mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">             @SuppressWarnings(<span class="string">"resource"</span>)</span><br><span class="line">            FileTransferServer server = <span class="keyword">new</span> FileTransferServer(); <span class="comment">// 启动服务端</span></span><br><span class="line">             server.load();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　演示：</p>
<p>　　1运行MainFame</p>
<p>　　2点击传输文件</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201905/1447131-20190509164942859-643737801.png" alt="img"></p>
<p>　　3选择要传输的文件</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201905/1447131-20190509165100003-685598377.png" alt="img"></p>
<p>　　4选择目标路径</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201905/1447131-20190509165148338-1675421586.png" alt="img"></p>
<p>　　5点击打开</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201905/1447131-20190509165245218-844234119.png" alt="img"></p>
<p>　　点击取消</p>
<p>　　之后重复2 - 5的操作。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201905/1447131-20190509165509605-1954857083.png" alt="img"></p>
<p>　　啊我手速慢，问题不大，你会发现断点续传已经实现了。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/17/Qt5-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/17/Qt5-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" class="post-title-link" itemprop="url">Qt5--从零开始的学生管理系统</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-17 14:44:58" itemprop="dateCreated datePublished" datetime="2019-04-17T14:44:58+08:00">2019-04-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/" itemprop="url" rel="index"><span itemprop="name">项目实践</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><meta name="referrer" content="no-referrer"></p>
<h2 id="一、项目设计"><a href="#一、项目设计" class="headerlink" title="一、项目设计"></a>一、项目设计</h2><h3 id="1、需求分析"><a href="#1、需求分析" class="headerlink" title="　　1、需求分析"></a>　　1、需求分析</h3><p>　　记录并处理学生成绩信息。</p>
<p>　　1）添加新的学生数据；</p>
<p>　　2）根据学号对已有的学生数据进行修改；</p>
<p>　　3）根据学号删除已存在的学生信息；</p>
<p>　　4）根据学号查询学生信息；</p>
<p>　　5）根据各门成绩与平均成绩进行排序。</p>
<h3 id="2、窗口设计"><a href="#2、窗口设计" class="headerlink" title="　　2、窗口设计"></a>　　2、窗口设计</h3><p>　　1）菜单窗口；</p>
<p>　　2）添加学生窗口；</p>
<p>　　3）修改信息窗口（包括删除信息）；</p>
<p>　　4）查询学生窗口</p>
<p>　　5）排序窗口；</p>
<h3 id="3、数据结构设计"><a href="#3、数据结构设计" class="headerlink" title="　　3、数据结构设计"></a>　　3、数据结构设计</h3><p>　　以一个类StudentInfo储存单个学生信息，学生类中包括：</p>
<p>　　姓名（字符串）</p>
<p>　　学号（整型）</p>
<p>　　数学成绩（整型）</p>
<p>　　英语成绩（整型）</p>
<p>　　C语言程序设计成绩（整型）</p>
<p>　　平均成绩（双浮点数）</p>
<h2 id="二、项目制作"><a href="#二、项目制作" class="headerlink" title="二、项目制作"></a>二、项目制作</h2><h3 id="1、建立项目"><a href="#1、建立项目" class="headerlink" title="1、建立项目"></a>1、建立项目</h3><p>　　打开Qt Creator 文件-&gt;新建文件或项目（Ctrl+N）-&gt;其他项目-&gt;空的Qt项目（Empty qmacke Project）</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135537743-346606840.png" alt="img"></p>
<h3 id="2、添加窗口"><a href="#2、添加窗口" class="headerlink" title="2、添加窗口"></a>2、添加窗口</h3><p>　　将其命名为StudentManagementSystem_Qt一路下一步到结束。</p>
<p>　　右击项目名称-&gt;Add New-&gt;Qt -&gt; Qt设计师界面模板选择Widget下一步，我们当前建立的是菜单窗口，所以将其类名命名为MenuWidget一路下一步到结束。</p>
<p>　　以同样的方式建立添加学生窗口：AddStudentWidget、修改信息窗口：ModifyWidget、查询窗口：SelectWidget、排序窗口：SortWidget。</p>
<p>　　完成后的项目资源管理器页面中应该有如下文件</p>
<p>　　 <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135642056-2079261753.png" alt="img"></p>
<p>　　我们可以看到Qt中建立模板为widget的设计师界面就是建立了一个c++类（继承自QWidget）与其对应的ui文件 ，这个ui文件便是Qt Designer设计文件，它会在编译时生成一个ui_*.h文件，这样我们便可以用c++的方式对其进行调用。</p>
<p>　　Qt Designer的详细使用方法可以看官方的手册：<a href="https://doc.qt.io/archives/qt-4.8/designer-manual.html" target="_blank" rel="noopener">https://doc.qt.io/archives/qt-4.8/designer-manual.html</a></p>
<p>　　之后打开我们的menuwidget.h，会发现其中存在错误。</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135819172-1344535597.png" alt="img"></p>
<p>　　这是因为我们的项目中没有连接Qt Widgets库，在StudentManagementSystem_Qt.pro中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QT +&#x3D; widgets</span><br></pre></td></tr></table></figure>
<p>可解决问题。</p>
<h3 id="3、实现窗口之间的切换"><a href="#3、实现窗口之间的切换" class="headerlink" title="　　3、实现窗口之间的切换"></a>　　3、实现窗口之间的切换</h3><p>　　现在，就是实现我们新建立的几个窗口之间的窗口切换问题的时候了，这里我打算使用QStackedLayout实现窗口切换。</p>
<p>　　QStackedLayout继承自QLayout，提供了多页面切换的布局，一次只能看到一个界面，在我的Qt5——从零开始的Hello World教程(Qt Creator) 中提到过，大部分控件都继承自QFrame，而QFrame又继承自QWidget，所以QStackedLayout完全可以实现窗口之间的切换。</p>
<p>　　现在我们用与上一步相同的方法建立一个窗口MainWidget。并添加一个main.cpp来写main函数</p>
<p>　　 <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135901363-1389249971.png" alt="img"></p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135912811-1823331648.png" alt="img"></p>
<p>　　在mainwidget.h中修改MainWidget的定义，为其添加成员</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MenuWidget *menuwidget;        &#x2F;&#x2F;菜单窗口</span><br><span class="line">AddStudentWidget *addstudentwidget;   &#x2F;&#x2F;添加学生窗口</span><br><span class="line">SelectWidget *selectwidget;    &#x2F;&#x2F;查询窗口</span><br><span class="line">ModifyWidget *modifywidget;    &#x2F;&#x2F;修改窗口</span><br><span class="line">SortWidget *sortwidget;        &#x2F;&#x2F;排序窗口</span><br><span class="line">QStackedLayout *stackLayout;   &#x2F;&#x2F;QStackedLayout布局</span><br></pre></td></tr></table></figure>
<p>​    当然，也需要引用其对应的头文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;QStackedLayout&gt;</span><br><span class="line">#include &quot;menuwidget.h&quot;</span><br><span class="line">#include &quot;addstudentwidget.h&quot;</span><br><span class="line">#include &quot;selectwidget.h&quot;</span><br><span class="line">#include &quot;modifywidget.h&quot;</span><br><span class="line">#include &quot;sortwidget.h&quot;</span><br></pre></td></tr></table></figure>
<p>​    在MainWidget.cpp中将MainWidget设为stackLayout布局，声明我们需要的窗口，并将其加入stackLayout布局中去。</p>
<p>​    在MainWidget.cpp中显示调用MainWidget构造函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MainWidget::MainWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(new Ui::MainWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　处添加。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">menuwidget = <span class="keyword">new</span> MenuWidget;</span><br><span class="line">addstudentwidget = <span class="keyword">new</span> AddStudentWidget;</span><br><span class="line">selectwidget = <span class="keyword">new</span> SelectWidget;</span><br><span class="line">modifywidget = <span class="keyword">new</span> ModifyWidget;</span><br><span class="line">sortwidget = <span class="keyword">new</span> SortWidget;</span><br><span class="line">stackLayout = <span class="keyword">new</span> QStackedLayout;</span><br><span class="line"></span><br><span class="line">stackLayout-&gt;addWidget(menuwidget);</span><br><span class="line">stackLayout-&gt;addWidget(addstudentwidget);</span><br><span class="line">stackLayout-&gt;addWidget(selectwidget);</span><br><span class="line">stackLayout-&gt;addWidget(modifywidget);</span><br><span class="line">stackLayout-&gt;addWidget(sortwidget);</span><br><span class="line"></span><br><span class="line">setLayout(stackLayout);</span><br></pre></td></tr></table></figure>
<p>  之后就需要使用Qt designer 设计页面了（当然在对应类中手动添加成员控件也没有任何问题）。</p>
<p>​    双击mainwidget.ui就打开了设计页面</p>
<p>​    在menuwidget中添加如下按钮（push button）</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417140255883-1145969539.png" alt="img"></p>
<p>　　以同样的方法在addstudentwidget,selectwidget,modifywidget,sortwidget中都添加一个返回按钮returnButton。</p>
<p>　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417140423744-971443667.png" alt="img"></p>
<p>　　为这些按钮设计点击槽函数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">menuwidget.h:</span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_addButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_selectButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_modifyButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_sortButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_exitButton_clicked</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<p> 还需要一个方法作为stackLayout切换页面的信号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">signals:</span><br><span class="line">    void display(int number);</span><br></pre></td></tr></table></figure>
<p>  在menuwidget.cpp中给出函数定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> MenuWidget::on_addButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_selectButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_modifyButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_sortButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_exitButton_clicked()&#123;</span><br><span class="line">    QApplication::<span class="built_in">exit</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>emit 把connect把信号和槽进行关联，emit某个信号，就相当于调用这个信号connect时所关联的槽函数。至于更多关于 emit信息诸位可以搜索或者看帮助文档。</p>
<p>之后为addstudentwidget,selectwidget,modifywidget,sortwidget窗口中的按钮设计信号与槽函数</p>
<p>在（类名）.h中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">signals:</span><br><span class="line">    void display(int number);</span><br><span class="line">private slots:</span><br><span class="line">    void on_returnButton_clicked();</span><br></pre></td></tr></table></figure>
<p>在（类名）.cpp中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void （类名）::on_returnButton_clicked()&#123;</span><br><span class="line">    emit display(0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　现在可以使用的只有退出按钮，跳转按钮还需要在mainwidget.cpp中用connect函数连接。</p>
<p>　　到此为止便完成了页面切换功能。</p>
<p>　　到次为止的源码：</p>
<p>​       <a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt</a></p>
<h3 id="4、完善窗口设计"><a href="#4、完善窗口设计" class="headerlink" title="　　4、完善窗口设计"></a>　　4、完善窗口设计</h3><h4 id="1：AddStudentWidget"><a href="#1：AddStudentWidget" class="headerlink" title="1：AddStudentWidget"></a>1：AddStudentWidget</h4><p>​    我们需要提示标签来指明输入的数据，也需要输入框来接收用户的输入，QLabel与QLineEdit可以满足我们的要求。</p>
<p>　　QLabel，QLineEdit有方法setText(“内容”)来改变其显示的文字，有方法setGeometry (起始横坐标，起始纵坐标，宽， 高)来设置左上角起始位置与大小。</p>
<p>　　当然这些都可以在Qt Designer中直接设置。打开addstudentwidget.ui。</p>
<p>　　根据之前设计的数据结构，需要nameLineEdit、idLineEdit、mathLineEdit、enLineEdit、cLineEdit五个QLineEdit接收学生的姓名、学号、数学成绩、英语成绩、C语言成绩（平均成绩由计算得出），需要nameLabel、idLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户输入数据，需要addButton 一个QPushButton来添加学生。</p>
<p>　　最终将addstudentwidget页面设计为。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141128411-873116665.png" alt="img"></p>
<h4 id="2：modifyWidget"><a href="#2：modifyWidget" class="headerlink" title="　　2：modifyWidget"></a>　　2：modifyWidget</h4><p>　　我们需要nameLineEdit、idLineEdit、mathLineEdit、enLineEdit、cLineEdit五个QLineEdit接收学生的姓名、学号、数学成绩、英语成绩、C语言成绩（平均成绩由计算得出），需要nameLabel、idLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户输入数据，需要deleteButton、modifyButton 两个QPushButton来根据学号删除学生，和根据学号修改学生信息。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141145625-303859315.png" alt="img"></p>
<h4 id="3：selectwidget"><a href="#3：selectwidget" class="headerlink" title="　　3：selectwidget"></a>　　3：selectwidget</h4><p>　　我们需要idLabel一个QLabel提醒用户输入数据，需要idLineEdit一个QLineEdit接收学生的学号，之后需要nameLabel、avgLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户显示的数据，需要showNameLabel、showMathLabel、showEnLabel、showCLabel、showAvgLabel五个QLabel来接收查询到的数据，需要selectButton一个QPushButton来提交查询。 </p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141209265-1987825417.png" alt="img"></p>
<h4 id="4：sortwidget"><a href="#4：sortwidget" class="headerlink" title="　　4：sortwidget"></a>　　4：sortwidget</h4><p>　　QRadioButton单选框可以解决我们的排序根据选择问题</p>
<p>　　（当然，许多方法都可以，这里只演示QRadioButton）</p>
<p>　　QTableWidget表格可以用来显示排序后的信息。</p>
<p>　　我们需要mathRadioButton、enRadioButton、cRadioButton、avgRadioButton四个QRadioButton来选择排序的根据，需要sortButton一个QPushButton来提交排序，需要tableWidget一个 QTableWidget来显示排序结果。</p>
<p> 　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141240402-1168770826.png" alt="img"></p>
<p>到此为止的源码：</p>
<p><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_1(uiOnly" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_1(uiOnly</a>)</p>
<h3 id="5、完成学生类的设计"><a href="#5、完成学生类的设计" class="headerlink" title="　　5、完成学生类的设计"></a>　　5、完成学生类的设计</h3><p>​    之前在数据结构设计中我们已经设计好了，以一个类StudentInfo储存单个学生信息，学生类中包括：</p>
<p>  姓名（字符串）</p>
<p>  学号（整型）</p>
<p>  数学成绩（整型）</p>
<p>  英语成绩（整型）</p>
<p>  C语言程序设计成绩（整型）</p>
<p>  平均成绩（双浮点数）</p>
<p>现在着手去实现它</p>
<p>​    右击项目Add New选择C++ C++Class 为它起名叫StudentInfo之后下一步到完成，在studentinfo.h中为其创建对应的私有变量，及其对应的get与set函数。</p>
<h4 id="studentinfo-h"><a href="#studentinfo-h" class="headerlink" title="　　studentinfo.h"></a>　　studentinfo.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentInfo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QString name;</span><br><span class="line">    <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">    <span class="keyword">double</span> avg;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    StudentInfo();</span><br><span class="line">    StudentInfo(QString tname, <span class="keyword">int</span> tid, <span class="keyword">int</span> tmath, <span class="keyword">int</span> tenglish, <span class="keyword">int</span> tlanguageC)&#123;</span><br><span class="line">        name = tname;</span><br><span class="line">        id = tid;</span><br><span class="line">        math = tmath;</span><br><span class="line">        english = tenglish;</span><br><span class="line">        languageC = tlanguageC;</span><br><span class="line">        avg = (tmath + tenglish + tlanguageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QString <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMath</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> math;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getEnglish</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> english;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getLanguageC</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> languageC;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">getAvg</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avg;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> tid)</span></span>&#123;</span><br><span class="line">        id = tid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setName</span><span class="params">(QString tname)</span></span>&#123;</span><br><span class="line">        name = tname;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setMath</span><span class="params">(<span class="keyword">int</span> tmath)</span></span>&#123;</span><br><span class="line">        math = tmath;</span><br><span class="line">        avg = (math + english + languageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setEnglish</span><span class="params">(<span class="keyword">int</span> tenglish)</span></span>&#123;</span><br><span class="line">        english = tenglish;</span><br><span class="line">        avg = (math + english + languageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setLanguageC</span><span class="params">(<span class="keyword">int</span> tlanguageC)</span></span>&#123;</span><br><span class="line">        languageC = tlanguageC;</span><br><span class="line">        avg = (math + english + languageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="6、完善添加学生信息"><a href="#6、完善添加学生信息" class="headerlink" title="　　6、完善添加学生信息"></a>　　6、完善添加学生信息</h3><p>​    打开addstudentwidget.h为”添加”按钮设计点击槽函数，由于我们设计用文件对学生信息进行储存，所以需要引用QFile，这里我使用对话框来提示用户操作中的各种问题，所以需要引入QMessageBox。</p>
<p>　　QMessageBox中有很多类型的对话框，各对话框的用法这里就不详细介绍了，这里我们只介绍我们即将用到的QMessageBox::about</p>
<p>　　QMessageBox::about(NULL, “About”, “About this application”);</p>
<p>　　其中三个参数分别对应，父窗口对象， 对话框标题， 对话框内容。</p>
<p>　　在addstudentwidget.cpp中给出函数定义：</p>
<p>　　在lineEdit中取出用户输入的数据，lineEdit拥有text()方法，会返回一个QString，而QString中又拥有入toInt() toDouble()等各种类型转换函数，可以适应我们的大多数要求。</p>
<p>　　打开数据文件将我们刚刚获取的数据追加在文件结尾。</p>
<h4 id="addstudentwidget-h"><a href="#addstudentwidget-h" class="headerlink" title="　　addstudentwidget.h"></a>　　addstudentwidget.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ADDSTUDENTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ADDSTUDENTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">AddStudentWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddStudentWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">AddStudentWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~AddStudentWidget();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::AddStudentWidget *ui;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_addButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// ADDSTUDENTWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="addstudentwidget-cpp"><a href="#addstudentwidget-cpp" class="headerlink" title="　　addstudentwidget.cpp"></a>　　addstudentwidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"addstudentwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_addstudentwidget.h"</span></span></span><br><span class="line">AddStudentWidget::AddStudentWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::AddStudentWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">AddStudentWidget::~AddStudentWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> AddStudentWidget::on_returnButton_clicked()&#123;   <span class="comment">//"主菜单"按钮点击</span></span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> AddStudentWidget::on_addButton_clicked()&#123;  <span class="comment">//"添加"按钮点击</span></span><br><span class="line">    QString name = ui-&gt;nameLineEdit-&gt;text();</span><br><span class="line">    <span class="comment">//将用户输入的姓名由nameLineEdit取出</span></span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由idLineEdit取出，并转换为整型</span></span><br><span class="line">    <span class="keyword">int</span> math = ui-&gt;mathLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由mathLineEdit取出，并转换为整型</span></span><br><span class="line">    <span class="keyword">int</span> english = ui-&gt;enLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由enLineEdit取出，并转化为整型</span></span><br><span class="line">    <span class="keyword">int</span> languageC = ui-&gt;cLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由cLineEdit取出，并转化为整型</span></span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;nameLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;mathLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;enLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;cLineEdit-&gt;text() == <span class="string">""</span>)&#123;</span><br><span class="line">        <span class="comment">//插入的五项数据都不能为空，否则在读取文件时会出现问题。</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"存在空项"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    <span class="comment">//实例化一个QFile file为我们的数据文件student.txt</span></span><br><span class="line">    file.open(QIODevice::WriteOnly|QIODevice::Text|QIODevice::Append);</span><br><span class="line">    <span class="comment">//open()可以用来打开文件这里QIODevice::WriteOnly代表将文件以只写的方式打开</span></span><br><span class="line">    <span class="comment">//QIODevice::Text代表我们打开的是文本文件，QIODevice::Text会对end-of-line结束符进行转译</span></span><br><span class="line">    <span class="comment">//QIODevice::Append以追加的方式打开，新增加的内容将被追加到文件末尾</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QTextStream <span class="title">out</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//QTextStream可以进行一些基本的文本读写，比如QString int char之类的数据QDataStream可以进行一个如QMap QPoint之类数据的读写。</span></span><br><span class="line">    out &lt;&lt; name &lt;&lt; <span class="string">" "</span> &lt;&lt;  id &lt;&lt; <span class="string">" "</span> &lt;&lt; math &lt;&lt; <span class="string">" "</span> &lt;&lt; english &lt;&lt; <span class="string">" "</span> &lt;&lt; languageC;</span><br><span class="line">    <span class="comment">//将我们刚刚获取的数据写入文件</span></span><br><span class="line">    file.close();</span><br><span class="line">    QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"插入成功"</span>);</span><br><span class="line">    ui-&gt;nameLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;mathLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;enLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;cLineEdit-&gt;clear();</span><br><span class="line">    <span class="comment">//将用户输入的数据清空</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行一下</p>
<p> <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142628997-69777435.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142640980-133161709.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142717069-1580996710.png" alt="img"></p>
<p>　　显示插入成功，打开项目文件夹所在目录build-StudentManagementSystem开头的文件夹，我们的数据文件student就会出现在此处</p>
<p> <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142740686-400229227.png" alt="img"></p>
<p>打开看一看</p>
<p> <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142801933-2073656640.png" alt="img"></p>
<p>这样，我们的添加信息模块就完成了。</p>
<p>以上源代码：</p>
<p><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_2(add" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_2(add</a>)</p>
<h3 id="7、完善修改信息"><a href="#7、完善修改信息" class="headerlink" title="　　7、完善修改信息"></a>　　7、完善修改信息</h3><p>　　打开modifywidget.h为”删除”与”修改”按钮设计点击槽函数,在modifywidget.cpp中给出函数定义。</p>
<p>　　对于删除和修改操作这里我打算以文件中的数据建立一个数据类型为StudentInfo的QVector容器，容器中盛放全体学生信息。对容器进行删改操作，最后以容器内的数据覆盖原有的数据即可。</p>
<h4 id="modifywidget-h"><a href="#modifywidget-h" class="headerlink" title="　　modifywidget.h"></a>　　modifywidget.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MODIFYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MODIFYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"studentinfo.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ModifyWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModifyWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">ModifyWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~ModifyWidget();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::ModifyWidget *ui;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>; <span class="comment">//点击主菜单按钮</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_deleteButton_clicked</span><span class="params">()</span></span>; <span class="comment">//点击删除按钮</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_modifyButton_clicked</span><span class="params">()</span></span>; <span class="comment">//点击修改按钮</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// MODIFYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="modifywidget-cpp"><a href="#modifywidget-cpp" class="headerlink" title="　　modifywidget.cpp"></a>　　modifywidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"modifywidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_modifywidget.h"</span></span></span><br><span class="line"></span><br><span class="line">ModifyWidget::ModifyWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::ModifyWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ModifyWidget::~ModifyWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> ModifyWidget::on_returnButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> ModifyWidget::on_deleteButton_clicked()&#123;</span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span>)&#123;   <span class="comment">//如果id输入栏为空则输出错误提示并返回</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不得为空!"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读 的方式打开文本文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//QIODevice::Truncate在写入时会从文件开始处写入，覆盖原有内容</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//以file建立一个QT的文本流</span></span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123;</span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        <span class="comment">//读入姓名 学号 数学成绩 英语成绩 C语言成绩</span></span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();  <span class="comment">//文件最后会多读一个无用数据，将其拿出</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//获取用户输入的id</span></span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//记录是否进行过删除</span></span><br><span class="line">    <span class="keyword">for</span>(QVector&lt;StudentInfo&gt;::iterator it = allStudentInfo.begin(); it != allStudentInfo.end(); it++)&#123;</span><br><span class="line">        <span class="comment">//用迭代器遍历allStudentInfo</span></span><br><span class="line">        <span class="keyword">if</span>(it-&gt;getId() == id)&#123;  <span class="comment">//如果找到有id与该id相同的学生，就进行删除</span></span><br><span class="line">            allStudentInfo.erase(it);</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag)&#123;   <span class="comment">//如果进行过删除，弹出对话框并更新文件</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"删除成功"</span>);</span><br><span class="line">        file.open(QIODevice::WriteOnly|QIODevice::Text|QIODevice::Truncate);</span><br><span class="line">        <span class="comment">//以只写覆盖的方式打开文本文件</span></span><br><span class="line">        <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">            QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function">QTextStream <span class="title">out</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : allStudentInfo)&#123;</span><br><span class="line">            out &lt;&lt; i.getName() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getId() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getMath() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getEnglish() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getLanguageC() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        file.close();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//如果没有进行删除，弹出不存在对话框</span></span><br><span class="line">         QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不存在！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">    <span class="comment">//清空id输入框</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> ModifyWidget::on_modifyButton_clicked()&#123;</span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;nameLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;mathLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;enLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;cLineEdit-&gt;text() == <span class="string">""</span>)&#123;</span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"存在空项"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读 的方式打开文本文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//QIODevice::Truncate在写入时会从文件开始处写入，覆盖原有内容</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//以file建立一个QT的文本流</span></span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123;</span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        <span class="comment">//读入姓名 学号 数学成绩 英语成绩 C语言成绩</span></span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();  <span class="comment">//文件最后会多读一个无用数据，将其拿出</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    QString name = ui-&gt;nameLineEdit-&gt;text();</span><br><span class="line">    <span class="keyword">int</span> math = ui-&gt;mathLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">int</span> english = ui-&gt;enLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">int</span> languageC = ui-&gt;cLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(QVector&lt;StudentInfo&gt;::iterator it = allStudentInfo.begin(); it != allStudentInfo.end(); it++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(it-&gt;getId() == id)&#123;</span><br><span class="line">            it-&gt;setName(name);</span><br><span class="line">            it-&gt;setMath(math);</span><br><span class="line">            it-&gt;setEnglish(english);</span><br><span class="line">            it-&gt;setLanguageC(languageC);</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag)&#123;   <span class="comment">//如果进行过修改，弹出对话框并更新文件</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"修改成功"</span>);</span><br><span class="line">        file.open(QIODevice::WriteOnly|QIODevice::Text|QIODevice::Truncate);</span><br><span class="line">        <span class="comment">//以只写覆盖的方式打开文本文件</span></span><br><span class="line">        <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">            QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function">QTextStream <span class="title">out</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : allStudentInfo)&#123;</span><br><span class="line">            out &lt;&lt; i.getName() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getId() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getMath() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getEnglish() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getLanguageC() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        file.close();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//如果没有进行修改，弹出不存在对话框</span></span><br><span class="line">         QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不存在！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;nameLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;mathLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;enLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;cLineEdit-&gt;clear();</span><br><span class="line">    <span class="comment">//清空所有输入框</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，修改模块就完成了</p>
<p>以上源代码：</p>
<p> <a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt _3(add%2Cmodify" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt%20_3(add%2Cmodify)</a>)</p>
<h3 id="8、查询模块"><a href="#8、查询模块" class="headerlink" title="8、查询模块"></a>8、查询模块</h3><p>　　打开selectwidget.h为”删除”与”修改”按钮设计点击槽函数,在selectwidget.cpp中给出函数定义。</p>
<p>　　查询可以在从文件读取时判断是否会读取到id为输入id的学生，也可以向修改一样江所有学生信息先读入到数据类型为StudentInfo的QVector容器中，在从容器中查询数据，这里我选择读入到容器的方法。</p>
<h4 id="selectwidget-h"><a href="#selectwidget-h" class="headerlink" title="selectwidget.h"></a>selectwidget.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SELECTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SELECTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"studentinfo.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">SelectWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SelectWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">SelectWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~SelectWidget();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::SelectWidget *ui;</span><br><span class="line"> </span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_selectButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// SELECTWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="selectwidget-cpp"><a href="#selectwidget-cpp" class="headerlink" title="selectwidget.cpp"></a>selectwidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"selectwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_selectwidget.h"</span></span></span><br><span class="line"></span><br><span class="line">SelectWidget::SelectWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::SelectWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SelectWidget::~SelectWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SelectWidget::on_returnButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SelectWidget::on_selectButton_clicked()&#123;</span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span>)&#123;</span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不能为空"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读的方式打开文本文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//文件打开失败</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//以file作为Qt文本流</span></span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;</span><br><span class="line">    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123; <span class="comment">//读到文件结尾</span></span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();</span><br><span class="line">    <span class="comment">//扔掉最后的无用数据</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i : allStudentInfo)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i.getId() == id)&#123;</span><br><span class="line">            ui-&gt;showNameLabel-&gt;setText(i.getName());</span><br><span class="line">            ui-&gt;showMathLabel-&gt;setText(QString::number(i.getMath()));</span><br><span class="line">            ui-&gt;showEnLabel-&gt;setText(QString::number(i.getEnglish()));</span><br><span class="line">            ui-&gt;showCLabel-&gt;setText(QString::number(i.getLanguageC()));</span><br><span class="line">            ui-&gt;showAvgLabel-&gt;setText(QString::number(i.getAvg()));</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">       QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不存在！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上源代码</p>
<p> <a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_4(add%2Cmodify%2Cselect" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_4(add%2Cmodify%2Cselect</a>)</p>
<h3 id="9、排序模块"><a href="#9、排序模块" class="headerlink" title="9、排序模块"></a>9、排序模块</h3><p>　　老样子，将数据从文件中读入数据类型为StudentInfo的QVector容器后进行排序就容易很多了。</p>
<p>　　我们需要排序时只能根据数学、英语、C语言、平均成绩中的一种进行排序，所以我们要做到代表这四种排序方式的QRedioButton有且只有一个能被选中，我们可以将其加入一个QButtonGroup，这样便可以实现这个需求，至于显示排序后的数据我们可以显示在表格控件QTableWidget中。</p>
<p>　　QButtonGroup直接继承自QObject，他有一个属性exclusive当这个属性为真时，所有在QButtonGroup内的按钮同一时间只有一个可以被选择。</p>
<p>　　QButtonGroup我们用到了addButton添加按钮 与checkedId获取选中按钮的id两个方法，其他方法诸位可以自己去搜索。</p>
<p>　　QTableWidget继承自QTableView，QTableView可以自定义的数据模型显示内容(setModel)但是QTableWidget不行，QTableWidget有固定的数据模型，在像其中填入数据时只需要一个单元格一个单元格的填好就可以了（setItem）</p>
<p>　　QTableWidget我们用到了setHorizontalHeaderLabels设置水平表头标签horizontalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch); 设置根据总宽度调整列宽；setRowCount设置行数；setItem设置单元格，其他方法诸位可以自己去搜索。</p>
<h3 id="sortwidget-h"><a href="#sortwidget-h" class="headerlink" title="sortwidget.h"></a>sortwidget.h</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SORTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SORTWIDGET_H</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QButtonGroup&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"studentinfo.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">SortWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SortWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">SortWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~SortWidget();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::SortWidget *ui;</span><br><span class="line">    QButtonGroup *sortButtonGroup;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>; <span class="comment">//返回菜单</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_sortButton_clicked</span><span class="params">()</span></span>;   <span class="comment">//排序</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// SORTWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="sortwidget-cpp"><a href="#sortwidget-cpp" class="headerlink" title="sortwidget.cpp"></a>sortwidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"sortwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_sortwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line">SortWidget::SortWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::SortWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">    sortButtonGroup = <span class="keyword">new</span> QButtonGroup();</span><br><span class="line">    <span class="comment">//实例化sortButtonGroup</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;mathRadioButton, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//将代表数学的单选框加入sortButtonGroup并将其id设为0</span></span><br><span class="line">    <span class="comment">//不建议使用默认id，默认id是由-2开始依次递减的</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;enRadioButton, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//将代表英语的单选框加入sortButtonGroup并将其id设为1</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;cRadioButton, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">//将代表C语言的单选框加入sortButtonGroup并将其id设为2</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;avgRadioButton, <span class="number">3</span>);</span><br><span class="line">    <span class="comment">//将代表平均的单选框加入sortButtonGroup并将其id设为3</span></span><br><span class="line">    ui-&gt;avgRadioButton-&gt;setChecked(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//平均成绩默认选中</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;setColumnCount(<span class="number">6</span>);</span><br><span class="line">    QStringList headerLabels;</span><br><span class="line">    <span class="comment">//QStringList headerLabels用来记录表格表头数据</span></span><br><span class="line">    headerLabels &lt;&lt; tr(<span class="string">"姓名"</span>) &lt;&lt; tr(<span class="string">"学号"</span>) &lt;&lt; tr(<span class="string">"数学"</span>) &lt;&lt; tr(<span class="string">"英语"</span>) &lt;&lt; tr(<span class="string">"C语言"</span>) &lt;&lt; tr(<span class="string">"平均"</span>);</span><br><span class="line">    ui-&gt;tableWidget-&gt;setHorizontalHeaderLabels(headerLabels);</span><br><span class="line">    <span class="comment">// void setHorizontalHeaderLabels(const QStringList &amp;labels);设置水平表头标签</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;horizontalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch);</span><br><span class="line">    <span class="comment">//设置根据总宽度调整列宽</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;setRowCount(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//初始行数设为一行</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SortWidget::~SortWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SortWidget::on_returnButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">getStudentInfo</span><span class="params">(QVector&lt;StudentInfo&gt; &amp;allStudentInfo)</span></span>&#123;  <span class="comment">//读取信息成功返回true 否则返回false</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读方式打开文本文件student.txt</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//文件打开失败</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123;    <span class="comment">//读到文件结尾</span></span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前声明的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();</span><br><span class="line">    <span class="comment">//扔掉最后的无用数据</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_math</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123;    <span class="comment">//数学排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getMath() &gt; b.getMath();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_English</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123; <span class="comment">//英语排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getEnglish() &gt; b.getEnglish();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_languageC</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123;   <span class="comment">//C语言排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getLanguageC() &gt; b.getLanguageC();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_avg</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123; <span class="comment">//平均成绩排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getAvg() &gt; b.getAvg();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">void</span> SortWidget::on_sortButton_clicked()&#123;</span><br><span class="line">    ui-&gt;tableWidget-&gt;clearContents();</span><br><span class="line">    <span class="comment">//清空除表头外的所有数据</span></span><br><span class="line">    <span class="comment">//若想清除表头可使用clear()</span></span><br><span class="line">    <span class="keyword">int</span> sortTag = sortButtonGroup-&gt;checkedId();</span><br><span class="line">    <span class="comment">//取得当前选中的单选框的id</span></span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;</span><br><span class="line">    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="keyword">if</span>(!getStudentInfo(allStudentInfo)) <span class="comment">//从文件读取数据到allStudentInfo</span></span><br><span class="line">        <span class="keyword">return</span>; <span class="comment">//读取失败直接返回</span></span><br><span class="line">    <span class="keyword">if</span>(allStudentInfo.empty())&#123; <span class="comment">//allStudentInfo中没有数据</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"没有学生信息"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (sortTag) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//sortTag==0根据数学进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_math);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//sortTag==1根据英语进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_English);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//sortTag==2根据C语言进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_languageC);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//sortTag==3根据平均成绩进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_avg);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ui-&gt;tableWidget-&gt;setRowCount(allStudentInfo.size());</span><br><span class="line">    <span class="comment">//将表格的行数设为与学生数量相同</span></span><br><span class="line">    <span class="comment">//否则setItem添加单元格不会生效</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; allStudentInfo.size(); i++)&#123;</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">0</span>, <span class="keyword">new</span> QTableWidgetItem(allStudentInfo[i].getName()));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">1</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getId())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">2</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getMath())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">3</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getEnglish())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">4</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getLanguageC())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">5</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getAvg())));</span><br><span class="line">        <span class="comment">//设置各单元格的数据，非QString类型的数据需要转换为QString</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到此为止我们整个项目便完成了，以后可能还会继续完善。</p>
<p>源代码</p>
<p><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_5(all" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_5(all</a>)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/11/2015%E5%B9%B4%E7%AC%AC%E5%85%AD%E5%B1%8A-%E8%93%9D%E6%A1%A5%E6%9D%AFC-C-%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%9C%AC%E7%A7%91B%E7%BB%84%E5%86%B3%E8%B5%9B-%E5%AE%8C%E7%BE%8E%E6%AD%A3%E6%96%B9%E5%BD%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/11/2015%E5%B9%B4%E7%AC%AC%E5%85%AD%E5%B1%8A-%E8%93%9D%E6%A1%A5%E6%9D%AFC-C-%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%9C%AC%E7%A7%91B%E7%BB%84%E5%86%B3%E8%B5%9B-%E5%AE%8C%E7%BE%8E%E6%AD%A3%E6%96%B9%E5%BD%A2/" class="post-title-link" itemprop="url">2015年第六届 蓝桥杯C  C++程序设计 本科B组决赛 完美正方形</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-11 21:54:34" itemprop="dateCreated datePublished" datetime="2019-04-11T21:54:34+08:00">2019-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><meta name="referrer" content="no-referrer"><br>　　如果一些边长互不相同的正方形，可以恰好拼出一个更大的正方形，则称其为完美正方形。历史上，人们花了很久才找到了若干完美正方形。比如：如下边长的22个正方形</p>
<p>2 3 4 6 7 8 12 13 14 15 16 17 18 21 22 23 24 26 27 28 50 60</p>
<p>如【图1.png】那样组合，就是一种解法。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190411214601151-449620736.png" alt="img"><br>　　此时，紧贴上边沿的是：60 50，紧贴下边沿的是：26 28 17 21 18</p>
<p>　　22阶完美正方形一共有8种。下面的组合是另一种：</p>
<p>2 5 9 11 16 17 19 21 22 24 26 30 31 33 35 36 41 46 47 50 52 61</p>
<p>　　如果告诉你该方案紧贴着上边沿的是从左到右依次为：47 46 61，你能计算出紧贴着下边沿的是哪几个正方形吗？</p>
<p>　　请提交紧贴着下边沿的正方形的边长，从左到右，用空格分开。</p>
<p>不要填写任何多余的内容或说明文字。</p>
<p>解题思路：</p>
<p>　　既然已经给出紧贴着上边沿的三个正方形，便可以得知最终拼接成的大正方形边长为47+46+61=154我们将整个大正方形视为一个154*154的地图，将47 46 61三个正方形先拼到地图顶端。之后找到第一个空闲位置，深搜填入其他正方形，直到找到可以填满地图的填充方式为止。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> EDGE = <span class="number">47</span> + <span class="number">46</span> + <span class="number">61</span>;</span><br><span class="line"><span class="comment">//大正方形边长</span></span><br><span class="line"><span class="keyword">int</span> num[] = &#123;<span class="number">2</span>, <span class="number">5</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">19</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">24</span>, <span class="number">26</span>, <span class="number">30</span>, <span class="number">31</span>, <span class="number">33</span>, <span class="number">35</span>, <span class="number">36</span>, <span class="number">41</span>, <span class="number">50</span>, <span class="number">52</span>&#125;;</span><br><span class="line"><span class="comment">//num需要是有序的</span></span><br><span class="line"><span class="comment">//记录剩下的所有可以被选取的正方形边长</span></span><br><span class="line"><span class="keyword">int</span> vis[<span class="number">20</span>] = &#123;<span class="literal">false</span>&#125;;</span><br><span class="line"><span class="comment">//vis[i]记录i号正方形是否被选取过</span></span><br><span class="line"><span class="keyword">int</span> mp[EDGE][EDGE];</span><br><span class="line"><span class="comment">//地图</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">fillUp</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> length, <span class="keyword">int</span> fillNumber)</span></span>&#123;</span><br><span class="line">    <span class="comment">//填充函数，x y为要填充位置的坐标（要填充正方形的左上角所在位置）</span></span><br><span class="line">    <span class="comment">//length为填充正方形的长度，fillNumber表示填入地图的数字（填充时设为边长，拿出时设为0）</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = x; i &lt; x + length; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = y; j &lt; y + length; j++)</span><br><span class="line">            mp[i][j] = fillNumber;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">isFull</span><span class="params">()</span></span>&#123;  <span class="comment">//判断地图是否已被填满</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; EDGE; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; EDGE; j++)</span><br><span class="line">            <span class="keyword">if</span>(!mp[i][j])</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">judge</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> length)</span></span>&#123;   <span class="comment">//判断位置x y是否能填入边长为length的正方形</span></span><br><span class="line">    <span class="keyword">if</span>(x + length &gt; EDGE || y + length &gt; EDGE)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = x; i &lt; x + length; i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = y; j &lt; y + length; j++)</span><br><span class="line">            <span class="keyword">if</span>(mp[i][j])</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(isFull())  <span class="comment">//如果地图已被填满则找到答案，返回true</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(x &gt; EDGE || y &gt; EDGE)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">int</span> newX, newY;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; EDGE; i++)&#123;  <span class="comment">//将newX newY记录为地图上第一个空位的坐标</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; EDGE; j++)</span><br><span class="line">            <span class="keyword">if</span>(!mp[i][j])&#123;</span><br><span class="line">                newX = i, newY = j;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">19</span>; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(judge(newX, newY, num[i]))&#123;  <span class="comment">//位置newX newY能填入边长为num[i]的正方形 且边长为num[i]的正方形还没有被选取过</span></span><br><span class="line">            <span class="keyword">if</span>(!vis[i])&#123;</span><br><span class="line">                fillUp(newX, newY, num[i], num[i]); <span class="comment">//将长度为num[i]的正方形 填入位置 newX, newY</span></span><br><span class="line">                vis[i] = <span class="literal">true</span>;  <span class="comment">//边长为num[i]的正方形标记为已选取</span></span><br><span class="line">                <span class="keyword">if</span>(dfs(newX, newY + num[i]))</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                fillUp(newX, newY, num[i], <span class="number">0</span>);  <span class="comment">//将长度为num[i]的正方形从位置 newX, newY取出</span></span><br><span class="line">                vis[i] = <span class="literal">false</span>; <span class="comment">//边长为num[i]的正方形标记为未选取</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>   <span class="comment">//由于num是有序的只要num[i]无法放入位置newX newY则之后的正方形都无法放入位置newX newY</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    fillUp(<span class="number">0</span>, <span class="number">0</span>, <span class="number">47</span>, <span class="number">47</span>);</span><br><span class="line">    fillUp(<span class="number">0</span>, <span class="number">47</span>, <span class="number">46</span>, <span class="number">46</span>);</span><br><span class="line">    fillUp(<span class="number">0</span>, <span class="number">93</span>, <span class="number">61</span>, <span class="number">61</span>);</span><br><span class="line">    <span class="comment">//将题中给出的上方三个正方形填入地图</span></span><br><span class="line">    dfs(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//int ans = 0;</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; EDGE; j++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%3d "</span>, mp[<span class="number">153</span>][j]); <span class="comment">//打印最后一行</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/08/PTA-Advanced-Level-1007-Maximum-Subsequence-Sum/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/08/PTA-Advanced-Level-1007-Maximum-Subsequence-Sum/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1007 Maximum Subsequence Sum</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-08 17:25:01" itemprop="dateCreated datePublished" datetime="2019-04-08T17:25:01+08:00">2019-04-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　Given a sequence of K integers { N1, N2, …, NK }. A continuous subsequence is defined to be { Ni, Ni+1, …, Nj } where 1. The Maximum Subsequence is the continuous subsequence which has the largest sum of its elements. For example, given sequence { -2, 11, -4, 13, -5, -2 }, its maximum subsequence is { 11, -4, 13 } with the largest sum being 20.</p>
<p>　　Now you are supposed to find the largest sum, together with the first and the last numbers of the maximum subsequence.</p>
<p><strong>Input Specification:</strong></p>
<p>　　Each input file contains one test case. Each case occupies two lines. The first line contains a positive integer K (≤). The second line contains K numbers, separated by a space.</p>
<p><strong>Output Specification:</strong></p>
<p>　　For each test case, output in one line the largest sum, together with the first and the last numbers of the maximum subsequence. The numbers must be separated by one space, but there must be no extra space at the end of a line. In case that the maximum subsequence is not unique, output the one with the smallest indices i and j (as shown by the sample case). If all the K numbers are negative, then its maximum sum is defined to be 0, and you are supposed to output the first and the last numbers of the whole sequence.</p>
<p><strong>Sample Input:</strong></p>
<p>10</p>
<p>-10 1 2 3 4 -5 -23 3 7 -21</p>
<p><strong>Sample Output:</strong></p>
<p>10 1 4</p>
<p>题目解析</p>
<p>　　本题第一行给出数组长度k，下一行给出k个整数，要求计算出最大连续子串和，并输出最大连续字串的首位与末位，如果整个字符串全为负数，则输出0并输出整个字符串的首位与末位。</p>
<p>　　用数组arr记录给出的数组，最大连续子串和，果断dp。用数组dp[i]记录当字符串以第i位结尾时的最大连续子串和。当i = 0时以首位为结尾的最大连续子串和为首位arr[ i ]的值。</p>
<p>之后的值只会有两种情况：</p>
<p>　　1）以当前位i为结尾时最大连续子串只有其本身arr[ i ]一个元素;</p>
<p>　　2）以当前位i为结尾时最大连续子串有多个元素，即dp[ i - 1] + arr[ i ];</p>
<p>　　可以得到状态转移方程dp[ i ] = max(arr[ i ], dp[ i - 1] + arr[ i ]);</p>
<p>　　至于最大连续子串的首尾两位我们可以在计算dp数组时一并计算，以bg[ i ]记录dp[ i ]对应的最大连续子串的首位，以ed[ i ]记录dp[ i ]对应的最大连续子串的末尾。</p>
<p>注意：</p>
<p>​    若不对整个字符串全为负数的情况做出处理， 测试点4会错误；</p>
<p>　　若对整个字符串全为负数的情况做出处理了，但将字符串存在0的情况也视为全为负数处理，测试点5会错误。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">1e4</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAX];</span><br><span class="line"><span class="keyword">int</span> dp[MAX], bg[MAX], ed[MAX];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;k);    <span class="comment">//输入数组长度k</span></span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;  <span class="comment">//flag记录数组是否全为负数</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)&#123; <span class="comment">//输入数组</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;arr[i]);</span><br><span class="line">        <span class="keyword">if</span>(arr[i] &gt;= <span class="number">0</span>) <span class="comment">//只要存在正数或0则将flag标记位true</span></span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dp[<span class="number">0</span>] = arr[<span class="number">0</span>]; <span class="comment">//以首位为结尾的最大连续连续子串和为首位arr[i]的值</span></span><br><span class="line">    <span class="keyword">int</span> maxSum = arr[<span class="number">0</span>], index = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//maxSum记录最大连续子串和</span></span><br><span class="line">    <span class="comment">//index记录最大连续子串的末位下标</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; k; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(dp[i - <span class="number">1</span>] + arr[i] &gt;= arr[i])&#123;   <span class="comment">//情况2</span></span><br><span class="line">            dp[i] = dp[i - <span class="number">1</span>] + arr[i];</span><br><span class="line">            bg[i] = bg[i - <span class="number">1</span>];  <span class="comment">//记录当前最大连续子串首位下标</span></span><br><span class="line">            ed[i] = i;  <span class="comment">//记录最大连续子串末位下标</span></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;  <span class="comment">//情况1</span></span><br><span class="line">            dp[i] = arr[i];</span><br><span class="line">            bg[i] = ed[i] = i;</span><br><span class="line">            <span class="comment">//最大连续子串首尾下标都为i</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(dp[i] &gt; maxSum)&#123;</span><br><span class="line">            maxSum = dp[i];</span><br><span class="line">            index = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, maxSum, arr[bg[index]], arr[ed[index]]);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"0 %d %d\n"</span>, arr[<span class="number">0</span>], arr[k - <span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　当然本题数据量最大只有1e4，暴力的O(n^2)并不会超时，所以本题暴力依然没有问题。</p>
<p>暴力过一切：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">1e4</span>+<span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> arr[MAX], sum[MAX];</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> k;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;k);</span><br><span class="line">    <span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;arr[i]);</span><br><span class="line">        temp += arr[i];</span><br><span class="line">        sum[i] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> maxSum = <span class="number">-1</span>, bg = <span class="number">0</span>, ed = k - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; k; i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = i; j &lt; k; j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(sum[j] - sum[i] + arr[i] &gt; maxSum)&#123;</span><br><span class="line">                maxSum = sum[j] - sum[i] + arr[i];</span><br><span class="line">                bg = i;</span><br><span class="line">                ed = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(maxSum &lt; <span class="number">0</span>)</span><br><span class="line">        maxSum = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>, maxSum, arr[bg], arr[ed]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/04/PTA-Advanced-Level-1008-Elevator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2019/04/04/PTA-Advanced-Level-1008-Elevator/" class="post-title-link" itemprop="url">PTA (Advanced Level) 1008 Elevator</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-04 12:47:06" itemprop="dateCreated datePublished" datetime="2019-04-04T12:47:06+08:00">2019-04-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95%E7%9B%B8%E5%85%B3/" itemprop="url" rel="index"><span itemprop="name">算法相关</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>　　The highest building in our city has only one elevator. A request list is made up with Npositive numbers. The numbers denote at which floors the elevator will stop, in specified order. It costs 6 seconds to move the elevator up one floor, and 4 seconds to move down one floor. The elevator will stay for 5 seconds at each stop.</p>
<p>　　For a given request list, you are to compute the total time spent to fulfill the requests on the list. The elevator is on the 0th floor at the beginning and does not have to return to the ground floor when the requests are fulfilled.</p>
<h3 id="Input-Specification"><a href="#Input-Specification" class="headerlink" title="Input Specification:"></a>Input Specification:</h3><p>　　Each input file contains one test case. Each case contains a positive integer N, followed by Npositive numbers. All the numbers in the input are less than 100.</p>
<h3 id="Output-Specification"><a href="#Output-Specification" class="headerlink" title="Output Specification:"></a>Output Specification:</h3><p>　　For each test case, print the total time on a single line.</p>
<h3 id="Sample-Input"><a href="#Sample-Input" class="headerlink" title="Sample Input:"></a>Sample Input:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3 2 3 1</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output"><a href="#Sample-Output" class="headerlink" title="Sample Output:"></a>Sample Output:</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">41</span><br></pre></td></tr></table></figure>
<p>题目解析</p>
<p>　　本题首先给出一个整数n代表电梯会停留的层数，之后给出n个数，代表电梯具体停留的楼层，电梯初始在0层，每向上一层会消耗6秒，每向下一层会消耗4秒，在需停留层会停留5秒，电梯最后不需要返回0层。</p>
<p>　　模拟一下电梯的运行过程即可。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> n, t = <span class="number">0</span>, nowf = <span class="number">0</span>; <span class="comment">//n为电梯需停留层数， t为已经消耗的时间， nowf是电梯当前所在的楼层</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);    <span class="comment">//输入电梯需停留层数</span></span><br><span class="line">    <span class="keyword">while</span>(n--)&#123;</span><br><span class="line">        <span class="keyword">int</span> floors;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;floors);   <span class="comment">//输入下一个要停留的楼层</span></span><br><span class="line">        <span class="keyword">while</span>(nowf &lt; floors)&#123;   <span class="comment">//向上运行</span></span><br><span class="line">            nowf++;</span><br><span class="line">            t += <span class="number">6</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(nowf &gt; floors)&#123;   <span class="comment">//向下运行</span></span><br><span class="line">            nowf--;</span><br><span class="line">            t += <span class="number">4</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        t += <span class="number">5</span>; <span class="comment">//停留</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, t);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SUVVM"
      src="/images/ortrait.jpg">
  <p class="site-author-name" itemprop="name">SUVVM</p>
  <div class="site-description" itemprop="description">SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">152</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">85</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/suvvm" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;suvvm" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/suvvm@foxmail.com" title="E-Mail → suvvm@foxmail.com"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SUVVM</span>
	<a href="http://www.beian.miit.gov.cn/"  style="color:#f72b07" target="_blank">鲁ICP备19040043号-2</a>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
