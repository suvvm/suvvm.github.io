<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/ortrait.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/ortrait.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/ortrait.jpg">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.suvvm.work","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="一、项目设计　　1、需求分析　　记录并处理学生成绩信息。 　　1）添加新的学生数据； 　　2）根据学号对已有的学生数据进行修改； 　　3）根据学号删除已存在的学生信息； 　　4）根据学号查询学生信息； 　　5）根据各门成绩与平均成绩进行排序。 　　2、窗口设计　　1）菜单窗口； 　　2）添加学生窗口； 　　3）修改信息窗口（包括删除信息）； 　　4）查询学生窗口 　　5）排序窗口； 　　3、数据">
<meta property="og:type" content="article">
<meta property="og:title" content="Qt5--从零开始的学生管理系统">
<meta property="og:url" content="https://www.suvvm.work/2019/04/17/Qt5-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/index.html">
<meta property="og:site_name" content="SUVVM">
<meta property="og:description" content="一、项目设计　　1、需求分析　　记录并处理学生成绩信息。 　　1）添加新的学生数据； 　　2）根据学号对已有的学生数据进行修改； 　　3）根据学号删除已存在的学生信息； 　　4）根据学号查询学生信息； 　　5）根据各门成绩与平均成绩进行排序。 　　2、窗口设计　　1）菜单窗口； 　　2）添加学生窗口； 　　3）修改信息窗口（包括删除信息）； 　　4）查询学生窗口 　　5）排序窗口； 　　3、数据">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135537743-346606840.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135642056-2079261753.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135819172-1344535597.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135901363-1389249971.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135912811-1823331648.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417140255883-1145969539.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417140423744-971443667.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141128411-873116665.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141145625-303859315.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141209265-1987825417.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141240402-1168770826.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142628997-69777435.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142640980-133161709.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142717069-1580996710.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142740686-400229227.png">
<meta property="og:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142801933-2073656640.png">
<meta property="article:published_time" content="2019-04-17T06:44:58.000Z">
<meta property="article:modified_time" content="2020-12-19T14:05:00.656Z">
<meta property="article:author" content="SUVVM">
<meta property="article:tag" content="Qt5">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135537743-346606840.png">

<link rel="canonical" href="https://www.suvvm.work/2019/04/17/Qt5-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Qt5--从零开始的学生管理系统 | SUVVM</title>
  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e5190116d64be66cac29daef18c94ac0";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">SUVVM</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">呜嗷SUVVM</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="calendar fa-fw"></i>日程表</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://www.suvvm.work/2019/04/17/Qt5-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ortrait.jpg">
      <meta itemprop="name" content="SUVVM">
      <meta itemprop="description" content="SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SUVVM">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Qt5--从零开始的学生管理系统
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-04-17 14:44:58" itemprop="dateCreated datePublished" datetime="2019-04-17T14:44:58+08:00">2019-04-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-12-19 22:05:00" itemprop="dateModified" datetime="2020-12-19T22:05:00+08:00">2020-12-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E8%B7%B5/" itemprop="url" rel="index"><span itemprop="name">项目实践</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><meta name="referrer" content="no-referrer"></p>
<h2 id="一、项目设计"><a href="#一、项目设计" class="headerlink" title="一、项目设计"></a>一、项目设计</h2><h3 id="1、需求分析"><a href="#1、需求分析" class="headerlink" title="　　1、需求分析"></a>　　1、需求分析</h3><p>　　记录并处理学生成绩信息。</p>
<p>　　1）添加新的学生数据；</p>
<p>　　2）根据学号对已有的学生数据进行修改；</p>
<p>　　3）根据学号删除已存在的学生信息；</p>
<p>　　4）根据学号查询学生信息；</p>
<p>　　5）根据各门成绩与平均成绩进行排序。</p>
<h3 id="2、窗口设计"><a href="#2、窗口设计" class="headerlink" title="　　2、窗口设计"></a>　　2、窗口设计</h3><p>　　1）菜单窗口；</p>
<p>　　2）添加学生窗口；</p>
<p>　　3）修改信息窗口（包括删除信息）；</p>
<p>　　4）查询学生窗口</p>
<p>　　5）排序窗口；</p>
<h3 id="3、数据结构设计"><a href="#3、数据结构设计" class="headerlink" title="　　3、数据结构设计"></a>　　3、数据结构设计</h3><p>　　以一个类StudentInfo储存单个学生信息，学生类中包括：</p>
<p>　　姓名（字符串）</p>
<p>　　学号（整型）</p>
<p>　　数学成绩（整型）</p>
<p>　　英语成绩（整型）</p>
<p>　　C语言程序设计成绩（整型）</p>
<p>　　平均成绩（双浮点数）</p>
<h2 id="二、项目制作"><a href="#二、项目制作" class="headerlink" title="二、项目制作"></a>二、项目制作</h2><h3 id="1、建立项目"><a href="#1、建立项目" class="headerlink" title="1、建立项目"></a>1、建立项目</h3><p>　　打开Qt Creator 文件-&gt;新建文件或项目（Ctrl+N）-&gt;其他项目-&gt;空的Qt项目（Empty qmacke Project）</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135537743-346606840.png" alt="img"></p>
<h3 id="2、添加窗口"><a href="#2、添加窗口" class="headerlink" title="2、添加窗口"></a>2、添加窗口</h3><p>　　将其命名为StudentManagementSystem_Qt一路下一步到结束。</p>
<p>　　右击项目名称-&gt;Add New-&gt;Qt -&gt; Qt设计师界面模板选择Widget下一步，我们当前建立的是菜单窗口，所以将其类名命名为MenuWidget一路下一步到结束。</p>
<p>　　以同样的方式建立添加学生窗口：AddStudentWidget、修改信息窗口：ModifyWidget、查询窗口：SelectWidget、排序窗口：SortWidget。</p>
<p>　　完成后的项目资源管理器页面中应该有如下文件</p>
<p>　　 <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135642056-2079261753.png" alt="img"></p>
<p>　　我们可以看到Qt中建立模板为widget的设计师界面就是建立了一个c++类（继承自QWidget）与其对应的ui文件 ，这个ui文件便是Qt Designer设计文件，它会在编译时生成一个ui_*.h文件，这样我们便可以用c++的方式对其进行调用。</p>
<p>　　Qt Designer的详细使用方法可以看官方的手册：<a href="https://doc.qt.io/archives/qt-4.8/designer-manual.html" target="_blank" rel="noopener">https://doc.qt.io/archives/qt-4.8/designer-manual.html</a></p>
<p>　　之后打开我们的menuwidget.h，会发现其中存在错误。</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135819172-1344535597.png" alt="img"></p>
<p>　　这是因为我们的项目中没有连接Qt Widgets库，在StudentManagementSystem_Qt.pro中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">QT +&#x3D; widgets</span><br></pre></td></tr></table></figure>
<p>可解决问题。</p>
<h3 id="3、实现窗口之间的切换"><a href="#3、实现窗口之间的切换" class="headerlink" title="　　3、实现窗口之间的切换"></a>　　3、实现窗口之间的切换</h3><p>　　现在，就是实现我们新建立的几个窗口之间的窗口切换问题的时候了，这里我打算使用QStackedLayout实现窗口切换。</p>
<p>　　QStackedLayout继承自QLayout，提供了多页面切换的布局，一次只能看到一个界面，在我的Qt5——从零开始的Hello World教程(Qt Creator) 中提到过，大部分控件都继承自QFrame，而QFrame又继承自QWidget，所以QStackedLayout完全可以实现窗口之间的切换。</p>
<p>　　现在我们用与上一步相同的方法建立一个窗口MainWidget。并添加一个main.cpp来写main函数</p>
<p>　　 <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135901363-1389249971.png" alt="img"></p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417135912811-1823331648.png" alt="img"></p>
<p>　　在mainwidget.h中修改MainWidget的定义，为其添加成员</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MenuWidget *menuwidget;        &#x2F;&#x2F;菜单窗口</span><br><span class="line">AddStudentWidget *addstudentwidget;   &#x2F;&#x2F;添加学生窗口</span><br><span class="line">SelectWidget *selectwidget;    &#x2F;&#x2F;查询窗口</span><br><span class="line">ModifyWidget *modifywidget;    &#x2F;&#x2F;修改窗口</span><br><span class="line">SortWidget *sortwidget;        &#x2F;&#x2F;排序窗口</span><br><span class="line">QStackedLayout *stackLayout;   &#x2F;&#x2F;QStackedLayout布局</span><br></pre></td></tr></table></figure>
<p>​    当然，也需要引用其对应的头文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;QStackedLayout&gt;</span><br><span class="line">#include &quot;menuwidget.h&quot;</span><br><span class="line">#include &quot;addstudentwidget.h&quot;</span><br><span class="line">#include &quot;selectwidget.h&quot;</span><br><span class="line">#include &quot;modifywidget.h&quot;</span><br><span class="line">#include &quot;sortwidget.h&quot;</span><br></pre></td></tr></table></figure>
<p>​    在MainWidget.cpp中将MainWidget设为stackLayout布局，声明我们需要的窗口，并将其加入stackLayout布局中去。</p>
<p>​    在MainWidget.cpp中显示调用MainWidget构造函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MainWidget::MainWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(new Ui::MainWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(this);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　处添加。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">menuwidget = <span class="keyword">new</span> MenuWidget;</span><br><span class="line">addstudentwidget = <span class="keyword">new</span> AddStudentWidget;</span><br><span class="line">selectwidget = <span class="keyword">new</span> SelectWidget;</span><br><span class="line">modifywidget = <span class="keyword">new</span> ModifyWidget;</span><br><span class="line">sortwidget = <span class="keyword">new</span> SortWidget;</span><br><span class="line">stackLayout = <span class="keyword">new</span> QStackedLayout;</span><br><span class="line"></span><br><span class="line">stackLayout-&gt;addWidget(menuwidget);</span><br><span class="line">stackLayout-&gt;addWidget(addstudentwidget);</span><br><span class="line">stackLayout-&gt;addWidget(selectwidget);</span><br><span class="line">stackLayout-&gt;addWidget(modifywidget);</span><br><span class="line">stackLayout-&gt;addWidget(sortwidget);</span><br><span class="line"></span><br><span class="line">setLayout(stackLayout);</span><br></pre></td></tr></table></figure>
<p>  之后就需要使用Qt designer 设计页面了（当然在对应类中手动添加成员控件也没有任何问题）。</p>
<p>​    双击mainwidget.ui就打开了设计页面</p>
<p>​    在menuwidget中添加如下按钮（push button）</p>
<p>　　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417140255883-1145969539.png" alt="img"></p>
<p>　　以同样的方法在addstudentwidget,selectwidget,modifywidget,sortwidget中都添加一个返回按钮returnButton。</p>
<p>　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417140423744-971443667.png" alt="img"></p>
<p>　　为这些按钮设计点击槽函数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">menuwidget.h:</span><br><span class="line">    <span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_addButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_selectButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_modifyButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_sortButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_exitButton_clicked</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<p> 还需要一个方法作为stackLayout切换页面的信号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">signals:</span><br><span class="line">    void display(int number);</span><br></pre></td></tr></table></figure>
<p>  在menuwidget.cpp中给出函数定义</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> MenuWidget::on_addButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_selectButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_modifyButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_sortButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> MenuWidget::on_exitButton_clicked()&#123;</span><br><span class="line">    QApplication::<span class="built_in">exit</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>emit 把connect把信号和槽进行关联，emit某个信号，就相当于调用这个信号connect时所关联的槽函数。至于更多关于 emit信息诸位可以搜索或者看帮助文档。</p>
<p>之后为addstudentwidget,selectwidget,modifywidget,sortwidget窗口中的按钮设计信号与槽函数</p>
<p>在（类名）.h中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">signals:</span><br><span class="line">    void display(int number);</span><br><span class="line">private slots:</span><br><span class="line">    void on_returnButton_clicked();</span><br></pre></td></tr></table></figure>
<p>在（类名）.cpp中添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">void （类名）::on_returnButton_clicked()&#123;</span><br><span class="line">    emit display(0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>　　现在可以使用的只有退出按钮，跳转按钮还需要在mainwidget.cpp中用connect函数连接。</p>
<p>　　到此为止便完成了页面切换功能。</p>
<p>　　到次为止的源码：</p>
<p>​       <a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt</a></p>
<h3 id="4、完善窗口设计"><a href="#4、完善窗口设计" class="headerlink" title="　　4、完善窗口设计"></a>　　4、完善窗口设计</h3><h4 id="1：AddStudentWidget"><a href="#1：AddStudentWidget" class="headerlink" title="1：AddStudentWidget"></a>1：AddStudentWidget</h4><p>​    我们需要提示标签来指明输入的数据，也需要输入框来接收用户的输入，QLabel与QLineEdit可以满足我们的要求。</p>
<p>　　QLabel，QLineEdit有方法setText(“内容”)来改变其显示的文字，有方法setGeometry (起始横坐标，起始纵坐标，宽， 高)来设置左上角起始位置与大小。</p>
<p>　　当然这些都可以在Qt Designer中直接设置。打开addstudentwidget.ui。</p>
<p>　　根据之前设计的数据结构，需要nameLineEdit、idLineEdit、mathLineEdit、enLineEdit、cLineEdit五个QLineEdit接收学生的姓名、学号、数学成绩、英语成绩、C语言成绩（平均成绩由计算得出），需要nameLabel、idLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户输入数据，需要addButton 一个QPushButton来添加学生。</p>
<p>　　最终将addstudentwidget页面设计为。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141128411-873116665.png" alt="img"></p>
<h4 id="2：modifyWidget"><a href="#2：modifyWidget" class="headerlink" title="　　2：modifyWidget"></a>　　2：modifyWidget</h4><p>　　我们需要nameLineEdit、idLineEdit、mathLineEdit、enLineEdit、cLineEdit五个QLineEdit接收学生的姓名、学号、数学成绩、英语成绩、C语言成绩（平均成绩由计算得出），需要nameLabel、idLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户输入数据，需要deleteButton、modifyButton 两个QPushButton来根据学号删除学生，和根据学号修改学生信息。</p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141145625-303859315.png" alt="img"></p>
<h4 id="3：selectwidget"><a href="#3：selectwidget" class="headerlink" title="　　3：selectwidget"></a>　　3：selectwidget</h4><p>　　我们需要idLabel一个QLabel提醒用户输入数据，需要idLineEdit一个QLineEdit接收学生的学号，之后需要nameLabel、avgLabel、mathLabel、enLabel、cLabel五个QLabel提醒用户显示的数据，需要showNameLabel、showMathLabel、showEnLabel、showCLabel、showAvgLabel五个QLabel来接收查询到的数据，需要selectButton一个QPushButton来提交查询。 </p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141209265-1987825417.png" alt="img"></p>
<h4 id="4：sortwidget"><a href="#4：sortwidget" class="headerlink" title="　　4：sortwidget"></a>　　4：sortwidget</h4><p>　　QRadioButton单选框可以解决我们的排序根据选择问题</p>
<p>　　（当然，许多方法都可以，这里只演示QRadioButton）</p>
<p>　　QTableWidget表格可以用来显示排序后的信息。</p>
<p>　　我们需要mathRadioButton、enRadioButton、cRadioButton、avgRadioButton四个QRadioButton来选择排序的根据，需要sortButton一个QPushButton来提交排序，需要tableWidget一个 QTableWidget来显示排序结果。</p>
<p> 　<img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417141240402-1168770826.png" alt="img"></p>
<p>到此为止的源码：</p>
<p><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_1(uiOnly" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_1(uiOnly</a>)</p>
<h3 id="5、完成学生类的设计"><a href="#5、完成学生类的设计" class="headerlink" title="　　5、完成学生类的设计"></a>　　5、完成学生类的设计</h3><p>​    之前在数据结构设计中我们已经设计好了，以一个类StudentInfo储存单个学生信息，学生类中包括：</p>
<p>  姓名（字符串）</p>
<p>  学号（整型）</p>
<p>  数学成绩（整型）</p>
<p>  英语成绩（整型）</p>
<p>  C语言程序设计成绩（整型）</p>
<p>  平均成绩（双浮点数）</p>
<p>现在着手去实现它</p>
<p>​    右击项目Add New选择C++ C++Class 为它起名叫StudentInfo之后下一步到完成，在studentinfo.h中为其创建对应的私有变量，及其对应的get与set函数。</p>
<h4 id="studentinfo-h"><a href="#studentinfo-h" class="headerlink" title="　　studentinfo.h"></a>　　studentinfo.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentInfo</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    QString name;</span><br><span class="line">    <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">    <span class="keyword">double</span> avg;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    StudentInfo();</span><br><span class="line">    StudentInfo(QString tname, <span class="keyword">int</span> tid, <span class="keyword">int</span> tmath, <span class="keyword">int</span> tenglish, <span class="keyword">int</span> tlanguageC)&#123;</span><br><span class="line">        name = tname;</span><br><span class="line">        id = tid;</span><br><span class="line">        math = tmath;</span><br><span class="line">        english = tenglish;</span><br><span class="line">        languageC = tlanguageC;</span><br><span class="line">        avg = (tmath + tenglish + tlanguageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QString <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getMath</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> math;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getEnglish</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> english;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getLanguageC</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> languageC;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">getAvg</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> avg;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setId</span><span class="params">(<span class="keyword">int</span> tid)</span></span>&#123;</span><br><span class="line">        id = tid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setName</span><span class="params">(QString tname)</span></span>&#123;</span><br><span class="line">        name = tname;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setMath</span><span class="params">(<span class="keyword">int</span> tmath)</span></span>&#123;</span><br><span class="line">        math = tmath;</span><br><span class="line">        avg = (math + english + languageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setEnglish</span><span class="params">(<span class="keyword">int</span> tenglish)</span></span>&#123;</span><br><span class="line">        english = tenglish;</span><br><span class="line">        avg = (math + english + languageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setLanguageC</span><span class="params">(<span class="keyword">int</span> tlanguageC)</span></span>&#123;</span><br><span class="line">        languageC = tlanguageC;</span><br><span class="line">        avg = (math + english + languageC) / <span class="number">3.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="6、完善添加学生信息"><a href="#6、完善添加学生信息" class="headerlink" title="　　6、完善添加学生信息"></a>　　6、完善添加学生信息</h3><p>​    打开addstudentwidget.h为”添加”按钮设计点击槽函数，由于我们设计用文件对学生信息进行储存，所以需要引用QFile，这里我使用对话框来提示用户操作中的各种问题，所以需要引入QMessageBox。</p>
<p>　　QMessageBox中有很多类型的对话框，各对话框的用法这里就不详细介绍了，这里我们只介绍我们即将用到的QMessageBox::about</p>
<p>　　QMessageBox::about(NULL, “About”, “About this application”);</p>
<p>　　其中三个参数分别对应，父窗口对象， 对话框标题， 对话框内容。</p>
<p>　　在addstudentwidget.cpp中给出函数定义：</p>
<p>　　在lineEdit中取出用户输入的数据，lineEdit拥有text()方法，会返回一个QString，而QString中又拥有入toInt() toDouble()等各种类型转换函数，可以适应我们的大多数要求。</p>
<p>　　打开数据文件将我们刚刚获取的数据追加在文件结尾。</p>
<h4 id="addstudentwidget-h"><a href="#addstudentwidget-h" class="headerlink" title="　　addstudentwidget.h"></a>　　addstudentwidget.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> ADDSTUDENTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> ADDSTUDENTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">AddStudentWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddStudentWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">AddStudentWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~AddStudentWidget();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::AddStudentWidget *ui;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_addButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// ADDSTUDENTWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="addstudentwidget-cpp"><a href="#addstudentwidget-cpp" class="headerlink" title="　　addstudentwidget.cpp"></a>　　addstudentwidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"addstudentwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_addstudentwidget.h"</span></span></span><br><span class="line">AddStudentWidget::AddStudentWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::AddStudentWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">AddStudentWidget::~AddStudentWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> AddStudentWidget::on_returnButton_clicked()&#123;   <span class="comment">//"主菜单"按钮点击</span></span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> AddStudentWidget::on_addButton_clicked()&#123;  <span class="comment">//"添加"按钮点击</span></span><br><span class="line">    QString name = ui-&gt;nameLineEdit-&gt;text();</span><br><span class="line">    <span class="comment">//将用户输入的姓名由nameLineEdit取出</span></span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由idLineEdit取出，并转换为整型</span></span><br><span class="line">    <span class="keyword">int</span> math = ui-&gt;mathLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由mathLineEdit取出，并转换为整型</span></span><br><span class="line">    <span class="keyword">int</span> english = ui-&gt;enLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由enLineEdit取出，并转化为整型</span></span><br><span class="line">    <span class="keyword">int</span> languageC = ui-&gt;cLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//将用户输入的学号由cLineEdit取出，并转化为整型</span></span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;nameLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;mathLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;enLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;cLineEdit-&gt;text() == <span class="string">""</span>)&#123;</span><br><span class="line">        <span class="comment">//插入的五项数据都不能为空，否则在读取文件时会出现问题。</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"存在空项"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    <span class="comment">//实例化一个QFile file为我们的数据文件student.txt</span></span><br><span class="line">    file.open(QIODevice::WriteOnly|QIODevice::Text|QIODevice::Append);</span><br><span class="line">    <span class="comment">//open()可以用来打开文件这里QIODevice::WriteOnly代表将文件以只写的方式打开</span></span><br><span class="line">    <span class="comment">//QIODevice::Text代表我们打开的是文本文件，QIODevice::Text会对end-of-line结束符进行转译</span></span><br><span class="line">    <span class="comment">//QIODevice::Append以追加的方式打开，新增加的内容将被追加到文件末尾</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QTextStream <span class="title">out</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//QTextStream可以进行一些基本的文本读写，比如QString int char之类的数据QDataStream可以进行一个如QMap QPoint之类数据的读写。</span></span><br><span class="line">    out &lt;&lt; name &lt;&lt; <span class="string">" "</span> &lt;&lt;  id &lt;&lt; <span class="string">" "</span> &lt;&lt; math &lt;&lt; <span class="string">" "</span> &lt;&lt; english &lt;&lt; <span class="string">" "</span> &lt;&lt; languageC;</span><br><span class="line">    <span class="comment">//将我们刚刚获取的数据写入文件</span></span><br><span class="line">    file.close();</span><br><span class="line">    QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"插入成功"</span>);</span><br><span class="line">    ui-&gt;nameLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;mathLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;enLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;cLineEdit-&gt;clear();</span><br><span class="line">    <span class="comment">//将用户输入的数据清空</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行一下</p>
<p> <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142628997-69777435.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142640980-133161709.png" alt="img"></p>
<p><img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142717069-1580996710.png" alt="img"></p>
<p>　　显示插入成功，打开项目文件夹所在目录build-StudentManagementSystem开头的文件夹，我们的数据文件student就会出现在此处</p>
<p> <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142740686-400229227.png" alt="img"></p>
<p>打开看一看</p>
<p> <img src="https://img2018.cnblogs.com/blog/1447131/201904/1447131-20190417142801933-2073656640.png" alt="img"></p>
<p>这样，我们的添加信息模块就完成了。</p>
<p>以上源代码：</p>
<p><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_2(add" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_2(add</a>)</p>
<h3 id="7、完善修改信息"><a href="#7、完善修改信息" class="headerlink" title="　　7、完善修改信息"></a>　　7、完善修改信息</h3><p>　　打开modifywidget.h为”删除”与”修改”按钮设计点击槽函数,在modifywidget.cpp中给出函数定义。</p>
<p>　　对于删除和修改操作这里我打算以文件中的数据建立一个数据类型为StudentInfo的QVector容器，容器中盛放全体学生信息。对容器进行删改操作，最后以容器内的数据覆盖原有的数据即可。</p>
<h4 id="modifywidget-h"><a href="#modifywidget-h" class="headerlink" title="　　modifywidget.h"></a>　　modifywidget.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> MODIFYWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MODIFYWIDGET_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"studentinfo.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">ModifyWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModifyWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">ModifyWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~ModifyWidget();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::ModifyWidget *ui;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>; <span class="comment">//点击主菜单按钮</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_deleteButton_clicked</span><span class="params">()</span></span>; <span class="comment">//点击删除按钮</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_modifyButton_clicked</span><span class="params">()</span></span>; <span class="comment">//点击修改按钮</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// MODIFYWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="modifywidget-cpp"><a href="#modifywidget-cpp" class="headerlink" title="　　modifywidget.cpp"></a>　　modifywidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"modifywidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_modifywidget.h"</span></span></span><br><span class="line"></span><br><span class="line">ModifyWidget::ModifyWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::ModifyWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ModifyWidget::~ModifyWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> ModifyWidget::on_returnButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> ModifyWidget::on_deleteButton_clicked()&#123;</span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span>)&#123;   <span class="comment">//如果id输入栏为空则输出错误提示并返回</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不得为空!"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读 的方式打开文本文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//QIODevice::Truncate在写入时会从文件开始处写入，覆盖原有内容</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//以file建立一个QT的文本流</span></span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123;</span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        <span class="comment">//读入姓名 学号 数学成绩 英语成绩 C语言成绩</span></span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();  <span class="comment">//文件最后会多读一个无用数据，将其拿出</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="comment">//获取用户输入的id</span></span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">//记录是否进行过删除</span></span><br><span class="line">    <span class="keyword">for</span>(QVector&lt;StudentInfo&gt;::iterator it = allStudentInfo.begin(); it != allStudentInfo.end(); it++)&#123;</span><br><span class="line">        <span class="comment">//用迭代器遍历allStudentInfo</span></span><br><span class="line">        <span class="keyword">if</span>(it-&gt;getId() == id)&#123;  <span class="comment">//如果找到有id与该id相同的学生，就进行删除</span></span><br><span class="line">            allStudentInfo.erase(it);</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag)&#123;   <span class="comment">//如果进行过删除，弹出对话框并更新文件</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"删除成功"</span>);</span><br><span class="line">        file.open(QIODevice::WriteOnly|QIODevice::Text|QIODevice::Truncate);</span><br><span class="line">        <span class="comment">//以只写覆盖的方式打开文本文件</span></span><br><span class="line">        <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">            QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function">QTextStream <span class="title">out</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : allStudentInfo)&#123;</span><br><span class="line">            out &lt;&lt; i.getName() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getId() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getMath() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getEnglish() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getLanguageC() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        file.close();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//如果没有进行删除，弹出不存在对话框</span></span><br><span class="line">         QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不存在！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">    <span class="comment">//清空id输入框</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> ModifyWidget::on_modifyButton_clicked()&#123;</span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;nameLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;mathLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;enLineEdit-&gt;text() == <span class="string">""</span> || ui-&gt;cLineEdit-&gt;text() == <span class="string">""</span>)&#123;</span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"存在空项"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读 的方式打开文本文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//QIODevice::Truncate在写入时会从文件开始处写入，覆盖原有内容</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//以file建立一个QT的文本流</span></span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123;</span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        <span class="comment">//读入姓名 学号 数学成绩 英语成绩 C语言成绩</span></span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();  <span class="comment">//文件最后会多读一个无用数据，将其拿出</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    QString name = ui-&gt;nameLineEdit-&gt;text();</span><br><span class="line">    <span class="keyword">int</span> math = ui-&gt;mathLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">int</span> english = ui-&gt;enLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">int</span> languageC = ui-&gt;cLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(QVector&lt;StudentInfo&gt;::iterator it = allStudentInfo.begin(); it != allStudentInfo.end(); it++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(it-&gt;getId() == id)&#123;</span><br><span class="line">            it-&gt;setName(name);</span><br><span class="line">            it-&gt;setMath(math);</span><br><span class="line">            it-&gt;setEnglish(english);</span><br><span class="line">            it-&gt;setLanguageC(languageC);</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(flag)&#123;   <span class="comment">//如果进行过修改，弹出对话框并更新文件</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"修改成功"</span>);</span><br><span class="line">        file.open(QIODevice::WriteOnly|QIODevice::Text|QIODevice::Truncate);</span><br><span class="line">        <span class="comment">//以只写覆盖的方式打开文本文件</span></span><br><span class="line">        <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//如果数据文件没有打开，弹出对话框提示用户</span></span><br><span class="line">            QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function">QTextStream <span class="title">out</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">auto</span> i : allStudentInfo)&#123;</span><br><span class="line">            out &lt;&lt; i.getName() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getId() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getMath() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getEnglish() &lt;&lt; <span class="string">" "</span> &lt;&lt; i.getLanguageC() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        file.close();</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="comment">//如果没有进行修改，弹出不存在对话框</span></span><br><span class="line">         QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不存在！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;nameLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;mathLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;enLineEdit-&gt;clear();</span><br><span class="line">    ui-&gt;cLineEdit-&gt;clear();</span><br><span class="line">    <span class="comment">//清空所有输入框</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，修改模块就完成了</p>
<p>以上源代码：</p>
<p> <a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt _3(add%2Cmodify" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt%20_3(add%2Cmodify)</a>)</p>
<h3 id="8、查询模块"><a href="#8、查询模块" class="headerlink" title="8、查询模块"></a>8、查询模块</h3><p>　　打开selectwidget.h为”删除”与”修改”按钮设计点击槽函数,在selectwidget.cpp中给出函数定义。</p>
<p>　　查询可以在从文件读取时判断是否会读取到id为输入id的学生，也可以向修改一样江所有学生信息先读入到数据类型为StudentInfo的QVector容器中，在从容器中查询数据，这里我选择读入到容器的方法。</p>
<h4 id="selectwidget-h"><a href="#selectwidget-h" class="headerlink" title="selectwidget.h"></a>selectwidget.h</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SELECTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SELECTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QtDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"studentinfo.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">SelectWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SelectWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">SelectWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~SelectWidget();</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::SelectWidget *ui;</span><br><span class="line"> </span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_selectButton_clicked</span><span class="params">()</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// SELECTWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="selectwidget-cpp"><a href="#selectwidget-cpp" class="headerlink" title="selectwidget.cpp"></a>selectwidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"selectwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_selectwidget.h"</span></span></span><br><span class="line"></span><br><span class="line">SelectWidget::SelectWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::SelectWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SelectWidget::~SelectWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SelectWidget::on_returnButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SelectWidget::on_selectButton_clicked()&#123;</span><br><span class="line">    <span class="keyword">if</span>(ui-&gt;idLineEdit-&gt;text() == <span class="string">""</span>)&#123;</span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不能为空"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读的方式打开文本文件</span></span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//文件打开失败</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="comment">//以file作为Qt文本流</span></span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;</span><br><span class="line">    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123; <span class="comment">//读到文件结尾</span></span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前建立的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();</span><br><span class="line">    <span class="comment">//扔掉最后的无用数据</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    <span class="keyword">int</span> id = ui-&gt;idLineEdit-&gt;text().toInt();</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">auto</span> i : allStudentInfo)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i.getId() == id)&#123;</span><br><span class="line">            ui-&gt;showNameLabel-&gt;setText(i.getName());</span><br><span class="line">            ui-&gt;showMathLabel-&gt;setText(QString::number(i.getMath()));</span><br><span class="line">            ui-&gt;showEnLabel-&gt;setText(QString::number(i.getEnglish()));</span><br><span class="line">            ui-&gt;showCLabel-&gt;setText(QString::number(i.getLanguageC()));</span><br><span class="line">            ui-&gt;showAvgLabel-&gt;setText(QString::number(i.getAvg()));</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!flag)&#123;</span><br><span class="line">       QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"id不存在！"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    ui-&gt;idLineEdit-&gt;clear();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上源代码</p>
<p> <a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_4(add%2Cmodify%2Cselect" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_4(add%2Cmodify%2Cselect</a>)</p>
<h3 id="9、排序模块"><a href="#9、排序模块" class="headerlink" title="9、排序模块"></a>9、排序模块</h3><p>　　老样子，将数据从文件中读入数据类型为StudentInfo的QVector容器后进行排序就容易很多了。</p>
<p>　　我们需要排序时只能根据数学、英语、C语言、平均成绩中的一种进行排序，所以我们要做到代表这四种排序方式的QRedioButton有且只有一个能被选中，我们可以将其加入一个QButtonGroup，这样便可以实现这个需求，至于显示排序后的数据我们可以显示在表格控件QTableWidget中。</p>
<p>　　QButtonGroup直接继承自QObject，他有一个属性exclusive当这个属性为真时，所有在QButtonGroup内的按钮同一时间只有一个可以被选择。</p>
<p>　　QButtonGroup我们用到了addButton添加按钮 与checkedId获取选中按钮的id两个方法，其他方法诸位可以自己去搜索。</p>
<p>　　QTableWidget继承自QTableView，QTableView可以自定义的数据模型显示内容(setModel)但是QTableWidget不行，QTableWidget有固定的数据模型，在像其中填入数据时只需要一个单元格一个单元格的填好就可以了（setItem）</p>
<p>　　QTableWidget我们用到了setHorizontalHeaderLabels设置水平表头标签horizontalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch); 设置根据总宽度调整列宽；setRowCount设置行数；setItem设置单元格，其他方法诸位可以自己去搜索。</p>
<h3 id="sortwidget-h"><a href="#sortwidget-h" class="headerlink" title="sortwidget.h"></a>sortwidget.h</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> SORTWIDGET_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SORTWIDGET_H</span></span><br><span class="line"> </span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QWidget&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QButtonGroup&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QVector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QFile&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QDebug&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;QMessageBox&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"studentinfo.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> Ui &#123;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">SortWidget</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SortWidget</span> :</span> <span class="keyword">public</span> QWidget</span><br><span class="line">&#123;</span><br><span class="line">    Q_OBJECT</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">SortWidget</span><span class="params">(QWidget *parent = <span class="literal">nullptr</span>)</span></span>;</span><br><span class="line">    ~SortWidget();</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Ui::SortWidget *ui;</span><br><span class="line">    QButtonGroup *sortButtonGroup;</span><br><span class="line">signals:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> number)</span></span>;</span><br><span class="line"><span class="keyword">private</span> slots:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_returnButton_clicked</span><span class="params">()</span></span>; <span class="comment">//返回菜单</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">on_sortButton_clicked</span><span class="params">()</span></span>;   <span class="comment">//排序</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">// SORTWIDGET_H</span></span></span><br></pre></td></tr></table></figure>
<h4 id="sortwidget-cpp"><a href="#sortwidget-cpp" class="headerlink" title="sortwidget.cpp"></a>sortwidget.cpp</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"sortwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ui_sortwidget.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line">SortWidget::SortWidget(QWidget *parent) :</span><br><span class="line">    QWidget(parent),</span><br><span class="line">    ui(<span class="keyword">new</span> Ui::SortWidget)</span><br><span class="line">&#123;</span><br><span class="line">    ui-&gt;setupUi(<span class="keyword">this</span>);</span><br><span class="line">    sortButtonGroup = <span class="keyword">new</span> QButtonGroup();</span><br><span class="line">    <span class="comment">//实例化sortButtonGroup</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;mathRadioButton, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//将代表数学的单选框加入sortButtonGroup并将其id设为0</span></span><br><span class="line">    <span class="comment">//不建议使用默认id，默认id是由-2开始依次递减的</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;enRadioButton, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//将代表英语的单选框加入sortButtonGroup并将其id设为1</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;cRadioButton, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">//将代表C语言的单选框加入sortButtonGroup并将其id设为2</span></span><br><span class="line">    sortButtonGroup-&gt;addButton(ui-&gt;avgRadioButton, <span class="number">3</span>);</span><br><span class="line">    <span class="comment">//将代表平均的单选框加入sortButtonGroup并将其id设为3</span></span><br><span class="line">    ui-&gt;avgRadioButton-&gt;setChecked(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">//平均成绩默认选中</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;setColumnCount(<span class="number">6</span>);</span><br><span class="line">    QStringList headerLabels;</span><br><span class="line">    <span class="comment">//QStringList headerLabels用来记录表格表头数据</span></span><br><span class="line">    headerLabels &lt;&lt; tr(<span class="string">"姓名"</span>) &lt;&lt; tr(<span class="string">"学号"</span>) &lt;&lt; tr(<span class="string">"数学"</span>) &lt;&lt; tr(<span class="string">"英语"</span>) &lt;&lt; tr(<span class="string">"C语言"</span>) &lt;&lt; tr(<span class="string">"平均"</span>);</span><br><span class="line">    ui-&gt;tableWidget-&gt;setHorizontalHeaderLabels(headerLabels);</span><br><span class="line">    <span class="comment">// void setHorizontalHeaderLabels(const QStringList &amp;labels);设置水平表头标签</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;horizontalHeader()-&gt;setSectionResizeMode(QHeaderView::Stretch);</span><br><span class="line">    <span class="comment">//设置根据总宽度调整列宽</span></span><br><span class="line">    ui-&gt;tableWidget-&gt;setRowCount(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//初始行数设为一行</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SortWidget::~SortWidget()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">delete</span> ui;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> SortWidget::on_returnButton_clicked()&#123;</span><br><span class="line">    <span class="function">emit <span class="title">display</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">getStudentInfo</span><span class="params">(QVector&lt;StudentInfo&gt; &amp;allStudentInfo)</span></span>&#123;  <span class="comment">//读取信息成功返回true 否则返回false</span></span><br><span class="line">    <span class="function">QFile <span class="title">file</span><span class="params">(<span class="string">"student.txt"</span>)</span></span>;</span><br><span class="line">    file.open(QIODevice::ReadOnly|QIODevice::Text);</span><br><span class="line">    <span class="comment">//以只读方式打开文本文件student.txt</span></span><br><span class="line">    <span class="function">QTextStream <span class="title">inp</span><span class="params">(&amp;file)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(!file.isOpen())&#123; <span class="comment">//文件打开失败</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"数据文件打开失败"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!inp.atEnd())&#123;    <span class="comment">//读到文件结尾</span></span><br><span class="line">        QString name;</span><br><span class="line">        <span class="keyword">int</span> id, math, english, languageC;</span><br><span class="line">        inp &gt;&gt; name &gt;&gt; id &gt;&gt; math &gt;&gt; english &gt;&gt; languageC;</span><br><span class="line">        allStudentInfo.push_back(StudentInfo(name, id, math, english, languageC));</span><br><span class="line">        <span class="comment">//调用之前声明的构造函数实例化一个StudentInfo对象并将其加入allStudentInfo</span></span><br><span class="line">    &#125;</span><br><span class="line">    allStudentInfo.pop_back();</span><br><span class="line">    <span class="comment">//扔掉最后的无用数据</span></span><br><span class="line">    file.close();</span><br><span class="line">    <span class="comment">//关闭文件</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_math</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123;    <span class="comment">//数学排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getMath() &gt; b.getMath();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_English</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123; <span class="comment">//英语排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getEnglish() &gt; b.getEnglish();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_languageC</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123;   <span class="comment">//C语言排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getLanguageC() &gt; b.getLanguageC();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp_avg</span><span class="params">(StudentInfo a, StudentInfo b)</span></span>&#123; <span class="comment">//平均成绩排序</span></span><br><span class="line">    <span class="keyword">return</span> a.getAvg() &gt; b.getAvg();</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">void</span> SortWidget::on_sortButton_clicked()&#123;</span><br><span class="line">    ui-&gt;tableWidget-&gt;clearContents();</span><br><span class="line">    <span class="comment">//清空除表头外的所有数据</span></span><br><span class="line">    <span class="comment">//若想清除表头可使用clear()</span></span><br><span class="line">    <span class="keyword">int</span> sortTag = sortButtonGroup-&gt;checkedId();</span><br><span class="line">    <span class="comment">//取得当前选中的单选框的id</span></span><br><span class="line">    QVector&lt;StudentInfo&gt; allStudentInfo;</span><br><span class="line">    <span class="comment">//数据类型为StudentInfo的QVector容器</span></span><br><span class="line">    <span class="keyword">if</span>(!getStudentInfo(allStudentInfo)) <span class="comment">//从文件读取数据到allStudentInfo</span></span><br><span class="line">        <span class="keyword">return</span>; <span class="comment">//读取失败直接返回</span></span><br><span class="line">    <span class="keyword">if</span>(allStudentInfo.empty())&#123; <span class="comment">//allStudentInfo中没有数据</span></span><br><span class="line">        QMessageBox::about(<span class="literal">NULL</span>, <span class="string">"反馈"</span>, <span class="string">"没有学生信息"</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">switch</span> (sortTag) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>: <span class="comment">//sortTag==0根据数学进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_math);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>: <span class="comment">//sortTag==1根据英语进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_English);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>: <span class="comment">//sortTag==2根据C语言进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_languageC);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">//sortTag==3根据平均成绩进行排序</span></span><br><span class="line">            <span class="built_in">std</span>::sort(allStudentInfo.begin(), allStudentInfo.end(), cmp_avg);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ui-&gt;tableWidget-&gt;setRowCount(allStudentInfo.size());</span><br><span class="line">    <span class="comment">//将表格的行数设为与学生数量相同</span></span><br><span class="line">    <span class="comment">//否则setItem添加单元格不会生效</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; allStudentInfo.size(); i++)&#123;</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">0</span>, <span class="keyword">new</span> QTableWidgetItem(allStudentInfo[i].getName()));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">1</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getId())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">2</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getMath())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">3</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getEnglish())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">4</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getLanguageC())));</span><br><span class="line">        ui-&gt;tableWidget-&gt;setItem(i, <span class="number">5</span>, <span class="keyword">new</span> QTableWidgetItem(QString::number(allStudentInfo[i].getAvg())));</span><br><span class="line">        <span class="comment">//设置各单元格的数据，非QString类型的数据需要转换为QString</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>到此为止我们整个项目便完成了，以后可能还会继续完善。</p>
<p>源代码</p>
<p><a href="https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_5(all" target="_blank" rel="noopener">https://github.com/suvvm/StudentManagementSystem_Qt/tree/master/StudentManagementSystem_Qt_5(all</a>)</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Qt5/" rel="tag"># Qt5</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/04/11/2015%E5%B9%B4%E7%AC%AC%E5%85%AD%E5%B1%8A-%E8%93%9D%E6%A1%A5%E6%9D%AFC-C-%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1-%E6%9C%AC%E7%A7%91B%E7%BB%84%E5%86%B3%E8%B5%9B-%E5%AE%8C%E7%BE%8E%E6%AD%A3%E6%96%B9%E5%BD%A2/" rel="prev" title="2015年第六届 蓝桥杯C  C++程序设计 本科B组决赛 完美正方形">
      <i class="fa fa-chevron-left"></i> 2015年第六届 蓝桥杯C  C++程序设计 本科B组决赛 完美正方形
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/05/09/Java%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%EF%BC%88%E5%9F%BA%E4%BA%8Esocket%E4%B8%8ERandomAccessFile%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%EF%BC%89/" rel="next" title="Java断点续传（基于socket与RandomAccessFile的简单实现）">
      Java断点续传（基于socket与RandomAccessFile的简单实现） <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、项目设计"><span class="nav-number">1.</span> <span class="nav-text">一、项目设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、需求分析"><span class="nav-number">1.1.</span> <span class="nav-text">　　1、需求分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、窗口设计"><span class="nav-number">1.2.</span> <span class="nav-text">　　2、窗口设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、数据结构设计"><span class="nav-number">1.3.</span> <span class="nav-text">　　3、数据结构设计</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、项目制作"><span class="nav-number">2.</span> <span class="nav-text">二、项目制作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、建立项目"><span class="nav-number">2.1.</span> <span class="nav-text">1、建立项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、添加窗口"><span class="nav-number">2.2.</span> <span class="nav-text">2、添加窗口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、实现窗口之间的切换"><span class="nav-number">2.3.</span> <span class="nav-text">　　3、实现窗口之间的切换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、完善窗口设计"><span class="nav-number">2.4.</span> <span class="nav-text">　　4、完善窗口设计</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1：AddStudentWidget"><span class="nav-number">2.4.1.</span> <span class="nav-text">1：AddStudentWidget</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2：modifyWidget"><span class="nav-number">2.4.2.</span> <span class="nav-text">　　2：modifyWidget</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3：selectwidget"><span class="nav-number">2.4.3.</span> <span class="nav-text">　　3：selectwidget</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4：sortwidget"><span class="nav-number">2.4.4.</span> <span class="nav-text">　　4：sortwidget</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、完成学生类的设计"><span class="nav-number">2.5.</span> <span class="nav-text">　　5、完成学生类的设计</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#studentinfo-h"><span class="nav-number">2.5.1.</span> <span class="nav-text">　　studentinfo.h</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、完善添加学生信息"><span class="nav-number">2.6.</span> <span class="nav-text">　　6、完善添加学生信息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#addstudentwidget-h"><span class="nav-number">2.6.1.</span> <span class="nav-text">　　addstudentwidget.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#addstudentwidget-cpp"><span class="nav-number">2.6.2.</span> <span class="nav-text">　　addstudentwidget.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7、完善修改信息"><span class="nav-number">2.7.</span> <span class="nav-text">　　7、完善修改信息</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#modifywidget-h"><span class="nav-number">2.7.1.</span> <span class="nav-text">　　modifywidget.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#modifywidget-cpp"><span class="nav-number">2.7.2.</span> <span class="nav-text">　　modifywidget.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8、查询模块"><span class="nav-number">2.8.</span> <span class="nav-text">8、查询模块</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#selectwidget-h"><span class="nav-number">2.8.1.</span> <span class="nav-text">selectwidget.h</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#selectwidget-cpp"><span class="nav-number">2.8.2.</span> <span class="nav-text">selectwidget.cpp</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9、排序模块"><span class="nav-number">2.9.</span> <span class="nav-text">9、排序模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sortwidget-h"><span class="nav-number">2.10.</span> <span class="nav-text">sortwidget.h</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#sortwidget-cpp"><span class="nav-number">2.10.1.</span> <span class="nav-text">sortwidget.cpp</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="SUVVM"
      src="/images/ortrait.jpg">
  <p class="site-author-name" itemprop="name">SUVVM</p>
  <div class="site-description" itemprop="description">SUVVM的个人博客，主要涉及编程知识分享、算法题解等方面</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">148</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">84</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/suvvm" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;suvvm" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/suvvm@foxmail.com" title="E-Mail → suvvm@foxmail.com"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">SUVVM</span>
	<a href="http://www.beian.miit.gov.cn/"  style="color:#f72b07" target="_blank">鲁ICP备19040043号-2</a>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var canonicalURL, curProtocol;
      //Get the <link> tag
      var x=document.getElementsByTagName("link");
		//Find the last canonical URL
		if(x.length > 0){
			for (i=0;i<x.length;i++){
				if(x[i].rel.toLowerCase() == 'canonical' && x[i].href){
					canonicalURL=x[i].href;
				}
			}
		}
    //Get protocol
	    if (!canonicalURL){
	    	curProtocol = window.location.protocol.split(':')[0];
	    }
	    else{
	    	curProtocol = canonicalURL.split(':')[0];
	    }
      //Get current URL if the canonical URL does not exist
	    if (!canonicalURL) canonicalURL = window.location.href;
	    //Assign script content. Replace current URL with the canonical URL
      !function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,r=canonicalURL,t=document.referrer;if(!e.test(r)){var n=(String(curProtocol).toLowerCase() === 'https')?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif";t?(n+="?r="+encodeURIComponent(document.referrer),r&&(n+="&l="+r)):r&&(n+="?l="+r);var i=new Image;i.src=n}}(window);})();
  </script>















  

  

  

</body>
</html>
